2025-06-11 22:56:08,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:08,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:10,790 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:13,080 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:13,360 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:13,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:15,436 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:17,792 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:18,368 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:18,369 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:20,037 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:22,361 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:23,361 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:23,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:24,720 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:27,171 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:28,357 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:28,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:29,555 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:31,663 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:33,369 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:33,370 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:33,984 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:35,984 - INFO - app.main - Application shutdown event triggered.
2025-06-11 22:56:35,984 - INFO - app.main - APScheduler shut down gracefully.
2025-06-11 22:56:35,984 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-11 22:56:35,985 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-11 22:56:36,049 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-11 22:56:36,049 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-11 22:56:36,049 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-11 22:56:36,051 - INFO - app.main - Redis client connection closed.
2025-06-11 22:56:36,051 - INFO - app.main - Application shutdown event finished.
2025-06-12 01:58:26,434 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 01:58:26,451 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 01:58:26,456 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 01:58:26,456 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 01:58:26,991 - INFO - app.main - Application startup event triggered.
2025-06-12 01:58:27,031 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 01:58:27,031 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 01:58:27,052 - INFO - app.main - Redis client initialized successfully.
2025-06-12 01:58:27,065 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 01:58:27,111 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 01:58:27,114 - INFO - app.main - Database tables ensured/created.
2025-06-12 01:58:27,118 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 01:58:28,247 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 01:58:28,247 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMDUwNywiaWF0IjoxNzQ5NzE4NzA3fQ.9CMjUJdcguoWJvXY0RfmaaaU29y8BnIlXMRvX7ckOf4
2025-06-12 01:58:28,248 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 01:58:28,248 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 01:58:28,248 - INFO - app.main - Application startup event finished.
2025-06-12 01:58:28,248 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 01:58:28,249 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 01:58:28,863 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 01:58:28,885 - INFO - app.main - Redis ping response: True
2025-06-12 01:58:32,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:32,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:37,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:37,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:42,118 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:42,119 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:47,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:47,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:52,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:52,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:57,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:57,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:02,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:02,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:07,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:07,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:12,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:12,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:17,119 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:17,120 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:22,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:22,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:27,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:27,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:32,134 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:32,135 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:37,130 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:37,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:42,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:42,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:47,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:47,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:52,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:52,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:57,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:57,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:00,731 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:00:00,731 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMDYwMCwiaWF0IjoxNzQ5NzE4ODAwfQ.iqVIq7NG3oGuOd8hrC0JJ6cI8ti403EateHfyyC87UQ
2025-06-12 02:00:02,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:02,117 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:07,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:07,132 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:12,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:12,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:17,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:17,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:22,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:22,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:27,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:27,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:32,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:32,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:37,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:37,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:42,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:42,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:47,119 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:47,119 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:52,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:52,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:57,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:57,130 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:02,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:02,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:07,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:07,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:12,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:12,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:17,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:17,124 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:22,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:22,120 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:27,128 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:27,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:32,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:32,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:37,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:37,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:42,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:42,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:47,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:47,132 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:52,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:52,124 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:57,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:57,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:02,138 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:02,139 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:07,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:07,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:12,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:12,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:17,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:17,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:22,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:22,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:27,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:27,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:32,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:32,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:37,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:37,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:39,968 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:02:39,968 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:02:39,968 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:02:39,970 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:02:41,585 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:02:41,585 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:02:41,585 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:02:41,586 - INFO - app.main - Redis client connection closed.
2025-06-12 02:02:41,586 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:07:21,269 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:07:21,288 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:07:21,293 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:07:21,293 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:07:21,811 - INFO - app.main - Application startup event triggered.
2025-06-12 02:07:21,850 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:07:21,850 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:07:21,875 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:07:21,890 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:07:21,989 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:07:21,992 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:07:21,998 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:07:23,074 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:07:23,075 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMTA0MSwiaWF0IjoxNzQ5NzE5MjQxfQ.eBMK_NKpvU4NJlQEXA0eO5ECaGQfjrUxQTO2I70fxs4
2025-06-12 02:07:23,075 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:07:23,075 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:07:23,075 - INFO - app.main - Application startup event finished.
2025-06-12 02:07:23,076 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:07:23,077 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:07:23,805 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:07:23,823 - INFO - app.main - Redis ping response: True
2025-06-12 02:07:26,216 - ERROR - app.database.session - Database session error: Could not locate any relevant foreign key columns for primary join condition 'users.id = user_favorite_symbols.user_id AND user_favorite_symbols.user_type = :user_type_1' on relationship User.favorite_symbols.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or are annotated in the join condition with the foreign() annotation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 838, in login_demo_user
    demo_user = await crud_user.get_demo_user_by_email(db, email=credentials.email)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\crud\user.py", line 310, in get_demo_user_by_email
    result = await db.execute(select(DemoUser).filter(DemoUser.email == email))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 4728, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\base.py", line 687, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2331, in __init__
    self._check_foreign_cols(self.primaryjoin, True)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2971, in _check_foreign_cols
    raise sa_exc.ArgumentError(err)
sqlalchemy.exc.ArgumentError: Could not locate any relevant foreign key columns for primary join condition 'users.id = user_favorite_symbols.user_id AND user_favorite_symbols.user_type = :user_type_1' on relationship User.favorite_symbols.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or are annotated in the join condition with the foreign() annotation.
2025-06-12 02:07:26,998 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:26,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:32,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:32,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:36,998 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:36,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:42,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:42,008 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:47,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:47,003 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:52,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:52,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:57,009 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:57,010 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:01,997 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:01,998 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:07,001 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:07,002 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:12,010 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:12,011 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:17,001 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:17,002 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:21,999 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:21,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:27,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:27,001 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:32,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:32,001 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:37,011 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:37,012 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:41,999 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:42,000 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:47,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:47,008 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:52,005 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:52,006 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:57,012 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:57,013 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:02,004 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:02,005 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:07,006 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:07,007 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:12,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:12,000 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:17,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:17,007 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:22,002 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:22,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:27,002 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:27,003 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:30,864 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:09:30,865 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:09:30,865 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:09:30,866 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:09:32,100 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:09:32,101 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:09:32,101 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:09:32,104 - INFO - app.main - Redis client connection closed.
2025-06-12 02:09:32,104 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:21:14,241 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:21:14,269 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:21:14,277 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:21:14,277 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:21:14,877 - INFO - app.main - Application startup event triggered.
2025-06-12 02:21:14,914 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:21:14,915 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:21:14,935 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:21:14,955 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:21:15,019 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:21:15,025 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:21:15,032 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:21:16,085 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:21:16,085 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMTg3NSwiaWF0IjoxNzQ5NzIwMDc1fQ.2Z5Uk5O2wuae5yPr0e4pzpV5GDqLjg4FV1BhV0UBtWg
2025-06-12 02:21:16,086 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:21:16,086 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:21:16,086 - INFO - app.main - Application startup event finished.
2025-06-12 02:21:16,087 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:21:16,088 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:21:16,819 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:21:16,833 - INFO - app.main - Redis ping response: True
2025-06-12 02:21:20,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:20,036 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:21,512 - ERROR - app.database.session - Database session error: 401: Invalid email or password for demo user
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 845, in login_demo_user
    raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid email or password for demo user
2025-06-12 02:21:25,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:25,029 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:30,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:30,030 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:35,034 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:35,035 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:40,036 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:40,037 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:45,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:45,030 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:50,042 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:50,043 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:55,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:55,036 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:00,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:00,035 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:05,041 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:05,042 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:10,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:10,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:15,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:15,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:20,043 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:20,044 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:25,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:25,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:30,043 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:30,043 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:33,247 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:22:33,247 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:22:33,247 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:22:33,250 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:22:34,837 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:22:34,837 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:22:34,837 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:22:34,838 - INFO - app.main - Redis client connection closed.
2025-06-12 02:22:34,838 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:23:54,663 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:23:54,686 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:23:54,692 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:23:54,693 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:23:55,371 - INFO - app.main - Application startup event triggered.
2025-06-12 02:23:55,410 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:23:55,410 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:23:55,441 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:23:55,492 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:23:55,563 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:23:55,566 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:23:55,571 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:23:56,751 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:23:56,751 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjAzNSwiaWF0IjoxNzQ5NzIwMjM1fQ.ELpsQuwnuO7AnLcsBrw5rgops3VzGU23CMRDdOS5Ea8
2025-06-12 02:23:56,751 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:23:56,752 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:23:56,752 - INFO - app.main - Application startup event finished.
2025-06-12 02:23:56,752 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:23:56,753 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:23:57,464 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:23:57,477 - INFO - app.main - Redis ping response: True
2025-06-12 02:24:00,576 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:24:00,577 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:24:05,575 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:24:05,576 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:24:08,934 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:24:08,935 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:24:08,935 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:24:08,936 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:24:09,144 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:24:09,144 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:24:09,145 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:24:09,147 - INFO - app.main - Redis client connection closed.
2025-06-12 02:24:09,147 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:24:10,540 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:10,556 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:10,562 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:10,562 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:21,888 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:21,907 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:21,913 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:21,913 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:42,781 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:42,830 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:42,843 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:42,843 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:44,817 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:44,836 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:44,841 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:44,842 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:25:24,090 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:25:24,108 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:25:24,113 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:25:24,113 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:25:53,811 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:25:53,828 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:25:53,833 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:25:53,833 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:10,946 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:10,974 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:10,983 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:10,983 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:29,996 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:30,030 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:30,038 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:30,038 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:34,509 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:34,540 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:34,547 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:34,547 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:51,848 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:51,877 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:51,878 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:51,885 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:51,885 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:51,899 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:51,905 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:51,906 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:54,063 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:54,077 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:54,080 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:54,085 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:54,085 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:54,094 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:54,100 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:54,100 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:21,296 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:21,301 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:21,315 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:21,318 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:21,320 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:21,320 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:21,324 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:21,324 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:58,784 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:58,805 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:58,805 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:58,811 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:58,811 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:58,824 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:58,830 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:58,830 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:13,526 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:28:13,539 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:28:13,546 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:28:13,552 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:28:13,552 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:13,561 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:28:13,569 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:28:13,569 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:14,067 - INFO - app.main - Application startup event triggered.
2025-06-12 02:28:14,070 - INFO - app.main - Application startup event triggered.
2025-06-12 02:28:14,103 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:28:14,103 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:28:14,104 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:28:14,104 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:28:14,121 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:28:14,163 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:28:14,175 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:28:14,196 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:28:14,226 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:28:14,229 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:28:14,235 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:28:14,252 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:28:14,255 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:28:14,262 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:28:15,405 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:28:15,405 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjI5NCwiaWF0IjoxNzQ5NzIwNDk0fQ.IBvKOLuSlw0I4EoBNi_NwB2TSulkoxBSvPZ_vfNSqQA
2025-06-12 02:28:15,406 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjI5NCwiaWF0IjoxNzQ5NzIwNDk0fQ.IBvKOLuSlw0I4EoBNi_NwB2TSulkoxBSvPZ_vfNSqQA
2025-06-12 02:28:15,406 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Application startup event finished.
2025-06-12 02:28:15,406 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Application startup event finished.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:28:16,124 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:16,125 - INFO - app.main - Redis ping response: True
2025-06-12 02:28:16,137 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:16,151 - INFO - app.main - Redis ping response: True
2025-06-12 02:28:19,239 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:19,240 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:19,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:19,270 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:24,245 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:24,247 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:24,271 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:24,272 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:29,245 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:29,246 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:29,259 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:29,260 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:34,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:34,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:34,263 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:34,266 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:38,338 - ERROR - app.database.session - Database session error: (pymysql.err.OperationalError) (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")
[SQL: SELECT user_favorite_symbols.id, user_favorite_symbols.user_id, user_favorite_symbols.symbol_id, user_favorite_symbols.user_type, user_favorite_symbols.created_at, user_favorite_symbols.updated_at 
FROM user_favorite_symbols 
WHERE user_favorite_symbols.user_id = %s AND user_favorite_symbols.symbol_id = %s AND user_favorite_symbols.user_type = %s]
[parameters: (1, 23, 'demo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\favorites.py", line 55, in add_to_favorites
    user_favorite = await crud_favorites.add_favorite_symbol(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\app\crud\favorites.py", line 42, in add_favorite_symbol
    result = await db.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")
[SQL: SELECT user_favorite_symbols.id, user_favorite_symbols.user_id, user_favorite_symbols.symbol_id, user_favorite_symbols.user_type, user_favorite_symbols.created_at, user_favorite_symbols.updated_at 
FROM user_favorite_symbols 
WHERE user_favorite_symbols.user_id = %s AND user_favorite_symbols.symbol_id = %s AND user_favorite_symbols.user_type = %s]
[parameters: (1, 23, 'demo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-06-12 02:28:39,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:39,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:39,261 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:39,263 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:44,247 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:44,248 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:44,264 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:44,265 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:49,252 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:49,253 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:49,262 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:49,263 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:54,234 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:54,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:54,264 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:54,265 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:59,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:59,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:59,269 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:59,270 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:04,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:04,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:04,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:04,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:09,240 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:09,241 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:09,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:09,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:14,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:14,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:14,266 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:14,267 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:19,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:19,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:19,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:19,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:24,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:24,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:24,265 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:24,266 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:29,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:29,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:29,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:29,268 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:34,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:34,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:39,237 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:39,237 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:43,320 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:29:43,320 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:29:43,320 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:29:43,322 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:29:45,023 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:29:45,023 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:29:45,024 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:29:45,024 - INFO - app.main - Redis client connection closed.
2025-06-12 02:29:45,025 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:29:46,691 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:29:46,713 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:29:46,719 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:29:46,720 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:29:47,249 - INFO - app.main - Application startup event triggered.
2025-06-12 02:29:47,283 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:29:47,284 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:29:47,324 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:29:47,374 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:29:47,437 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:29:47,440 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:29:47,446 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:29:48,703 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:29:48,704 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjM4NywiaWF0IjoxNzQ5NzIwNTg3fQ.yjyoZyAqazTebfVdvkTGHkCwzmy0uykljDX-mT2iUyM
2025-06-12 02:29:48,704 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:29:48,704 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:29:48,704 - INFO - app.main - Application startup event finished.
2025-06-12 02:29:48,704 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:29:48,705 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:29:49,318 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:29:49,345 - INFO - app.main - Redis ping response: True
2025-06-12 02:29:52,446 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:52,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:57,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:57,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:00,367 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:30:00,367 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjQwMCwiaWF0IjoxNzQ5NzIwNjAwfQ.0FpSnf5y6iVsl0XcYZdQY0eS1J0YkOCvseIzPJmFqEo
2025-06-12 02:30:02,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:02,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:07,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:07,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:12,457 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:12,459 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:17,448 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:17,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:22,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:22,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:27,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:27,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:32,458 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:32,459 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:37,445 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:37,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:42,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:42,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:47,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:47,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:52,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:52,455 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:57,450 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:57,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:02,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:02,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:07,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:07,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:12,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:12,451 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:17,445 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:17,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:22,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:22,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:27,448 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:27,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:32,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:32,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:37,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:37,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:42,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:42,454 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:47,450 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:47,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:52,456 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:52,457 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:57,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:57,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:02,444 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:02,444 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:07,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:07,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:12,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:12,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:17,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:17,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:22,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:22,447 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:27,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:27,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:32,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:32,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:37,088 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:32:37,088 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:32:37,088 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:32:37,090 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:32:38,061 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:32:38,062 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:32:38,062 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:32:38,063 - INFO - app.main - Redis client connection closed.
2025-06-12 02:32:38,063 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:32:39,779 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:32:39,800 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:32:39,805 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:32:39,806 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:32:40,475 - INFO - app.main - Application startup event triggered.
2025-06-12 02:32:40,510 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:32:40,511 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:32:40,538 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:32:40,584 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:32:40,875 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:32:40,877 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:32:40,882 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:32:42,050 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:32:42,051 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU2MCwiaWF0IjoxNzQ5NzIwNzYwfQ._o__xcpRoE7N5hk2g-yUu5Pfp54-y70av-1NRpOdVj0
2025-06-12 02:32:42,051 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:32:42,051 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:32:42,051 - INFO - app.main - Application startup event finished.
2025-06-12 02:32:42,051 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:32:42,052 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:32:42,769 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:32:42,771 - INFO - app.main - Redis ping response: True
2025-06-12 02:32:45,884 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:45,885 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:50,884 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:50,886 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:55,888 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:55,888 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:00,894 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:00,895 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:01,237 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:01,237 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:01,238 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:01,241 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:03,457 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:03,457 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:03,457 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:03,458 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:03,458 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:05,310 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:05,329 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:05,334 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:05,334 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:06,106 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:06,142 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:06,143 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:06,165 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:06,181 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:06,263 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:06,267 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:06,275 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:07,446 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:07,446 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU4NiwiaWF0IjoxNzQ5NzIwNzg2fQ.c5pnoELrKRhfFsKnRkDCviYDVBYBrqa2F6mVmby5BgA
2025-06-12 02:33:07,446 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:07,446 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:07,446 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:07,447 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:07,447 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:08,174 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:08,196 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:08,200 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:10,288 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:10,288 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:10,289 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:10,289 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:10,289 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:10,293 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:10,293 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:13,723 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:13,744 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:13,750 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:13,750 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:14,521 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:14,554 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:14,554 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:14,589 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:14,611 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:14,677 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:14,679 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:14,685 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:15,740 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:15,741 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU5NCwiaWF0IjoxNzQ5NzIwNzk0fQ.m03JzG-2biLaaxDW-bfWcAVvBKoar1rp-1vMHDCIenE
2025-06-12 02:33:15,741 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:15,741 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:15,741 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:15,742 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:15,742 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:16,485 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:16,488 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:16,490 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:16,490 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:16,491 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:16,491 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:17,075 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:17,075 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:17,076 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:17,076 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:17,076 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:18,938 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:18,965 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:18,970 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:18,970 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:19,519 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:19,563 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:19,563 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:19,588 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:19,602 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:19,659 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:19,660 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:19,664 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:20,759 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:20,759 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU5OSwiaWF0IjoxNzQ5NzIwNzk5fQ.9nqx7pYPLmV1h55zVjesUCL1ifl4QXsnjBgaUSkBo5Y
2025-06-12 02:33:20,759 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:20,759 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:20,759 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:20,760 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:20,760 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:21,495 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:21,499 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:21,501 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:21,886 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:21,886 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:21,886 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:21,886 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:21,886 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:21,887 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:21,887 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:24,019 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:24,052 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:24,059 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:24,060 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:24,829 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:24,880 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:24,880 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:24,901 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:24,921 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:25,009 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:25,011 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:25,016 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:26,099 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:26,099 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYwNSwiaWF0IjoxNzQ5NzIwODA1fQ.HM81ZfwVAT1vg1l2s4AegR0DROWHIAd3SMB543-Gi9s
2025-06-12 02:33:26,099 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:26,099 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:26,099 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:26,100 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:26,100 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:26,717 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:26,730 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:27,276 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:27,295 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:27,302 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:27,303 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:28,008 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:28,046 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:28,046 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:28,067 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:28,081 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:28,172 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:28,175 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:28,183 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:29,209 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:29,209 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYwOCwiaWF0IjoxNzQ5NzIwODA4fQ.KTIu9NmYSsOkPsh5L7Vbo9tWqOtsD7xz4DC_5Q6n7iQ
2025-06-12 02:33:29,209 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:29,209 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:29,209 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:29,210 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:29,210 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:29,819 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:29,820 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:29,820 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:29,821 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:29,874 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:29,892 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:30,900 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:30,900 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:30,900 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:30,902 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:30,903 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:33,185 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:33,187 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:36,062 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:36,063 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:36,063 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:36,063 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:37,861 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:37,862 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:37,862 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:37,864 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:37,865 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:39,412 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:39,430 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:39,436 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:39,436 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:39,969 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:40,009 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:40,009 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:40,038 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:40,058 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:40,121 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:40,125 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:40,132 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:41,038 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:41,039 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYyMCwiaWF0IjoxNzQ5NzIwODIwfQ.P96-d69eoTQqXX4cLbB9-TDyoU6FfBD-NSxbdIg-wLs
2025-06-12 02:33:41,039 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:41,040 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:41,040 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:41,041 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:41,042 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:41,765 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:41,785 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:45,133 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:45,134 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:50,139 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:50,140 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:55,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:55,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:00,130 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:00,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:05,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:05,136 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:10,133 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:10,134 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:15,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:15,137 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:20,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:20,136 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:25,142 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:25,143 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:29,617 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:34:29,618 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:34:29,618 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:34:29,619 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:34:30,816 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:34:30,816 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:34:30,817 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:34:30,819 - INFO - app.main - Redis client connection closed.
2025-06-12 02:34:30,820 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:34:32,437 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:34:32,457 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:34:32,462 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:34:32,462 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:34:33,040 - INFO - app.main - Application startup event triggered.
2025-06-12 02:34:33,075 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:34:33,075 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:34:33,103 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:34:33,144 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:34:33,223 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:34:33,225 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:34:33,234 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:34:34,379 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:34:34,380 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjY3MywiaWF0IjoxNzQ5NzIwODczfQ.ZG6ovkxS8h-zYOkoYRP54V74O1dfYvk6MFw06kOPfPU
2025-06-12 02:34:34,380 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:34:34,380 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:34:34,380 - INFO - app.main - Application startup event finished.
2025-06-12 02:34:34,381 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:34:34,381 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:34:35,041 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:34:35,064 - INFO - app.main - Redis ping response: True
2025-06-12 02:34:37,198 - ERROR - app.database.session - Database session error: 401: Invalid email, user type, or password
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 237, in login_with_user_type
    raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid email, user type, or password
2025-06-12 02:34:38,231 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:38,233 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:43,242 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:43,242 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:48,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:48,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:53,236 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:53,236 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:58,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:58,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:03,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:03,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:08,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:08,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:13,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:13,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:13,368 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:13,369 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:13,369 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:13,370 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:15,042 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:15,043 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:15,043 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:15,048 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:15,048 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:16,806 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:16,823 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:16,828 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:16,828 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:17,380 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:17,419 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:17,419 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:17,441 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:17,469 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:17,516 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:17,517 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:17,522 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:18,414 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:18,414 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjcxNywiaWF0IjoxNzQ5NzIwOTE3fQ.Sy1YiN0Irec31rQWDwP_V0nezibuECuw_NRJ6HJcJD8
2025-06-12 02:35:18,414 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:18,414 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:18,414 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:18,415 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:18,415 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:19,043 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:19,051 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:19,054 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:19,055 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:19,055 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:19,055 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:19,668 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:19,668 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:19,669 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:19,670 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:19,671 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:21,947 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:21,981 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:21,989 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:21,989 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:22,735 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:22,771 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:22,771 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:22,796 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:22,816 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:22,880 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:22,883 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:22,888 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:23,920 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:23,921 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjcyMiwiaWF0IjoxNzQ5NzIwOTIyfQ.cv5In8Z0swCRsHMy_3SuNtptSOwTeu1ySwtmMTy0Sj8
2025-06-12 02:35:23,921 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:23,921 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:23,921 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:23,921 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:23,922 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:24,563 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:24,579 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:27,889 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:27,889 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:30,389 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:30,389 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:30,389 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:30,390 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:31,120 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:31,120 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:31,120 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:31,122 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:31,122 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:32,566 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:32,584 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:32,590 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:32,590 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:33,088 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:33,123 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:33,123 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:33,150 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:33,197 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:33,258 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:33,263 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:33,270 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:34,271 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:34,271 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjczMywiaWF0IjoxNzQ5NzIwOTMzfQ.GC3ejqcEL5voefLi6sWVSiEUUhjoOYE0Y1poYXtoN9s
2025-06-12 02:35:34,271 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:34,272 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:34,272 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:34,273 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:34,274 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:35,011 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:35,021 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:38,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:38,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:43,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:43,268 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:48,272 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:48,273 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:51,168 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:51,169 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:51,169 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:51,170 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:51,698 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:51,699 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:51,699 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:51,703 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:51,703 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:54,475 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:54,496 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:54,502 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:54,502 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:55,104 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:55,143 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:55,144 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:55,169 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:55,189 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:55,257 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:55,261 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:55,269 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:56,505 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:56,505 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc1NSwiaWF0IjoxNzQ5NzIwOTU1fQ.4RG7Av1VCrrA8ZV7AXy8kdRSTaKnTDrvB8RBJqsRZFU
2025-06-12 02:35:56,505 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:56,505 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:56,505 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:56,506 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:56,506 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:57,227 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:57,248 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:57,250 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:57,250 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:57,250 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:57,250 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:58,531 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:58,531 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:58,532 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:58,533 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:58,533 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:00,620 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:00,651 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:00,658 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:00,658 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:01,476 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:01,512 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:01,512 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:01,544 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:01,569 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:01,650 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:01,652 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:01,655 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:02,650 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:02,650 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc2MSwiaWF0IjoxNzQ5NzIwOTYxfQ.L2dMzOiWQdIvxBrXlSskxqYCXKUBvkJr4UIi4wIT5mI
2025-06-12 02:36:02,650 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:02,650 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:02,650 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:02,651 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:02,651 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:03,469 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:03,470 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:05,573 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:36:05,574 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:36:05,574 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:36:05,575 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:36:07,681 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:36:07,681 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:36:07,681 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:36:07,683 - INFO - app.main - Redis client connection closed.
2025-06-12 02:36:07,683 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:11,114 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:11,141 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:11,150 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:11,150 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:11,775 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:11,810 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:11,811 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:11,839 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:11,860 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:11,936 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:11,942 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:11,951 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:12,992 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:12,993 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc3MSwiaWF0IjoxNzQ5NzIwOTcxfQ.oPnddURhxuBGiF01PeJEUHV5b4D5f47TKsMFn2GKpHQ
2025-06-12 02:36:12,993 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:12,993 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:12,993 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:12,994 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:12,994 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:13,627 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:13,644 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:16,955 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:16,956 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:21,958 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:21,958 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:26,956 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:26,957 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:31,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:31,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:36,950 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:36,951 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:37,753 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:36:37,753 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:36:37,753 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:36:37,754 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:36:39,925 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:36:39,925 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:36:39,926 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:36:39,927 - INFO - app.main - Redis client connection closed.
2025-06-12 02:36:39,927 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:41,855 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:41,878 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:41,885 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:41,885 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:51,245 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:51,264 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:51,269 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:51,269 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:51,875 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:51,917 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:51,917 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:51,943 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:51,993 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:52,050 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:52,054 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:52,060 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:53,342 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:53,342 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjgxMiwiaWF0IjoxNzQ5NzIxMDEyfQ.vQg0uib20gft2lqrA1TAve36dpdcTSfY5eCq9B2U7IA
2025-06-12 02:36:53,342 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:53,342 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:53,342 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:53,343 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:53,344 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:54,034 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:54,048 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:57,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:57,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:02,061 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:02,061 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:07,071 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:07,072 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:09,817 - ERROR - app.database.session - Database session error: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}

2025-06-12 02:37:12,066 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:12,067 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:17,068 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:17,069 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:22,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:22,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:27,069 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:27,070 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:32,061 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:32,062 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:37,058 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:37,059 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:42,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:42,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:47,073 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:47,074 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:52,064 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:52,065 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:57,066 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:57,067 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:02,071 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:02,072 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:07,060 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:07,061 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:08,886 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:38:08,886 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:38:08,886 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:38:08,889 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:38:09,116 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:38:09,116 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:38:09,117 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:38:09,118 - INFO - app.main - Redis client connection closed.
2025-06-12 02:38:09,119 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:38:13,001 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:38:13,019 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:38:13,025 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:38:13,025 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:38:13,586 - INFO - app.main - Application startup event triggered.
2025-06-12 02:38:13,622 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:38:13,622 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:38:13,643 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:38:13,691 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:38:13,755 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:38:13,758 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:38:13,763 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:38:14,947 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:38:14,947 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjg5MywiaWF0IjoxNzQ5NzIxMDkzfQ.CRs0kgKcpFnDArC5I8WIzJGCQPNDZZb_u1AgIhJghks
2025-06-12 02:38:14,947 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:38:14,947 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:38:14,947 - INFO - app.main - Application startup event finished.
2025-06-12 02:38:14,948 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:38:14,948 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:38:15,563 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:38:15,564 - INFO - app.main - Redis ping response: True
2025-06-12 02:38:18,765 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:18,767 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:19,939 - ERROR - app.database.session - Database session error: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}

2025-06-12 02:38:22,296 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:38:22,297 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:38:22,297 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:38:22,307 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:38:22,837 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:38:22,837 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:38:22,838 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:38:22,839 - INFO - app.main - Redis client connection closed.
2025-06-12 02:38:22,839 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:40:51,529 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:40:51,547 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:40:51,553 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:40:51,553 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:40:52,148 - INFO - app.main - Application startup event triggered.
2025-06-12 02:40:52,194 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:40:52,194 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:40:52,224 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:40:52,245 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:40:52,294 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:40:52,296 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:40:52,299 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:40:53,362 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:40:53,362 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzA1MiwiaWF0IjoxNzQ5NzIxMjUyfQ.s1ekZuA1tO1N_F-fKWALTz8qQfvij9pjb95ivXaYNeg
2025-06-12 02:40:53,362 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:40:53,362 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:40:53,362 - INFO - app.main - Application startup event finished.
2025-06-12 02:40:53,362 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:53,362 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:40:54,090 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:54,105 - INFO - app.main - Redis ping response: True
2025-06-12 02:40:54,107 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:40:54,487 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:40:54,487 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:40:54,488 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:40:54,488 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:40:54,488 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:40:54,489 - INFO - app.main - Redis client connection closed.
2025-06-12 02:40:54,489 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:40:56,158 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:40:56,175 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:40:56,181 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:40:56,181 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:40:56,748 - INFO - app.main - Application startup event triggered.
2025-06-12 02:40:56,797 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:40:56,797 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:40:56,817 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:40:56,849 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:40:56,933 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:40:56,937 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:40:56,946 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:40:57,944 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:40:57,944 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzA1NiwiaWF0IjoxNzQ5NzIxMjU2fQ.mltEWzfwHBASSkxmZufQVLjtkIafkpo7Q4EMLvgNA4E
2025-06-12 02:40:57,944 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:40:57,944 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:40:57,944 - INFO - app.main - Application startup event finished.
2025-06-12 02:40:57,945 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:57,945 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:40:58,599 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:58,615 - INFO - app.main - Redis ping response: True
2025-06-12 02:41:01,948 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:01,949 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:06,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:06,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:11,957 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:11,959 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:16,947 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:16,948 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:21,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:21,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:26,945 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:26,946 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:31,942 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:31,943 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:36,953 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:36,954 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:41,944 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:41,945 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:46,954 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:46,955 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:51,944 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:51,945 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:56,954 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:56,955 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:01,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:01,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:06,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:06,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:11,955 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:11,956 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:16,951 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:16,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:21,964 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:21,965 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:26,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:26,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:31,951 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:31,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:36,947 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:36,948 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:41,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:41,949 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:46,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:46,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:50,930 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:42:50,931 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:42:50,931 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:42:50,933 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:42:52,379 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:42:52,379 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:42:52,379 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:42:52,380 - INFO - app.main - Redis client connection closed.
2025-06-12 02:42:52,380 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:47:05,677 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:47:05,695 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:47:05,700 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:47:05,700 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:47:06,276 - INFO - app.main - Application startup event triggered.
2025-06-12 02:47:06,312 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:47:06,312 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:47:06,335 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:47:06,349 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:47:06,409 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:47:06,411 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:47:06,417 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:47:07,522 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:47:07,522 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzQyNiwiaWF0IjoxNzQ5NzIxNjI2fQ.I86uZGBOsf9hur9DJVjJjjf9VCeQWzUaV4tcxT3kclg
2025-06-12 02:47:07,522 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:47:07,522 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:47:07,522 - INFO - app.main - Application startup event finished.
2025-06-12 02:47:07,523 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:47:07,523 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:47:08,140 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:47:08,159 - INFO - app.main - Redis ping response: True
2025-06-12 02:47:11,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:11,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:16,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:16,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:21,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:21,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:26,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:26,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:31,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:31,424 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:36,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:36,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:41,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:41,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:46,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:46,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:51,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:51,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:56,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:56,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:01,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:01,424 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:06,429 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:06,430 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:11,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:11,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:16,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:16,417 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:21,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:21,430 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:26,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:26,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:31,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:31,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:36,419 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:36,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:41,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:41,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:46,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:46,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:51,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:51,425 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:56,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:56,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:01,426 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:01,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:06,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:06,417 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:11,429 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:11,429 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:16,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:16,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:21,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:21,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:26,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:26,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:31,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:31,420 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:36,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:36,416 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:41,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:41,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:46,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:46,427 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:48,629 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:49:48,629 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:49:48,629 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:49:48,632 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:49:50,447 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:49:50,448 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:49:50,448 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:49:50,450 - INFO - app.main - Redis client connection closed.
2025-06-12 02:49:50,450 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:51:54,703 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:51:54,741 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:51:54,754 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:51:54,755 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:51:55,715 - INFO - app.main - Application startup event triggered.
2025-06-12 02:51:55,804 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:51:55,804 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:51:55,844 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:51:55,919 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:51:56,061 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:51:56,066 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:51:56,079 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:51:57,213 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:51:57,214 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzcxNiwiaWF0IjoxNzQ5NzIxOTE2fQ.7Aqz9VJlLdWefRh8XMYZUxsLMJWX3eNH6TV2Y-GwmGU
2025-06-12 02:51:57,214 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:51:57,214 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:51:57,214 - INFO - app.main - Application startup event finished.
2025-06-12 02:51:57,215 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:51:57,216 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:51:58,008 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:51:58,010 - INFO - app.main - Redis ping response: True
2025-06-12 02:52:01,083 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:01,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:06,084 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:06,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:11,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:11,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:16,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:16,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:21,072 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:21,073 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:26,083 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:26,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:31,076 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:31,076 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:36,081 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:36,082 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:41,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:41,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:46,094 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:46,095 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:51,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:51,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:56,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:56,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:01,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:01,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:06,080 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:06,080 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:11,073 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:11,074 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:15,336 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:53:15,336 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:53:15,336 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:53:15,340 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:53:16,363 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:53:16,364 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:53:16,364 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:53:16,365 - INFO - app.main - Redis client connection closed.
2025-06-12 02:53:16,365 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:57:26,414 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:57:26,448 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:57:26,459 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:57:26,459 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:57:27,375 - INFO - app.main - Application startup event triggered.
2025-06-12 02:57:27,480 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:57:27,480 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:57:27,517 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:57:27,536 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:57:27,604 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:57:27,606 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:57:27,610 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:57:28,878 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:57:28,878 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDA0NywiaWF0IjoxNzQ5NzIyMjQ3fQ.hD4vh_Y7rONl4B6OhBy9EbiybI80L6DhR1OT9WbKRxk
2025-06-12 02:57:28,879 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:57:28,879 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:57:28,879 - INFO - app.main - Application startup event finished.
2025-06-12 02:57:28,879 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:57:28,880 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:57:29,524 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:57:29,547 - INFO - app.main - Redis ping response: True
2025-06-12 02:57:32,612 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:32,612 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:33,072 - INFO - app.api.v1.endpoints.favorites - Direct SQL query found 3 symbols for user 1
2025-06-12 02:57:33,072 - INFO - app.api.v1.endpoints.favorites - Symbols: ['AUDCAD', 'AUDCHF', 'EURUSD']
2025-06-12 02:57:37,611 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:37,612 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:42,615 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:42,617 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:47,615 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:47,616 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:52,617 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:52,618 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:57,613 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:57,614 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:02,609 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:02,610 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:07,618 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:07,619 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:12,612 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:12,613 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:14,440 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:58:14,440 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:58:14,440 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:58:14,443 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:58:16,190 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:58:16,190 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:58:16,191 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:58:16,196 - INFO - app.main - Redis client connection closed.
2025-06-12 02:58:16,197 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:58:18,845 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:58:18,889 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:58:18,901 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:58:18,901 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:58:19,839 - INFO - app.main - Application startup event triggered.
2025-06-12 02:58:19,897 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:58:19,897 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:58:19,925 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:58:19,989 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:58:20,105 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:58:20,108 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:58:20,114 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:58:21,100 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:58:21,101 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDEwMCwiaWF0IjoxNzQ5NzIyMzAwfQ._dgGJmAqNzJLDW1QaV-TyRnLHbtrxsEMFinP4FsGaYM
2025-06-12 02:58:21,101 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:58:21,101 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:58:21,101 - INFO - app.main - Application startup event finished.
2025-06-12 02:58:21,102 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:58:21,102 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:58:21,937 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:58:21,953 - INFO - app.main - Redis ping response: True
2025-06-12 02:58:21,956 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:58:23,057 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:58:23,066 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:58:23,067 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:58:23,067 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:58:23,068 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:58:23,071 - INFO - app.main - Redis client connection closed.
2025-06-12 02:58:23,071 - INFO - app.main - Application shutdown event finished.
2025-06-12 03:00:05,160 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 03:00:05,186 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 03:00:05,194 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 03:00:05,194 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 03:00:06,049 - INFO - app.main - Application startup event triggered.
2025-06-12 03:00:06,119 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 03:00:06,119 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 03:00:06,147 - INFO - app.main - Redis client initialized successfully.
2025-06-12 03:00:06,179 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 03:00:06,278 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 03:00:06,282 - INFO - app.main - Database tables ensured/created.
2025-06-12 03:00:06,292 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 03:00:07,491 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 03:00:07,491 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDIwNiwiaWF0IjoxNzQ5NzIyNDA2fQ.A7-KuYR76xIfbPNrSpulC12nx382JWx4Fx268I9Fedk
2025-06-12 03:00:07,491 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 03:00:07,491 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 03:00:07,491 - INFO - app.main - Application startup event finished.
2025-06-12 03:00:07,492 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 03:00:07,493 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 03:00:08,211 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 03:00:08,244 - INFO - app.main - Redis ping response: True
2025-06-12 03:00:11,290 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:11,291 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:16,288 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:16,289 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:21,301 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:21,301 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:26,294 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:26,295 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:31,299 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:31,301 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:36,288 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:36,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:41,290 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:41,291 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:46,268 - INFO - app.api.v1.endpoints.favorites - Direct SQL query found 3 symbols for user 1
2025-06-12 03:00:46,270 - INFO - app.api.v1.endpoints.favorites - Symbols: ['AUDCAD', 'AUDCHF', 'EURUSD']
2025-06-12 03:00:46,339 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:46,382 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:51,298 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:51,299 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:56,295 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:56,296 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:01:01,289 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:01:01,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:01:03,425 - INFO - app.main - Application shutdown event triggered.
2025-06-12 03:01:03,426 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 03:01:03,426 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 03:01:03,429 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 03:01:04,736 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 03:01:04,736 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 03:01:04,737 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 03:01:04,740 - INFO - app.main - Redis client connection closed.
2025-06-12 03:01:04,740 - INFO - app.main - Application shutdown event finished.
