2025-06-11 22:56:08,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:08,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:10,790 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:13,080 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:13,360 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:13,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:15,436 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:17,792 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:18,368 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:18,369 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:20,037 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:22,361 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:23,361 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:23,361 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:24,720 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:27,171 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:28,357 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:28,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:29,555 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:31,663 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:33,369 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-11 22:56:33,370 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-11 22:56:33,984 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-11 22:56:35,984 - INFO - app.main - Application shutdown event triggered.
2025-06-11 22:56:35,984 - INFO - app.main - APScheduler shut down gracefully.
2025-06-11 22:56:35,984 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-11 22:56:35,985 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-11 22:56:36,049 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-11 22:56:36,049 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-11 22:56:36,049 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-11 22:56:36,051 - INFO - app.main - Redis client connection closed.
2025-06-11 22:56:36,051 - INFO - app.main - Application shutdown event finished.
2025-06-12 01:58:26,434 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 01:58:26,451 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 01:58:26,456 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 01:58:26,456 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 01:58:26,991 - INFO - app.main - Application startup event triggered.
2025-06-12 01:58:27,031 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 01:58:27,031 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 01:58:27,052 - INFO - app.main - Redis client initialized successfully.
2025-06-12 01:58:27,065 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 01:58:27,111 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 01:58:27,114 - INFO - app.main - Database tables ensured/created.
2025-06-12 01:58:27,118 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 01:58:28,247 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 01:58:28,247 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMDUwNywiaWF0IjoxNzQ5NzE4NzA3fQ.9CMjUJdcguoWJvXY0RfmaaaU29y8BnIlXMRvX7ckOf4
2025-06-12 01:58:28,248 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 01:58:28,248 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 01:58:28,248 - INFO - app.main - Application startup event finished.
2025-06-12 01:58:28,248 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 01:58:28,249 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 01:58:28,863 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 01:58:28,885 - INFO - app.main - Redis ping response: True
2025-06-12 01:58:32,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:32,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:37,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:37,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:42,118 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:42,119 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:47,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:47,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:52,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:52,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:58:57,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:58:57,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:02,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:02,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:07,126 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:07,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:12,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:12,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:17,119 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:17,120 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:22,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:22,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:27,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:27,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:32,134 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:32,135 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:37,130 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:37,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:42,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:42,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:47,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:47,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:52,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:52,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 01:59:57,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 01:59:57,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:00,731 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:00:00,731 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMDYwMCwiaWF0IjoxNzQ5NzE4ODAwfQ.iqVIq7NG3oGuOd8hrC0JJ6cI8ti403EateHfyyC87UQ
2025-06-12 02:00:02,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:02,117 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:07,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:07,132 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:12,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:12,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:17,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:17,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:22,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:22,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:27,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:27,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:32,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:32,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:37,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:37,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:42,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:42,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:47,119 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:47,119 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:52,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:52,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:00:57,129 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:00:57,130 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:02,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:02,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:07,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:07,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:12,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:12,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:17,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:17,124 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:22,120 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:22,120 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:27,128 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:27,129 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:32,125 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:32,126 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:37,117 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:37,118 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:42,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:42,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:47,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:47,132 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:52,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:52,124 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:01:57,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:01:57,127 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:02,138 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:02,139 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:07,124 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:07,125 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:12,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:12,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:17,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:17,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:22,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:22,122 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:27,121 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:27,121 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:32,127 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:32,128 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:37,123 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:02:37,123 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:02:39,968 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:02:39,968 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:02:39,968 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:02:39,970 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:02:41,585 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:02:41,585 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:02:41,585 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:02:41,586 - INFO - app.main - Redis client connection closed.
2025-06-12 02:02:41,586 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:07:21,269 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:07:21,288 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:07:21,293 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:07:21,293 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:07:21,811 - INFO - app.main - Application startup event triggered.
2025-06-12 02:07:21,850 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:07:21,850 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:07:21,875 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:07:21,890 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:07:21,989 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:07:21,992 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:07:21,998 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:07:23,074 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:07:23,075 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMTA0MSwiaWF0IjoxNzQ5NzE5MjQxfQ.eBMK_NKpvU4NJlQEXA0eO5ECaGQfjrUxQTO2I70fxs4
2025-06-12 02:07:23,075 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:07:23,075 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:07:23,075 - INFO - app.main - Application startup event finished.
2025-06-12 02:07:23,076 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:07:23,077 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:07:23,805 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:07:23,823 - INFO - app.main - Redis ping response: True
2025-06-12 02:07:26,216 - ERROR - app.database.session - Database session error: Could not locate any relevant foreign key columns for primary join condition 'users.id = user_favorite_symbols.user_id AND user_favorite_symbols.user_type = :user_type_1' on relationship User.favorite_symbols.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or are annotated in the join condition with the foreign() annotation.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 838, in login_demo_user
    demo_user = await crud_user.get_demo_user_by_email(db, email=credentials.email)
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\crud\user.py", line 310, in get_demo_user_by_email
    result = await db.execute(select(DemoUser).filter(DemoUser.email == email))
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1629, in _execute_clauseelement
    compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
                                                ~~~~~~~~~~~~~~~~~~~~~^
        dialect=dialect,
        ^^^^^^^^^^^^^^^^
    ...<4 lines>...
        linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 711, in _compile_w_cache
    compiled_sql = self._compiler(
        dialect,
    ...<4 lines>...
        **kw,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 320, in _compiler
    return dialect.statement_compiler(dialect, self, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 1446, in __init__
    Compiled.__init__(self, dialect, statement, **kwargs)
    ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 886, in __init__
    self.string = self.process(self.statement, **compile_kwargs)
                  ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 932, in process
    return obj._compiler_dispatch(self, **kwargs)
           ~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\visitors.py", line 141, in _compiler_dispatch
    return meth(self, **kw)  # type: ignore  # noqa: E501
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\compiler.py", line 4728, in visit_select
    compile_state = select_stmt._compile_state_factory(
        select_stmt, self, **kwargs
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\base.py", line 687, in create_for_statement
    return klass.create_for_statement(statement, compiler, **kw)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 447, in create_for_statement
    return cls._create_orm_context(
           ~~~~~~~~~~~~~~~~~~~~~~~^
        cast("Union[Select, FromStatement]", statement),
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<2 lines>...
        **kw,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 1175, in _create_orm_context
    _QueryEntity.to_compile_state(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<2 lines>...
        is_current_entities=True,
        ^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2628, in to_compile_state
    _MapperEntity(
    ~~~~~~~~~~~~~^
        compile_state,
        ^^^^^^^^^^^^^^
    ...<2 lines>...
        is_current_entities,
        ^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 2708, in __init__
    entity._post_inspect
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\langhelpers.py", line 1338, in __get__
    obj.__dict__[self.__name__] = result = self.fget(obj)
                                           ~~~~~~~~~^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2724, in _post_inspect
    self._check_configure()
    ~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2401, in _check_configure
    _configure_registries({self.registry}, cascade=True)
    ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4214, in _configure_registries
    _do_configure_registries(registries, cascade)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 4255, in _do_configure_registries
    mapper._post_configure_properties()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\mapper.py", line 2418, in _post_configure_properties
    prop.init()
    ~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\interfaces.py", line 589, in init
    self.do_init()
    ~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1658, in do_init
    self._setup_join_conditions()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 1896, in _setup_join_conditions
    self._join_condition = jc = JoinCondition(
                                ~~~~~~~~~~~~~^
        parent_persist_selectable=self.parent.persist_selectable,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<14 lines>...
        can_be_synced_fn=self._columns_are_mapped,
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2331, in __init__
    self._check_foreign_cols(self.primaryjoin, True)
    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\relationships.py", line 2971, in _check_foreign_cols
    raise sa_exc.ArgumentError(err)
sqlalchemy.exc.ArgumentError: Could not locate any relevant foreign key columns for primary join condition 'users.id = user_favorite_symbols.user_id AND user_favorite_symbols.user_type = :user_type_1' on relationship User.favorite_symbols.  Ensure that referencing columns are associated with a ForeignKey or ForeignKeyConstraint, or are annotated in the join condition with the foreign() annotation.
2025-06-12 02:07:26,998 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:26,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:32,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:32,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:36,998 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:36,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:42,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:42,008 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:47,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:47,003 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:52,003 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:52,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:07:57,009 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:07:57,010 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:01,997 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:01,998 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:07,001 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:07,002 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:12,010 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:12,011 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:17,001 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:17,002 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:21,999 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:21,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:27,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:27,001 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:32,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:32,001 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:37,011 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:37,012 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:41,999 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:42,000 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:47,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:47,008 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:52,005 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:52,006 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:08:57,012 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:08:57,013 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:02,004 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:02,005 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:07,006 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:07,007 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:12,000 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:12,000 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:17,007 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:17,007 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:22,002 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:22,004 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:27,002 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:09:27,003 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:09:30,864 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:09:30,865 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:09:30,865 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:09:30,866 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:09:32,100 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:09:32,101 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:09:32,101 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:09:32,104 - INFO - app.main - Redis client connection closed.
2025-06-12 02:09:32,104 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:21:14,241 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:21:14,269 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:21:14,277 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:21:14,277 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:21:14,877 - INFO - app.main - Application startup event triggered.
2025-06-12 02:21:14,914 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:21:14,915 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:21:14,935 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:21:14,955 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:21:15,019 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:21:15,025 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:21:15,032 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:21:16,085 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:21:16,085 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMTg3NSwiaWF0IjoxNzQ5NzIwMDc1fQ.2Z5Uk5O2wuae5yPr0e4pzpV5GDqLjg4FV1BhV0UBtWg
2025-06-12 02:21:16,086 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:21:16,086 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:21:16,086 - INFO - app.main - Application startup event finished.
2025-06-12 02:21:16,087 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:21:16,088 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:21:16,819 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:21:16,833 - INFO - app.main - Redis ping response: True
2025-06-12 02:21:20,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:20,036 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:21,512 - ERROR - app.database.session - Database session error: 401: Invalid email or password for demo user
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 845, in login_demo_user
    raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid email or password for demo user
2025-06-12 02:21:25,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:25,029 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:30,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:30,030 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:35,034 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:35,035 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:40,036 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:40,037 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:45,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:45,030 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:50,042 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:50,043 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:21:55,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:21:55,036 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:00,035 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:00,035 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:05,041 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:05,042 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:10,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:10,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:15,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:15,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:20,043 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:20,044 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:25,040 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:25,041 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:30,043 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:22:30,043 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:22:33,247 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:22:33,247 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:22:33,247 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:22:33,250 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:22:34,837 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:22:34,837 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:22:34,837 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:22:34,838 - INFO - app.main - Redis client connection closed.
2025-06-12 02:22:34,838 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:23:54,663 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:23:54,686 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:23:54,692 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:23:54,693 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:23:55,371 - INFO - app.main - Application startup event triggered.
2025-06-12 02:23:55,410 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:23:55,410 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:23:55,441 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:23:55,492 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:23:55,563 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:23:55,566 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:23:55,571 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:23:56,751 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:23:56,751 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjAzNSwiaWF0IjoxNzQ5NzIwMjM1fQ.ELpsQuwnuO7AnLcsBrw5rgops3VzGU23CMRDdOS5Ea8
2025-06-12 02:23:56,751 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:23:56,752 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:23:56,752 - INFO - app.main - Application startup event finished.
2025-06-12 02:23:56,752 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:23:56,753 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:23:57,464 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:23:57,477 - INFO - app.main - Redis ping response: True
2025-06-12 02:24:00,576 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:24:00,577 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:24:05,575 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:24:05,576 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:24:08,934 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:24:08,935 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:24:08,935 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:24:08,936 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:24:09,144 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:24:09,144 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:24:09,145 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:24:09,147 - INFO - app.main - Redis client connection closed.
2025-06-12 02:24:09,147 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:24:10,540 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:10,556 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:10,562 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:10,562 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:21,888 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:21,907 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:21,913 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:21,913 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:42,781 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:42,830 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:42,843 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:42,843 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:24:44,817 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:24:44,836 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:24:44,841 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:24:44,842 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:25:24,090 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:25:24,108 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:25:24,113 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:25:24,113 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:25:53,811 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:25:53,828 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:25:53,833 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:25:53,833 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:10,946 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:10,974 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:10,983 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:10,983 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:29,996 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:30,030 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:30,038 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:30,038 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:34,509 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:34,540 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:34,547 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:34,547 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:51,848 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:51,877 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:51,878 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:51,885 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:51,885 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:51,899 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:51,905 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:51,906 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:54,063 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:54,077 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:26:54,080 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:54,085 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:54,085 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:26:54,094 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:26:54,100 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:26:54,100 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:21,296 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:21,301 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:21,315 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:21,318 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:21,320 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:21,320 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:21,324 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:21,324 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:58,784 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:58,805 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:27:58,805 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:58,811 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:58,811 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:27:58,824 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:27:58,830 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:27:58,830 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:13,526 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:28:13,539 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:28:13,546 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:28:13,552 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:28:13,552 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:13,561 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:28:13,569 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:28:13,569 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:28:14,067 - INFO - app.main - Application startup event triggered.
2025-06-12 02:28:14,070 - INFO - app.main - Application startup event triggered.
2025-06-12 02:28:14,103 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:28:14,103 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:28:14,104 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:28:14,104 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:28:14,121 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:28:14,163 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:28:14,175 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:28:14,196 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:28:14,226 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:28:14,229 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:28:14,235 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:28:14,252 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:28:14,255 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:28:14,262 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:28:15,405 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:28:15,405 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjI5NCwiaWF0IjoxNzQ5NzIwNDk0fQ.IBvKOLuSlw0I4EoBNi_NwB2TSulkoxBSvPZ_vfNSqQA
2025-06-12 02:28:15,406 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjI5NCwiaWF0IjoxNzQ5NzIwNDk0fQ.IBvKOLuSlw0I4EoBNi_NwB2TSulkoxBSvPZ_vfNSqQA
2025-06-12 02:28:15,406 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Application startup event finished.
2025-06-12 02:28:15,406 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:28:15,406 - INFO - app.main - Application startup event finished.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:28:15,406 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:28:16,124 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:16,125 - INFO - app.main - Redis ping response: True
2025-06-12 02:28:16,137 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:28:16,151 - INFO - app.main - Redis ping response: True
2025-06-12 02:28:19,239 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:19,240 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:19,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:19,270 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:24,245 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:24,247 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:24,271 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:24,272 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:29,245 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:29,246 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:29,259 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:29,260 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:34,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:34,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:34,263 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:34,266 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:38,338 - ERROR - app.database.session - Database session error: (pymysql.err.OperationalError) (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")
[SQL: SELECT user_favorite_symbols.id, user_favorite_symbols.user_id, user_favorite_symbols.symbol_id, user_favorite_symbols.user_type, user_favorite_symbols.created_at, user_favorite_symbols.updated_at 
FROM user_favorite_symbols 
WHERE user_favorite_symbols.user_id = %s AND user_favorite_symbols.symbol_id = %s AND user_favorite_symbols.user_type = %s]
[parameters: (1, 23, 'demo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
pymysql.err.OperationalError: (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\favorites.py", line 55, in add_to_favorites
    user_favorite = await crud_favorites.add_favorite_symbol(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<5 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\app\crud\favorites.py", line 42, in add_favorite_symbol
    result = await db.execute(query)
             ^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\ext\asyncio\session.py", line 463, in execute
    result = await greenlet_spawn(
             ^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 201, in greenlet_spawn
    result = context.throw(*sys.exc_info())
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2365, in execute
    return self._execute_internal(
           ~~~~~~~~~~~~~~~~~~~~~~^
        statement,
        ^^^^^^^^^^
    ...<4 lines>...
        _add_event=_add_event,
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                          ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self,
        ^^^^^
    ...<4 lines>...
        conn,
        ^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\orm\context.py", line 306, in orm_execute_statement
    result = conn.execute(
        statement, params or {}, execution_options=execution_options
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1415, in execute
    return meth(
        self,
        distilled_parameters,
        execution_options or NO_OPTIONS,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\sql\elements.py", line 523, in _execute_on_connection
    return connection._execute_clauseelement(
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        self, distilled_params, execution_options
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1637, in _execute_clauseelement
    ret = self._execute_context(
        dialect,
    ...<8 lines>...
        cache_hit=cache_hit,
    )
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1842, in _execute_context
    return self._exec_single_context(
           ~~~~~~~~~~~~~~~~~~~~~~~~~^
        dialect, context, statement, parameters
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1982, in _exec_single_context
    self._handle_dbapi_exception(
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~^
        e, str_statement, effective_parameters, cursor, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 2351, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\base.py", line 1963, in _exec_single_context
    self.dialect.do_execute(
    ~~~~~~~~~~~~~~~~~~~~~~~^
        cursor, str_statement, effective_parameters, context
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\engine\default.py", line 943, in do_execute
    cursor.execute(statement, parameters)
    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 97, in execute
    return self.await_(self._execute_async(operation, parameters))
           ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           ~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\util\_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
            ^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\sqlalchemy\dialects\mysql\aiomysql.py", line 106, in _execute_async
    result = await self._cursor.execute(operation, parameters)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 239, in execute
    await self._query(query)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\cursors.py", line 457, in _query
    await conn.query(q)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 469, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 683, in _read_query_result
    await result.read()
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 1164, in read
    first_packet = await self.connection._read_packet()
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\aiomysql\connection.py", line 652, in _read_packet
    packet.raise_for_error()
    ~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\protocol.py", line 219, in raise_for_error
    err.raise_mysql_exception(self._data)
    ~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pymysql\err.py", line 150, in raise_mysql_exception
    raise errorclass(errno, errval)
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (1054, "Unknown column 'user_favorite_symbols.updated_at' in 'field list'")
[SQL: SELECT user_favorite_symbols.id, user_favorite_symbols.user_id, user_favorite_symbols.symbol_id, user_favorite_symbols.user_type, user_favorite_symbols.created_at, user_favorite_symbols.updated_at 
FROM user_favorite_symbols 
WHERE user_favorite_symbols.user_id = %s AND user_favorite_symbols.symbol_id = %s AND user_favorite_symbols.user_type = %s]
[parameters: (1, 23, 'demo')]
(Background on this error at: https://sqlalche.me/e/20/e3q8)
2025-06-12 02:28:39,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:39,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:39,261 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:39,263 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:44,247 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:44,248 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:44,264 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:44,265 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:49,252 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:49,253 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:49,262 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:49,263 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:54,234 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:54,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:54,264 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:54,265 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:59,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:59,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:28:59,269 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:28:59,270 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:04,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:04,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:04,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:04,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:09,240 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:09,241 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:09,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:09,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:14,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:14,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:14,266 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:14,267 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:19,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:19,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:19,268 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:19,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:24,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:24,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:24,265 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:24,266 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:29,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:29,239 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:29,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:29,268 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:34,238 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:34,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:39,237 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:39,237 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:43,320 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:29:43,320 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:29:43,320 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:29:43,322 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:29:45,023 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:29:45,023 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:29:45,024 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:29:45,024 - INFO - app.main - Redis client connection closed.
2025-06-12 02:29:45,025 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:29:46,691 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:29:46,713 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:29:46,719 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:29:46,720 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:29:47,249 - INFO - app.main - Application startup event triggered.
2025-06-12 02:29:47,283 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:29:47,284 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:29:47,324 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:29:47,374 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:29:47,437 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:29:47,440 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:29:47,446 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:29:48,703 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:29:48,704 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjM4NywiaWF0IjoxNzQ5NzIwNTg3fQ.yjyoZyAqazTebfVdvkTGHkCwzmy0uykljDX-mT2iUyM
2025-06-12 02:29:48,704 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:29:48,704 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:29:48,704 - INFO - app.main - Application startup event finished.
2025-06-12 02:29:48,704 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:29:48,705 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:29:49,318 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:29:49,345 - INFO - app.main - Redis ping response: True
2025-06-12 02:29:52,446 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:52,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:29:57,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:29:57,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:00,367 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:30:00,367 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjQwMCwiaWF0IjoxNzQ5NzIwNjAwfQ.0FpSnf5y6iVsl0XcYZdQY0eS1J0YkOCvseIzPJmFqEo
2025-06-12 02:30:02,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:02,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:07,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:07,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:12,457 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:12,459 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:17,448 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:17,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:22,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:22,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:27,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:27,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:32,458 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:32,459 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:37,445 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:37,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:42,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:42,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:47,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:47,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:52,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:52,455 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:30:57,450 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:30:57,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:02,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:02,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:07,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:07,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:12,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:12,451 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:17,445 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:17,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:22,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:22,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:27,448 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:27,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:32,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:32,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:37,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:37,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:42,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:42,454 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:47,450 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:47,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:52,456 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:52,457 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:31:57,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:31:57,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:02,444 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:02,444 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:07,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:07,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:12,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:12,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:17,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:17,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:22,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:22,447 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:27,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:27,450 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:32,447 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:32,448 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:37,088 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:32:37,088 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:32:37,088 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:32:37,090 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:32:38,061 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:32:38,062 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:32:38,062 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:32:38,063 - INFO - app.main - Redis client connection closed.
2025-06-12 02:32:38,063 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:32:39,779 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:32:39,800 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:32:39,805 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:32:39,806 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:32:40,475 - INFO - app.main - Application startup event triggered.
2025-06-12 02:32:40,510 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:32:40,511 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:32:40,538 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:32:40,584 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:32:40,875 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:32:40,877 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:32:40,882 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:32:42,050 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:32:42,051 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU2MCwiaWF0IjoxNzQ5NzIwNzYwfQ._o__xcpRoE7N5hk2g-yUu5Pfp54-y70av-1NRpOdVj0
2025-06-12 02:32:42,051 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:32:42,051 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:32:42,051 - INFO - app.main - Application startup event finished.
2025-06-12 02:32:42,051 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:32:42,052 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:32:42,769 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:32:42,771 - INFO - app.main - Redis ping response: True
2025-06-12 02:32:45,884 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:45,885 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:50,884 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:50,886 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:32:55,888 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:32:55,888 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:00,894 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:00,895 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:01,237 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:01,237 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:01,238 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:01,241 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:03,457 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:03,457 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:03,457 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:03,458 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:03,458 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:05,310 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:05,329 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:05,334 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:05,334 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:06,106 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:06,142 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:06,143 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:06,165 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:06,181 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:06,263 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:06,267 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:06,275 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:07,446 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:07,446 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU4NiwiaWF0IjoxNzQ5NzIwNzg2fQ.c5pnoELrKRhfFsKnRkDCviYDVBYBrqa2F6mVmby5BgA
2025-06-12 02:33:07,446 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:07,446 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:07,446 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:07,447 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:07,447 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:08,174 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:08,196 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:08,200 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:10,288 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:10,288 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:10,289 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:10,289 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:10,289 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:10,293 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:10,293 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:13,723 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:13,744 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:13,750 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:13,750 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:14,521 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:14,554 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:14,554 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:14,589 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:14,611 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:14,677 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:14,679 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:14,685 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:15,740 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:15,741 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU5NCwiaWF0IjoxNzQ5NzIwNzk0fQ.m03JzG-2biLaaxDW-bfWcAVvBKoar1rp-1vMHDCIenE
2025-06-12 02:33:15,741 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:15,741 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:15,741 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:15,742 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:15,742 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:16,485 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:16,488 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:16,490 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:16,490 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:16,491 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:16,491 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:17,075 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:17,075 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:17,076 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:17,076 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:17,076 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:18,938 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:18,965 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:18,970 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:18,970 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:19,519 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:19,563 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:19,563 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:19,588 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:19,602 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:19,659 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:19,660 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:19,664 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:20,759 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:20,759 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjU5OSwiaWF0IjoxNzQ5NzIwNzk5fQ.9nqx7pYPLmV1h55zVjesUCL1ifl4QXsnjBgaUSkBo5Y
2025-06-12 02:33:20,759 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:20,759 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:20,759 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:20,760 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:20,760 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:21,495 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:21,499 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:21,501 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:21,886 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:21,886 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:21,886 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:21,886 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:21,886 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:21,887 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:21,887 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:24,019 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:24,052 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:24,059 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:24,060 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:24,829 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:24,880 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:24,880 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:24,901 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:24,921 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:25,009 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:25,011 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:25,016 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:26,099 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:26,099 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYwNSwiaWF0IjoxNzQ5NzIwODA1fQ.HM81ZfwVAT1vg1l2s4AegR0DROWHIAd3SMB543-Gi9s
2025-06-12 02:33:26,099 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:26,099 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:26,099 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:26,100 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:26,100 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:26,717 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:26,730 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:27,276 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:27,295 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:27,302 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:27,303 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:28,008 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:28,046 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:28,046 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:28,067 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:28,081 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:28,172 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:28,175 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:28,183 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:29,209 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:29,209 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYwOCwiaWF0IjoxNzQ5NzIwODA4fQ.KTIu9NmYSsOkPsh5L7Vbo9tWqOtsD7xz4DC_5Q6n7iQ
2025-06-12 02:33:29,209 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:29,209 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:29,209 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:29,210 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:29,210 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:29,819 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:29,820 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:29,820 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:29,821 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:29,874 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:29,892 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:30,900 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:30,900 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:30,900 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:30,902 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:30,903 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:33,185 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:33,187 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:36,062 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:33:36,063 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:33:36,063 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:33:36,063 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:33:37,861 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:33:37,862 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:33:37,862 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:33:37,864 - INFO - app.main - Redis client connection closed.
2025-06-12 02:33:37,865 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:33:39,412 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:33:39,430 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:33:39,436 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:33:39,436 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:33:39,969 - INFO - app.main - Application startup event triggered.
2025-06-12 02:33:40,009 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:33:40,009 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:33:40,038 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:33:40,058 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:33:40,121 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:33:40,125 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:33:40,132 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:33:41,038 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:33:41,039 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjYyMCwiaWF0IjoxNzQ5NzIwODIwfQ.P96-d69eoTQqXX4cLbB9-TDyoU6FfBD-NSxbdIg-wLs
2025-06-12 02:33:41,039 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:33:41,040 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:33:41,040 - INFO - app.main - Application startup event finished.
2025-06-12 02:33:41,041 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:41,042 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:33:41,765 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:33:41,785 - INFO - app.main - Redis ping response: True
2025-06-12 02:33:45,133 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:45,134 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:50,139 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:50,140 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:33:55,131 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:33:55,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:00,130 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:00,131 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:05,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:05,136 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:10,133 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:10,134 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:15,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:15,137 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:20,135 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:20,136 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:25,142 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:25,143 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:29,617 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:34:29,618 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:34:29,618 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:34:29,619 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:34:30,816 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:34:30,816 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:34:30,817 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:34:30,819 - INFO - app.main - Redis client connection closed.
2025-06-12 02:34:30,820 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:34:32,437 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:34:32,457 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:34:32,462 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:34:32,462 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:34:33,040 - INFO - app.main - Application startup event triggered.
2025-06-12 02:34:33,075 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:34:33,075 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:34:33,103 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:34:33,144 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:34:33,223 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:34:33,225 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:34:33,234 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:34:34,379 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:34:34,380 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjY3MywiaWF0IjoxNzQ5NzIwODczfQ.ZG6ovkxS8h-zYOkoYRP54V74O1dfYvk6MFw06kOPfPU
2025-06-12 02:34:34,380 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:34:34,380 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:34:34,380 - INFO - app.main - Application startup event finished.
2025-06-12 02:34:34,381 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:34:34,381 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:34:35,041 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:34:35,064 - INFO - app.main - Redis ping response: True
2025-06-12 02:34:37,198 - ERROR - app.database.session - Database session error: 401: Invalid email, user type, or password
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\users.py", line 237, in login_with_user_type
    raise HTTPException(
    ...<3 lines>...
    )
fastapi.exceptions.HTTPException: 401: Invalid email, user type, or password
2025-06-12 02:34:38,231 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:38,233 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:43,242 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:43,242 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:48,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:48,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:53,236 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:53,236 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:34:58,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:34:58,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:03,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:03,234 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:08,233 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:08,238 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:13,230 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:13,231 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:13,368 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:13,369 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:13,369 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:13,370 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:15,042 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:15,043 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:15,043 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:15,048 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:15,048 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:16,806 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:16,823 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:16,828 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:16,828 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:17,380 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:17,419 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:17,419 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:17,441 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:17,469 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:17,516 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:17,517 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:17,522 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:18,414 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:18,414 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjcxNywiaWF0IjoxNzQ5NzIwOTE3fQ.Sy1YiN0Irec31rQWDwP_V0nezibuECuw_NRJ6HJcJD8
2025-06-12 02:35:18,414 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:18,414 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:18,414 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:18,415 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:18,415 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:19,043 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:19,051 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:19,054 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:19,055 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:19,055 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:19,055 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:19,668 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:19,668 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:19,669 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:19,670 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:19,671 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:21,947 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:21,981 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:21,989 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:21,989 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:22,735 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:22,771 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:22,771 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:22,796 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:22,816 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:22,880 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:22,883 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:22,888 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:23,920 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:23,921 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjcyMiwiaWF0IjoxNzQ5NzIwOTIyfQ.cv5In8Z0swCRsHMy_3SuNtptSOwTeu1ySwtmMTy0Sj8
2025-06-12 02:35:23,921 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:23,921 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:23,921 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:23,921 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:23,922 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:24,563 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:24,579 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:27,889 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:27,889 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:30,389 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:30,389 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:30,389 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:30,390 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:31,120 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:31,120 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:31,120 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:31,122 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:31,122 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:32,566 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:32,584 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:32,590 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:32,590 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:33,088 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:33,123 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:33,123 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:33,150 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:33,197 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:33,258 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:33,263 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:33,270 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:34,271 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:34,271 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjczMywiaWF0IjoxNzQ5NzIwOTMzfQ.GC3ejqcEL5voefLi6sWVSiEUUhjoOYE0Y1poYXtoN9s
2025-06-12 02:35:34,271 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:34,272 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:34,272 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:34,273 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:34,274 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:35,011 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:35,021 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:38,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:38,269 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:43,267 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:43,268 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:48,272 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:35:48,273 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:35:51,168 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:51,169 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:51,169 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:51,170 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:51,698 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:51,699 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:51,699 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:51,703 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:51,703 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:35:54,475 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:35:54,496 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:35:54,502 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:35:54,502 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:35:55,104 - INFO - app.main - Application startup event triggered.
2025-06-12 02:35:55,143 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:35:55,144 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:35:55,169 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:35:55,189 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:35:55,257 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:35:55,261 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:35:55,269 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:35:56,505 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:35:56,505 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc1NSwiaWF0IjoxNzQ5NzIwOTU1fQ.4RG7Av1VCrrA8ZV7AXy8kdRSTaKnTDrvB8RBJqsRZFU
2025-06-12 02:35:56,505 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:35:56,505 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:35:56,505 - INFO - app.main - Application startup event finished.
2025-06-12 02:35:56,506 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:56,506 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:35:57,227 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:35:57,248 - INFO - app.main - Redis ping response: True
2025-06-12 02:35:57,250 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:35:57,250 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:35:57,250 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:35:57,250 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:35:58,531 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:35:58,531 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:35:58,532 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:35:58,533 - INFO - app.main - Redis client connection closed.
2025-06-12 02:35:58,533 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:00,620 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:00,651 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:00,658 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:00,658 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:01,476 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:01,512 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:01,512 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:01,544 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:01,569 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:01,650 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:01,652 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:01,655 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:02,650 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:02,650 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc2MSwiaWF0IjoxNzQ5NzIwOTYxfQ.L2dMzOiWQdIvxBrXlSskxqYCXKUBvkJr4UIi4wIT5mI
2025-06-12 02:36:02,650 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:02,650 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:02,650 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:02,651 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:02,651 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:03,469 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:03,470 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:05,573 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:36:05,574 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:36:05,574 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:36:05,575 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:36:07,681 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:36:07,681 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:36:07,681 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:36:07,683 - INFO - app.main - Redis client connection closed.
2025-06-12 02:36:07,683 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:11,114 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:11,141 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:11,150 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:11,150 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:11,775 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:11,810 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:11,811 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:11,839 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:11,860 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:11,936 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:11,942 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:11,951 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:12,992 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:12,993 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjc3MSwiaWF0IjoxNzQ5NzIwOTcxfQ.oPnddURhxuBGiF01PeJEUHV5b4D5f47TKsMFn2GKpHQ
2025-06-12 02:36:12,993 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:12,993 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:12,993 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:12,994 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:12,994 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:13,627 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:13,644 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:16,955 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:16,956 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:21,958 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:21,958 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:26,956 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:26,957 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:31,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:31,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:36,950 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:36,951 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:36:37,753 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:36:37,753 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:36:37,753 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:36:37,754 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:36:39,925 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:36:39,925 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:36:39,926 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:36:39,927 - INFO - app.main - Redis client connection closed.
2025-06-12 02:36:39,927 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:36:41,855 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:41,878 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:41,885 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:41,885 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:51,245 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:36:51,264 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:36:51,269 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:36:51,269 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:36:51,875 - INFO - app.main - Application startup event triggered.
2025-06-12 02:36:51,917 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:36:51,917 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:36:51,943 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:36:51,993 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:36:52,050 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:36:52,054 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:36:52,060 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:36:53,342 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:36:53,342 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjgxMiwiaWF0IjoxNzQ5NzIxMDEyfQ.vQg0uib20gft2lqrA1TAve36dpdcTSfY5eCq9B2U7IA
2025-06-12 02:36:53,342 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:36:53,342 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:36:53,342 - INFO - app.main - Application startup event finished.
2025-06-12 02:36:53,343 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:53,344 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:36:54,034 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:36:54,048 - INFO - app.main - Redis ping response: True
2025-06-12 02:36:57,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:36:57,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:02,061 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:02,061 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:07,071 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:07,072 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:09,817 - ERROR - app.database.session - Database session error: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}

2025-06-12 02:37:12,066 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:12,067 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:17,068 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:17,069 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:22,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:22,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:27,069 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:27,070 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:32,061 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:32,062 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:37,058 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:37,059 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:42,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:42,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:47,073 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:47,074 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:52,064 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:52,065 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:37:57,066 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:37:57,067 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:02,071 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:02,072 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:07,060 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:07,061 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:08,886 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:38:08,886 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:38:08,886 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:38:08,889 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:38:09,116 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:38:09,116 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:38:09,117 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:38:09,118 - INFO - app.main - Redis client connection closed.
2025-06-12 02:38:09,119 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:38:13,001 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:38:13,019 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:38:13,025 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:38:13,025 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:38:13,586 - INFO - app.main - Application startup event triggered.
2025-06-12 02:38:13,622 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:38:13,622 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:38:13,643 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:38:13,691 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:38:13,755 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:38:13,758 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:38:13,763 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:38:14,947 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:38:14,947 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMjg5MywiaWF0IjoxNzQ5NzIxMDkzfQ.CRs0kgKcpFnDArC5I8WIzJGCQPNDZZb_u1AgIhJghks
2025-06-12 02:38:14,947 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:38:14,947 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:38:14,947 - INFO - app.main - Application startup event finished.
2025-06-12 02:38:14,948 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:38:14,948 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:38:15,563 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:38:15,564 - INFO - app.main - Redis ping response: True
2025-06-12 02:38:18,765 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:38:18,767 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:38:19,939 - ERROR - app.database.session - Database session error: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<9 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
        errors=_normalize_errors(errors), body=response_content
    )
fastapi.exceptions.ResponseValidationError: 2 validation errors:
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'created_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}
  {'type': 'datetime_from_date_parsing', 'loc': ('response', 'favorites', 0, 'updated_at'), 'msg': 'Input should be a valid datetime or date, month value is outside expected range of 1-12', 'input': '0000-00-00 00:00:00', 'ctx': {'error': 'month value is outside expected range of 1-12'}}

2025-06-12 02:38:22,296 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:38:22,297 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:38:22,297 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:38:22,307 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:38:22,837 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:38:22,837 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:38:22,838 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:38:22,839 - INFO - app.main - Redis client connection closed.
2025-06-12 02:38:22,839 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:40:51,529 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:40:51,547 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:40:51,553 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:40:51,553 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:40:52,148 - INFO - app.main - Application startup event triggered.
2025-06-12 02:40:52,194 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:40:52,194 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:40:52,224 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:40:52,245 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:40:52,294 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:40:52,296 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:40:52,299 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:40:53,362 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:40:53,362 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzA1MiwiaWF0IjoxNzQ5NzIxMjUyfQ.s1ekZuA1tO1N_F-fKWALTz8qQfvij9pjb95ivXaYNeg
2025-06-12 02:40:53,362 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:40:53,362 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:40:53,362 - INFO - app.main - Application startup event finished.
2025-06-12 02:40:53,362 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:53,362 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:40:54,090 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:54,105 - INFO - app.main - Redis ping response: True
2025-06-12 02:40:54,107 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:40:54,487 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:40:54,487 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:40:54,488 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:40:54,488 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:40:54,488 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:40:54,489 - INFO - app.main - Redis client connection closed.
2025-06-12 02:40:54,489 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:40:56,158 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:40:56,175 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:40:56,181 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:40:56,181 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:40:56,748 - INFO - app.main - Application startup event triggered.
2025-06-12 02:40:56,797 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:40:56,797 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:40:56,817 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:40:56,849 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:40:56,933 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:40:56,937 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:40:56,946 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:40:57,944 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:40:57,944 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzA1NiwiaWF0IjoxNzQ5NzIxMjU2fQ.mltEWzfwHBASSkxmZufQVLjtkIafkpo7Q4EMLvgNA4E
2025-06-12 02:40:57,944 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:40:57,944 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:40:57,944 - INFO - app.main - Application startup event finished.
2025-06-12 02:40:57,945 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:57,945 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:40:58,599 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:40:58,615 - INFO - app.main - Redis ping response: True
2025-06-12 02:41:01,948 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:01,949 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:06,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:06,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:11,957 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:11,959 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:16,947 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:16,948 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:21,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:21,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:26,945 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:26,946 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:31,942 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:31,943 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:36,953 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:36,954 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:41,944 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:41,945 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:46,954 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:46,955 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:51,944 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:51,945 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:41:56,954 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:41:56,955 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:01,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:01,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:06,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:06,953 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:11,955 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:11,956 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:16,951 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:16,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:21,964 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:21,965 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:26,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:26,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:31,951 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:31,952 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:36,947 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:36,948 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:41,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:41,949 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:46,949 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:42:46,950 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:42:50,930 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:42:50,931 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:42:50,931 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:42:50,933 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:42:52,379 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:42:52,379 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:42:52,379 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:42:52,380 - INFO - app.main - Redis client connection closed.
2025-06-12 02:42:52,380 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:47:05,677 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:47:05,695 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:47:05,700 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:47:05,700 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:47:06,276 - INFO - app.main - Application startup event triggered.
2025-06-12 02:47:06,312 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:47:06,312 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:47:06,335 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:47:06,349 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:47:06,409 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:47:06,411 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:47:06,417 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:47:07,522 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:47:07,522 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzQyNiwiaWF0IjoxNzQ5NzIxNjI2fQ.I86uZGBOsf9hur9DJVjJjjf9VCeQWzUaV4tcxT3kclg
2025-06-12 02:47:07,522 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:47:07,522 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:47:07,522 - INFO - app.main - Application startup event finished.
2025-06-12 02:47:07,523 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:47:07,523 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:47:08,140 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:47:08,159 - INFO - app.main - Redis ping response: True
2025-06-12 02:47:11,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:11,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:16,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:16,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:21,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:21,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:26,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:26,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:31,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:31,424 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:36,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:36,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:41,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:41,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:46,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:46,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:51,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:51,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:47:56,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:47:56,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:01,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:01,424 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:06,429 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:06,430 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:11,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:11,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:16,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:16,417 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:21,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:21,430 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:26,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:26,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:31,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:31,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:36,419 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:36,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:41,430 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:41,431 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:46,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:46,423 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:51,424 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:51,425 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:48:56,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:48:56,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:01,426 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:01,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:06,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:06,417 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:11,429 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:11,429 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:16,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:16,426 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:21,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:21,419 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:26,422 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:26,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:31,418 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:31,420 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:36,416 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:36,416 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:41,421 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:41,422 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:46,425 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:49:46,427 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:49:48,629 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:49:48,629 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:49:48,629 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:49:48,632 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:49:50,447 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:49:50,448 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:49:50,448 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:49:50,450 - INFO - app.main - Redis client connection closed.
2025-06-12 02:49:50,450 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:51:54,703 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:51:54,741 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:51:54,754 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:51:54,755 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:51:55,715 - INFO - app.main - Application startup event triggered.
2025-06-12 02:51:55,804 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:51:55,804 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:51:55,844 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:51:55,919 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:51:56,061 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:51:56,066 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:51:56,079 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:51:57,213 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:51:57,214 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyMzcxNiwiaWF0IjoxNzQ5NzIxOTE2fQ.7Aqz9VJlLdWefRh8XMYZUxsLMJWX3eNH6TV2Y-GwmGU
2025-06-12 02:51:57,214 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:51:57,214 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:51:57,214 - INFO - app.main - Application startup event finished.
2025-06-12 02:51:57,215 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:51:57,216 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:51:58,008 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:51:58,010 - INFO - app.main - Redis ping response: True
2025-06-12 02:52:01,083 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:01,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:06,084 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:06,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:11,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:11,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:16,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:16,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:21,072 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:21,073 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:26,083 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:26,084 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:31,076 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:31,076 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:36,081 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:36,082 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:41,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:41,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:46,094 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:46,095 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:51,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:51,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:52:56,087 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:52:56,088 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:01,074 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:01,075 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:06,080 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:06,080 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:11,073 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:53:11,074 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:53:15,336 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:53:15,336 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:53:15,336 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:53:15,340 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:53:16,363 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:53:16,364 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:53:16,364 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:53:16,365 - INFO - app.main - Redis client connection closed.
2025-06-12 02:53:16,365 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:57:26,414 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:57:26,448 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:57:26,459 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:57:26,459 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:57:27,375 - INFO - app.main - Application startup event triggered.
2025-06-12 02:57:27,480 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:57:27,480 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:57:27,517 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:57:27,536 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:57:27,604 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:57:27,606 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:57:27,610 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:57:28,878 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:57:28,878 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDA0NywiaWF0IjoxNzQ5NzIyMjQ3fQ.hD4vh_Y7rONl4B6OhBy9EbiybI80L6DhR1OT9WbKRxk
2025-06-12 02:57:28,879 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:57:28,879 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:57:28,879 - INFO - app.main - Application startup event finished.
2025-06-12 02:57:28,879 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:57:28,880 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:57:29,524 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:57:29,547 - INFO - app.main - Redis ping response: True
2025-06-12 02:57:32,612 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:32,612 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:33,072 - INFO - app.api.v1.endpoints.favorites - Direct SQL query found 3 symbols for user 1
2025-06-12 02:57:33,072 - INFO - app.api.v1.endpoints.favorites - Symbols: ['AUDCAD', 'AUDCHF', 'EURUSD']
2025-06-12 02:57:37,611 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:37,612 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:42,615 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:42,617 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:47,615 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:47,616 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:52,617 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:52,618 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:57:57,613 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:57:57,614 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:02,609 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:02,610 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:07,618 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:07,619 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:12,612 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 02:58:12,613 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 02:58:14,440 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:58:14,440 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:58:14,440 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:58:14,443 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:58:16,190 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:58:16,190 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:58:16,191 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 02:58:16,196 - INFO - app.main - Redis client connection closed.
2025-06-12 02:58:16,197 - INFO - app.main - Application shutdown event finished.
2025-06-12 02:58:18,845 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 02:58:18,889 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 02:58:18,901 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 02:58:18,901 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 02:58:19,839 - INFO - app.main - Application startup event triggered.
2025-06-12 02:58:19,897 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 02:58:19,897 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 02:58:19,925 - INFO - app.main - Redis client initialized successfully.
2025-06-12 02:58:19,989 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 02:58:20,105 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 02:58:20,108 - INFO - app.main - Database tables ensured/created.
2025-06-12 02:58:20,114 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 02:58:21,100 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 02:58:21,101 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDEwMCwiaWF0IjoxNzQ5NzIyMzAwfQ._dgGJmAqNzJLDW1QaV-TyRnLHbtrxsEMFinP4FsGaYM
2025-06-12 02:58:21,101 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 02:58:21,101 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 02:58:21,101 - INFO - app.main - Application startup event finished.
2025-06-12 02:58:21,102 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:58:21,102 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 02:58:21,937 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 02:58:21,953 - INFO - app.main - Redis ping response: True
2025-06-12 02:58:21,956 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 02:58:23,057 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 02:58:23,066 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 02:58:23,067 - INFO - app.main - Application shutdown event triggered.
2025-06-12 02:58:23,067 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 02:58:23,068 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 02:58:23,071 - INFO - app.main - Redis client connection closed.
2025-06-12 02:58:23,071 - INFO - app.main - Application shutdown event finished.
2025-06-12 03:00:05,160 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 03:00:05,186 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 03:00:05,194 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 03:00:05,194 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 03:00:06,049 - INFO - app.main - Application startup event triggered.
2025-06-12 03:00:06,119 - INFO - app.main - Firebase Admin SDK already initialized.
2025-06-12 03:00:06,119 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 03:00:06,147 - INFO - app.main - Redis client initialized successfully.
2025-06-12 03:00:06,179 - INFO - app.database.session - Running Base.metadata.create_all...
2025-06-12 03:00:06,278 - INFO - app.database.session - Base.metadata.create_all finished.
2025-06-12 03:00:06,282 - INFO - app.main - Database tables ensured/created.
2025-06-12 03:00:06,292 - INFO - app.main - APScheduler started with jobs for daily swap, JWT rotation, and dynamic portfolio updates.
2025-06-12 03:00:07,491 - INFO - app.main - Service account JWT pushed to Firebase.
2025-06-12 03:00:07,491 - INFO - app.main - Generated service account JWT: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJzZXJ2aWNlIiwic2VydmljZV9uYW1lIjoicHl0aG9uX2JyaWRnZSIsImV4cCI6MTc0OTcyNDIwNiwiaWF0IjoxNzQ5NzIyNDA2fQ.A7-KuYR76xIfbPNrSpulC12nx382JWx4Fx268I9Fedk
2025-06-12 03:00:07,491 - INFO - app.main - Firebase stream processing task scheduled.
2025-06-12 03:00:07,491 - INFO - app.main - Redis publisher task scheduled.
2025-06-12 03:00:07,491 - INFO - app.main - Application startup event finished.
2025-06-12 03:00:07,492 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 03:00:07,493 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 03:00:08,211 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 03:00:08,244 - INFO - app.main - Redis ping response: True
2025-06-12 03:00:11,290 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:11,291 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:16,288 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:16,289 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:21,301 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:21,301 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:26,294 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:26,295 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:31,299 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:31,301 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:36,288 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:36,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:41,290 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:41,291 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:46,268 - INFO - app.api.v1.endpoints.favorites - Direct SQL query found 3 symbols for user 1
2025-06-12 03:00:46,270 - INFO - app.api.v1.endpoints.favorites - Symbols: ['AUDCAD', 'AUDCHF', 'EURUSD']
2025-06-12 03:00:46,339 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:46,382 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:51,298 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:51,299 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:00:56,295 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:00:56,296 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:01:01,289 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 03:01:01,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 160, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 03:01:03,425 - INFO - app.main - Application shutdown event triggered.
2025-06-12 03:01:03,426 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 03:01:03,426 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 03:01:03,429 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 03:01:04,736 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 03:01:04,736 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 03:01:04,737 - INFO - app.main - Background task 'firebase_listener' cancelled successfully.
2025-06-12 03:01:04,740 - INFO - app.main - Redis client connection closed.
2025-06-12 03:01:04,740 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:32:42,757 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:32:42,792 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:32:42,800 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:32:42,800 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:33:05,503 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:33:05,555 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:33:05,570 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:33:05,570 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:33:06,287 - INFO - app.main - Application startup event triggered.
2025-06-12 04:33:06,288 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:33:06,292 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:33:08,372 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:33:08,387 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:34:06,969 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:34:07,001 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:34:07,006 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:34:07,006 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:34:07,631 - INFO - app.main - Application startup event triggered.
2025-06-12 04:34:07,631 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:34:07,637 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:34:09,671 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:34:09,679 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:34:09,679 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:34:09,682 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:34:09,683 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:34:10,789 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:34:10,790 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:34:10,792 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:34:10,792 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:35:33,671 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:35:33,702 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:35:33,709 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:35:33,709 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:35:34,415 - INFO - app.main - Application startup event triggered.
2025-06-12 04:35:34,416 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:35:34,420 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:35:36,494 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:35:36,503 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:35:36,503 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:35:36,505 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:35:36,506 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:35:37,613 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:35:37,630 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:35:37,638 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:35:37,639 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:36:01,677 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:36:01,724 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:36:01,732 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:36:01,732 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:36:02,778 - INFO - app.main - Application startup event triggered.
2025-06-12 04:36:02,778 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:36:02,784 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:36:04,863 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:36:04,880 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:36:04,880 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:36:04,884 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:04,884 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:36:06,806 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:06,810 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:36:07,313 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:36:07,314 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:36:26,386 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:36:26,393 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:36:26,401 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:36:26,406 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:36:26,406 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:36:26,409 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:36:26,415 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:36:26,415 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:36:26,927 - INFO - app.main - Application startup event triggered.
2025-06-12 04:36:26,927 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:36:26,932 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:36:26,941 - INFO - app.main - Application startup event triggered.
2025-06-12 04:36:26,941 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:36:26,947 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:36:28,993 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:36:29,004 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:36:29,004 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:36:29,004 - INFO - app.main - Redis publisher background task started
2025-06-12 04:36:29,007 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:29,008 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:36:29,014 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:36:29,023 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:36:29,023 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:36:29,023 - INFO - app.main - Redis publisher background task started
2025-06-12 04:36:29,025 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:29,026 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:36:29,946 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:29,946 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:29,956 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:36:29,956 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:36:30,353 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:36:30,353 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:36:30,353 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:36:30,353 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:36:41,419 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:36:41,431 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:36:41,437 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:36:41,442 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:36:41,442 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:36:41,449 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:36:41,455 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:36:41,455 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:36:42,150 - INFO - app.main - Application startup event triggered.
2025-06-12 04:36:42,150 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:36:42,154 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:36:42,165 - INFO - app.main - Application startup event triggered.
2025-06-12 04:36:42,165 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:36:42,170 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:36:44,188 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:36:44,195 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:36:44,195 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:36:44,195 - INFO - app.main - Redis publisher background task started
2025-06-12 04:36:44,197 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:44,198 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:36:44,204 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:36:44,211 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:36:44,211 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:36:44,211 - INFO - app.main - Redis publisher background task started
2025-06-12 04:36:44,215 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:44,216 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:36:45,000 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:45,012 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:36:45,039 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:36:45,042 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:36:45,441 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:36:45,441 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:36:46,393 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:36:46,393 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:37:38,546 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:37:38,562 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:37:38,562 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:37:38,568 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:37:38,568 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:37:38,578 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:37:38,584 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:37:38,584 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:37:39,086 - INFO - app.main - Application startup event triggered.
2025-06-12 04:37:39,086 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:37:39,090 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:37:39,109 - INFO - app.main - Application startup event triggered.
2025-06-12 04:37:39,109 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 378, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:37:39,113 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:37:41,143 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:37:41,156 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:37:41,156 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:37:41,157 - INFO - app.main - Redis publisher background task started
2025-06-12 04:37:41,163 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:37:41,165 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:37:41,197 - CRITICAL - app.main - Redis ping failed post-init: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 396, in startup_event
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 04:37:41,209 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:37:41,209 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:37:41,209 - INFO - app.main - Redis publisher background task started
2025-06-12 04:37:41,212 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:37:41,213 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:37:42,132 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:37:42,132 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:37:42,149 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:37:42,150 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:37:42,153 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:37:42,153 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:37:44,107 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:37:44,107 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:38:16,721 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:38:16,754 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:38:16,759 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:38:16,767 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:38:16,768 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:38:16,788 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:38:16,796 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:38:16,796 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:38:17,343 - INFO - app.main - Application startup event triggered.
2025-06-12 04:38:17,343 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:38:17,347 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:38:17,353 - INFO - app.main - Application startup event triggered.
2025-06-12 04:38:17,353 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:38:17,357 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:38:19,399 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:38:19,399 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:38:19,406 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:38:19,406 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:38:19,406 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:38:19,406 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:38:19,406 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:38:19,406 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:38:19,406 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:38:19,407 - INFO - app.main - Application startup event finished.
2025-06-12 04:38:19,407 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:38:19,407 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:38:19,407 - INFO - app.main - Application startup event finished.
2025-06-12 04:38:19,407 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:38:19,407 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:38:19,408 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:38:20,196 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:38:47,889 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:38:47,890 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:38:47,890 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:38:47,890 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:38:47,994 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:38:47,994 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:38:47,994 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:38:47,996 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:38:48,764 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:38:48,764 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:38:48,765 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:38:48,765 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:38:48,765 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:38:48,765 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:38:48,765 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:38:48,766 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:38:48,766 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:38:48,766 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:38:52,779 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:38:52,805 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:38:52,846 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:38:52,859 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:38:52,859 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:38:52,864 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:38:52,876 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:38:52,877 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:38:54,511 - INFO - app.main - Application startup event triggered.
2025-06-12 04:38:54,511 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
IREBASE_CREDENTIALS_FILE'
2025-06-12 04:38:54,519 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:38:54,519 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:38:56,713 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:38:56,722 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:38:56,747 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:38:56,747 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:38:56,747 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:38:56,748 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:38:56,748 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:38:56,749 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:38:56,756 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:38:56,756 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:38:56,757 - INFO - app.main - Application startup event finished.
2025-06-12 04:38:56,757 - INFO - app.main - Application startup event finished.
2025-06-12 04:38:56,760 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:38:56,761 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:38:57,701 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:38:57,727 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:39:26,046 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:39:26,046 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:39:26,046 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:39:26,047 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:39:26,087 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:39:26,088 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:39:26,088 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:39:26,089 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:39:28,046 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:39:28,046 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:39:28,046 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:39:28,046 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:39:28,046 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:39:28,046 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:39:28,046 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:39:28,046 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:39:28,046 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:39:28,046 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:39:30,094 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:39:30,123 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:39:30,132 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:39:30,138 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:39:30,138 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:39:30,153 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:39:30,160 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:39:30,160 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:39:30,916 - INFO - app.main - Application startup event triggered.
2025-06-12 04:39:30,917 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:39:30,922 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:39:30,929 - INFO - app.main - Application startup event triggered.
2025-06-12 04:39:30,929 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:39:30,934 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:39:33,018 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:39:33,019 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:39:33,024 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:39:33,024 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:39:33,024 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:39:33,025 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:39:33,025 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:39:33,025 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:39:33,025 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:39:33,026 - INFO - app.main - Application startup event finished.
2025-06-12 04:39:33,025 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:39:33,026 - INFO - app.main - Application startup event finished.
2025-06-12 04:39:33,026 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:39:33,026 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:39:33,026 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:39:33,026 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:39:34,180 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:39:34,181 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:39:51,997 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:39:51,997 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:39:51,998 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:39:51,999 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:39:53,510 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:39:53,510 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:39:53,511 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:39:53,511 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:39:53,511 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:39:57,671 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:39:57,687 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:39:57,692 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:39:57,692 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:39:58,173 - INFO - app.main - Application startup event triggered.
2025-06-12 04:39:58,173 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:39:58,177 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:40:00,218 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:40:00,226 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:40:00,226 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:40:00,226 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:40:00,226 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:40:00,227 - INFO - app.main - Application startup event finished.
2025-06-12 04:40:00,227 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:00,228 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:40:01,092 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:33,032 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:40:33,032 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 04:40:33,796 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:40:33,796 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:40:33,796 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:40:33,797 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:40:33,906 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:40:33,907 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:40:33,907 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:40:33,908 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:40:34,940 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:40:34,941 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:40:34,941 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:40:34,942 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:40:34,942 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:40:34,944 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:40:34,944 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:40:34,944 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:40:34,945 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:40:34,945 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:40:36,828 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:40:36,830 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:40:36,850 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:40:36,850 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:40:36,855 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:40:36,855 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:40:36,856 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:40:37,346 - INFO - app.main - Application startup event triggered.
2025-06-12 04:40:37,348 - INFO - app.main - Application startup event triggered.
2025-06-12 04:40:37,346 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:40:37,349 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:40:37,348 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:40:37,351 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:40:39,428 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:40:39,430 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:40:39,442 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:40:39,443 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:40:39,443 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:40:39,443 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:40:39,443 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:40:39,443 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:40:39,444 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:40:39,445 - INFO - app.main - Application startup event finished.
2025-06-12 04:40:39,445 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:40:39,445 - INFO - app.main - Application startup event finished.
2025-06-12 04:40:39,445 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:39,445 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:39,446 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:40:39,446 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:40:40,408 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:40,415 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:50,743 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:40:50,743 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:40:50,743 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:40:50,743 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:40:50,744 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:40:50,745 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:40:50,746 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:40:51,543 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:40:51,543 - INFO - app.firebase_stream - Firebase listener closed.
sing task finished.
2025-06-12 04:40:51,544 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:40:51,544 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:40:51,545 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:40:51,546 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:40:51,546 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:40:51,545 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:40:51,548 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:40:53,731 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:40:53,749 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:40:53,754 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:40:53,754 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:40:53,803 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:40:53,835 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:40:53,842 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:40:53,843 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:40:54,340 - INFO - app.main - Application startup event triggered.
2025-06-12 04:40:54,340 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:40:54,343 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:40:54,391 - INFO - app.main - Application startup event triggered.
2025-06-12 04:40:54,391 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:40:54,395 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:40:56,411 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:40:56,424 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:40:56,424 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:40:56,424 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:40:56,425 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:40:56,426 - INFO - app.main - Application startup event finished.
2025-06-12 04:40:56,427 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:56,428 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:40:56,482 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 04:40:56,494 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:40:56,494 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:40:56,494 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 04:40:56,495 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:40:56,496 - INFO - app.main - Application startup event finished.
2025-06-12 04:40:56,496 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:56,496 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:40:57,233 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:40:57,321 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:06,720 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:41:06,720 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:41:06,720 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:41:06,720 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:41:06,720 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 04:41:06,721 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:41:07,757 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:41:07,757 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:41:07,757 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:41:07,757 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:41:07,757 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:41:07,758 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:41:07,758 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:41:07,759 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:41:07,759 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 04:41:07,759 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:41:09,388 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:41:09,408 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:41:09,411 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:41:09,413 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:41:09,413 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:41:09,436 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:41:09,443 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:41:09,443 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:41:09,934 - INFO - app.main - Application startup event triggered.
2025-06-12 04:41:09,935 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:41:09,938 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:41:09,942 - INFO - app.main - Application startup event triggered.
2025-06-12 04:41:09,942 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:41:09,946 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:41:09,967 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:41:09,969 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:41:09,975 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:41:09,975 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:41:09,975 - INFO - app.main - Redis publisher background task started
2025-06-12 04:41:09,975 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:41:09,976 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:41:09,976 - INFO - app.main - Application startup event finished.
2025-06-12 04:41:09,977 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:41:09,977 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:41:09,977 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:09,977 - INFO - app.main - Redis publisher background task started
2025-06-12 04:41:09,977 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:41:09,977 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:41:09,977 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:41:09,978 - INFO - app.main - Application startup event finished.
2025-06-12 04:41:09,978 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:09,979 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:41:10,940 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:10,940 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:51,513 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:41:51,514 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:41:51,514 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:41:51,514 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:41:51,514 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:41:51,515 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:41:51,515 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:41:51,738 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:41:51,738 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:41:51,738 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:41:51,738 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:41:51,738 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:41:51,738 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:41:51,740 - INFO - app.main - Redis client connection closed.
2025-06-12 04:41:51,740 - INFO - app.main - Redis client connection closed.
2025-06-12 04:41:51,740 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:41:51,740 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:41:53,829 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:41:53,848 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:41:53,860 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:41:53,870 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:41:53,870 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:41:53,886 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:41:53,894 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:41:53,894 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:41:54,725 - INFO - app.main - Application startup event triggered.
2025-06-12 04:41:54,726 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:41:54,738 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:41:54,784 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:41:54,794 - INFO - app.main - Application startup event triggered.
2025-06-12 04:41:54,797 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:41:54,798 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:41:54,798 - INFO - app.main - Redis publisher background task started
2025-06-12 04:41:54,798 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:41:54,800 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:41:54,802 - INFO - app.main - Application startup event finished.
2025-06-12 04:41:54,803 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:54,804 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:41:54,794 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:41:54,806 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:41:54,865 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:41:54,882 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:41:54,882 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:41:54,882 - INFO - app.main - Redis publisher background task started
2025-06-12 04:41:54,882 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:41:54,884 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:41:54,886 - INFO - app.main - Application startup event finished.
2025-06-12 04:41:54,887 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:54,888 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:41:55,586 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:41:55,770 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:42:39,287 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:42:39,287 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:42:39,287 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:42:39,287 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:42:39,287 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:42:39,287 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:42:39,287 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:42:39,288 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:42:40,122 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:42:40,122 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:42:40,123 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:42:40,125 - INFO - app.main - Redis client connection closed.
2025-06-12 04:42:40,125 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:42:40,131 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:42:40,132 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:42:40,132 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:42:40,134 - INFO - app.main - Redis client connection closed.
2025-06-12 04:42:40,134 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:42:41,604 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:42:41,628 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:42:41,629 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:42:41,633 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:42:41,633 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:42:41,649 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:42:41,655 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:42:41,655 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:42:42,165 - INFO - app.main - Application startup event triggered.
2025-06-12 04:42:42,165 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:42:42,170 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:42:42,171 - INFO - app.main - Application startup event triggered.
2025-06-12 04:42:42,171 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:42:42,174 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:42:42,194 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:42:42,200 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:42:42,201 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:42:42,201 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:42:42,201 - INFO - app.main - Redis publisher background task started
2025-06-12 04:42:42,202 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:42:42,203 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:42:42,203 - INFO - app.main - Application startup event finished.
2025-06-12 04:42:42,203 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:42:42,204 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:42:42,206 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:42:42,207 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:42:42,207 - INFO - app.main - Redis publisher background task started
2025-06-12 04:42:42,207 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:42:42,207 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:42:42,208 - INFO - app.main - Application startup event finished.
2025-06-12 04:42:42,208 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:42:42,208 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:42:43,187 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:43:42,201 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:43:42,203 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:43:42,206 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:43:42,208 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:43:59,785 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:43:59,786 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:43:59,786 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:43:59,787 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:43:59,831 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:43:59,831 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:43:59,831 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:43:59,832 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:44:00,974 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:44:00,974 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:44:00,975 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:44:00,977 - INFO - app.main - Redis client connection closed.
2025-06-12 04:44:00,977 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:44:00,977 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:44:00,978 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:44:00,979 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:44:00,981 - INFO - app.main - Redis client connection closed.
2025-06-12 04:44:00,981 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:44:04,303 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:44:04,330 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:44:04,343 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:44:04,351 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:44:04,352 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:44:04,369 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:44:04,378 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:44:04,378 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:44:05,247 - INFO - app.main - Application startup event triggered.
2025-06-12 04:44:05,247 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:44:05,253 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:44:05,263 - INFO - app.main - Application startup event triggered.
2025-06-12 04:44:05,264 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:44:05,270 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:44:05,296 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:44:05,305 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:44:05,305 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:44:05,305 - INFO - app.main - Redis publisher background task started
2025-06-12 04:44:05,305 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:44:05,307 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:44:05,308 - INFO - app.main - Application startup event finished.
2025-06-12 04:44:05,309 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:44:05,309 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:44:05,314 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:44:05,327 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:44:05,327 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:44:05,327 - INFO - app.main - Redis publisher background task started
2025-06-12 04:44:05,327 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:44:05,329 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:44:05,330 - INFO - app.main - Application startup event finished.
2025-06-12 04:44:05,330 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:44:05,330 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:44:06,328 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:44:06,329 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:45:05,305 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:45:05,306 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:45:05,324 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:45:05,325 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:46:05,310 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:46:05,311 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:46:05,324 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:46:05,324 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:47:02,492 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 04:47:02,515 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 04:47:02,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 04:47:02,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 04:47:02,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 04:47:02,610 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 04:47:02,631 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 04:47:02,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 04:47:02,679 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 04:47:02,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 04:47:02,727 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 04:47:02,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 04:47:02,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 04:47:02,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 04:47:02,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 04:47:02,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 04:47:02,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 04:47:02,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 04:47:02,939 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 04:47:02,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 04:47:02,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 04:47:03,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 04:47:03,029 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 04:47:03,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 04:47:03,075 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 04:47:03,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 04:47:03,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 04:47:03,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 04:47:03,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 04:47:03,209 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 04:47:03,227 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 04:47:03,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 04:47:03,283 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 04:47:03,315 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 04:47:03,342 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 04:47:03,366 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 04:47:03,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 04:47:03,409 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 04:47:03,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 04:47:03,463 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 04:47:03,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 04:47:03,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 04:47:03,533 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 04:47:03,562 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 04:47:03,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 04:47:03,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 04:47:03,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 04:47:03,654 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 04:47:03,677 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 04:47:03,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 04:47:03,724 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 04:47:03,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 04:47:04,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 04:47:04,451 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 04:47:04,614 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 04:47:04,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 04:47:04,673 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 04:47:04,736 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 04:47:04,889 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 04:47:04,934 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 04:47:04,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 04:47:04,988 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 04:47:05,022 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 04:47:05,046 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 04:47:05,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 04:47:05,089 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 04:47:05,112 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 04:47:05,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 04:47:05,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 04:47:05,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 04:47:05,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 04:47:05,229 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 04:47:05,255 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 04:47:05,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 04:47:05,311 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:47:05,312 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:47:05,318 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 04:47:05,326 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:47:05,340 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:47:05,354 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 04:47:05,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 04:47:05,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 04:47:05,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 04:47:07,306 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:08,441 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:09,599 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:13,065 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:14,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:15,806 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:17,146 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:19,612 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:20,937 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:47:20,937 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:47:20,937 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:47:20,938 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:47:21,193 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:22,413 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:47:22,416 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:47:22,418 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:47:22,424 - INFO - app.main - Redis client connection closed.
2025-06-12 04:47:22,424 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:47:22,624 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:24,304 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:24,996 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:26,069 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:27,395 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:28,387 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:29,231 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:30,299 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:30,838 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:32,079 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:34,542 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:36,967 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:39,319 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:41,614 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:43,899 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:46,259 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:48,478 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:52,926 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:53,675 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:55,998 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:47:57,912 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:00,083 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:02,471 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:04,634 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:05,330 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:48:05,330 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:48:07,063 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:09,305 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:11,770 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:13,889 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:15,930 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:18,386 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:20,813 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:23,018 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:25,283 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:27,663 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:29,812 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:32,150 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:34,564 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:36,812 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:39,290 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:41,491 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:43,867 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:46,077 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:48,557 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:50,984 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:53,018 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:53,050 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:48:53,076 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:48:53,084 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:48:53,084 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:48:53,785 - INFO - app.main - Application startup event triggered.
2025-06-12 04:48:53,785 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:48:53,789 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:48:53,815 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:48:53,822 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:48:53,822 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:48:53,822 - INFO - app.main - Redis publisher background task started
2025-06-12 04:48:53,822 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:48:53,823 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:48:53,823 - INFO - app.main - Application startup event finished.
2025-06-12 04:48:53,823 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:48:53,824 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:48:54,682 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:48:55,210 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:55,581 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:55,914 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:57,669 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:58,036 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:48:59,947 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:00,380 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:02,329 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:02,703 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:04,711 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:05,028 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:05,336 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:49:05,336 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:49:06,814 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:07,178 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:09,135 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:09,430 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:11,526 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:11,903 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:13,800 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:14,116 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:16,098 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:16,368 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:18,669 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:19,236 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:20,765 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:21,115 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:23,121 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:23,437 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:25,747 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:26,244 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:28,126 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:28,910 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:30,230 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:30,846 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:32,776 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:49:33,204 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:49:33,204 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:49:33,204 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:49:33,205 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:49:33,264 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:49:33,265 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:49:33,265 - INFO - app.main - Cancelling 2 other background tasks...
2025-06-12 04:49:33,265 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:49:34,306 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:49:34,307 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:49:34,307 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:49:34,307 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:49:34,307 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:49:34,307 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:49:34,308 - INFO - app.main - Redis client connection closed.
2025-06-12 04:49:34,308 - INFO - app.main - Redis client connection closed.
2025-06-12 04:49:34,308 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:49:34,308 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:49:36,270 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:49:36,298 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:49:36,306 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:49:36,306 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:49:36,707 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:49:36,732 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:49:36,737 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:49:36,737 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:49:36,855 - INFO - app.main - Application startup event triggered.
2025-06-12 04:49:36,855 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:49:36,858 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:49:36,880 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:49:36,886 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:49:36,886 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:49:36,886 - INFO - app.main - Redis publisher background task started
2025-06-12 04:49:36,886 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:49:36,887 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:49:36,888 - INFO - app.main - Application startup event finished.
2025-06-12 04:49:36,888 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:36,889 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:49:37,582 - INFO - app.main - Application startup event triggered.
2025-06-12 04:49:37,582 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:49:37,589 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:49:37,623 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:49:37,634 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:49:37,634 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:49:37,634 - INFO - app.main - Redis publisher background task started
2025-06-12 04:49:37,635 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:49:37,636 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:49:37,636 - INFO - app.main - Application startup event finished.
2025-06-12 04:49:37,637 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:37,638 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:49:37,796 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:38,608 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:56,261 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:49:56,262 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:49:56,262 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:49:56,262 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 04:49:56,262 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 04:49:56,263 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 04:49:56,264 - INFO - app.main - Background task 'Task-5' cancelled successfully.
d.
2025-06-12 04:49:56,264 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:49:57,355 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:49:57,355 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:49:57,356 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:49:57,356 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:49:57,356 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:49:57,356 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:49:57,356 - INFO - app.main - Redis client connection closed.
2025-06-12 04:49:57,357 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:49:57,357 - INFO - app.main - Redis client connection closed.
2025-06-12 04:49:57,357 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:49:59,200 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:49:59,223 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:49:59,230 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:49:59,230 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:49:59,231 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:49:59,248 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:49:59,255 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:49:59,255 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:49:59,878 - INFO - app.main - Application startup event triggered.
2025-06-12 04:49:59,878 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:49:59,888 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:49:59,915 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:49:59,917 - INFO - app.main - Application startup event triggered.
2025-06-12 04:49:59,918 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:49:59,924 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:49:59,925 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:49:59,925 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:49:59,925 - INFO - app.main - Redis publisher background task started
2025-06-12 04:49:59,925 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:49:59,926 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:49:59,927 - INFO - app.main - Application startup event finished.
2025-06-12 04:49:59,928 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:59,928 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:49:59,948 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:49:59,963 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:49:59,963 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:49:59,963 - INFO - app.main - Redis publisher background task started
2025-06-12 04:49:59,964 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:49:59,965 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:49:59,965 - INFO - app.main - Application startup event finished.
2025-06-12 04:49:59,965 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:49:59,966 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:50:00,743 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:00,754 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:11,739 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 04:50:11,756 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 04:50:11,772 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 04:50:11,786 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 04:50:11,798 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 04:50:11,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 04:50:11,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 04:50:11,834 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 04:50:11,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 04:50:11,860 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 04:50:11,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 04:50:11,888 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 04:50:11,901 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 04:50:11,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 04:50:11,928 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 04:50:11,939 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 04:50:11,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 04:50:11,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 04:50:11,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 04:50:11,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 04:50:12,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 04:50:12,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 04:50:12,040 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 04:50:12,061 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 04:50:12,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 04:50:12,096 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 04:50:12,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 04:50:12,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 04:50:12,159 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 04:50:12,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 04:50:12,203 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 04:50:12,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 04:50:12,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 04:50:12,258 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 04:50:12,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 04:50:12,297 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 04:50:12,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 04:50:12,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 04:50:12,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 04:50:12,377 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 04:50:12,393 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 04:50:12,409 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 04:50:12,423 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 04:50:12,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 04:50:12,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 04:50:12,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 04:50:12,479 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 04:50:12,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 04:50:12,504 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 04:50:12,518 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 04:50:12,530 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 04:50:12,545 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 04:50:12,557 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 04:50:12,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 04:50:12,583 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 04:50:12,597 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 04:50:12,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 04:50:12,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 04:50:12,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 04:50:12,650 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 04:50:12,662 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 04:50:12,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 04:50:12,687 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 04:50:12,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 04:50:12,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 04:50:12,728 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 04:50:12,741 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 04:50:12,754 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 04:50:12,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 04:50:12,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 04:50:12,795 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 04:50:12,807 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 04:50:12,819 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 04:50:12,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 04:50:12,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 04:50:12,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 04:50:12,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 04:50:12,882 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 04:50:12,896 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 04:50:16,002 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:17,491 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:18,954 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:20,312 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:22,884 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:23,547 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:50:23,548 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:50:23,556 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 04:50:23,566 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:50:23,627 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:50:23,628 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:50:23,629 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 04:50:23,638 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 04:50:23,641 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:50:25,112 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:50:25,113 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:50:25,113 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:50:25,120 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:50:25,121 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:50:25,121 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:50:25,123 - INFO - app.main - Redis client connection closed.
2025-06-12 04:50:25,123 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:50:25,126 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 04:50:25,139 - INFO - app.main - Redis client connection closed.
2025-06-12 04:50:25,139 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:50:28,646 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:50:28,714 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:50:28,725 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:50:28,742 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:50:28,743 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:50:28,840 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:50:28,869 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:50:28,869 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:50:30,322 - INFO - app.main - Application startup event triggered.
2025-06-12 04:50:30,322 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:50:30,331 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:50:30,357 - INFO - app.main - Application startup event triggered.
2025-06-12 04:50:30,357 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:50:30,365 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:50:30,391 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:50:30,403 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:50:30,403 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:50:30,403 - INFO - app.main - Redis publisher background task started
2025-06-12 04:50:30,403 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:50:30,405 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:50:30,406 - INFO - app.main - Application startup event finished.
2025-06-12 04:50:30,407 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:30,409 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:50:30,431 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:50:30,444 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:50:30,444 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:50:30,444 - INFO - app.main - Redis publisher background task started
2025-06-12 04:50:30,444 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:50:30,445 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:50:30,447 - INFO - app.main - Application startup event finished.
2025-06-12 04:50:30,447 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:30,448 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:50:31,254 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:31,348 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:50:34,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 04:50:35,008 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 04:50:35,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 04:50:35,143 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 04:50:35,218 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 04:50:35,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 04:50:35,602 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 04:50:35,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 04:50:35,786 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 04:50:35,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 04:50:36,025 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 04:50:36,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 04:50:36,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 04:50:36,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 04:50:36,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 04:50:36,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 04:50:36,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 04:50:36,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 04:50:36,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 04:50:36,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 04:50:36,459 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 04:50:36,490 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 04:50:36,513 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 04:50:36,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 04:50:36,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 04:50:36,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 04:50:36,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 04:50:36,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 04:50:36,733 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 04:50:36,761 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 04:50:36,792 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 04:50:36,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 04:50:36,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 04:50:36,912 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 04:50:36,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 04:50:36,986 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 04:50:37,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 04:50:37,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 04:50:37,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 04:50:37,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 04:50:37,175 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 04:50:37,234 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 04:50:37,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 04:50:37,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 04:50:37,375 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 04:50:37,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 04:50:37,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 04:50:37,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 04:50:37,469 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 04:50:37,490 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 04:50:37,515 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 04:50:37,539 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 04:50:37,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 04:50:37,615 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 04:50:37,634 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 04:50:37,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 04:50:38,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 04:50:38,105 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 04:50:38,162 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 04:50:38,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 04:50:38,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 04:50:38,248 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 04:50:38,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 04:50:38,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 04:50:38,328 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 04:50:38,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 04:50:38,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 04:50:38,411 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 04:50:38,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 04:50:38,456 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 04:50:38,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 04:50:38,502 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 04:50:38,523 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 04:50:38,546 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 04:50:38,572 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 04:50:38,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 04:50:38,622 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 04:50:38,644 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 04:50:38,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 04:50:40,951 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:42,837 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:44,135 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:45,352 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:47,623 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:50,146 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:52,116 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:53,747 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:54,879 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:56,027 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:57,380 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:50:59,957 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:01,504 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:03,456 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:04,759 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:06,082 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:07,580 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:08,955 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:09,948 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,016 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,109 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,166 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,683 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,902 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,946 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,958 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:10,968 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:12,120 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:51:14,315 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:14,320 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:14,379 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:14,443 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:14,449 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:14,461 - INFO - app.api.v1.endpoints.users - Logout successful for user ID 1 by invalidating refresh token.
2025-06-12 04:51:30,407 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:51:30,408 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:51:30,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:51:30,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:51:46,242 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:51:46,258 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:51:46,263 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:51:46,263 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:51:46,794 - INFO - app.main - Application startup event triggered.
2025-06-12 04:51:46,794 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:51:46,797 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:51:46,824 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:51:46,828 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:51:46,828 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:51:46,829 - INFO - app.main - Redis publisher background task started
2025-06-12 04:51:46,829 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:51:46,829 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:51:46,830 - INFO - app.main - Application startup event finished.
2025-06-12 04:51:46,830 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:51:46,830 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:51:47,845 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:52:30,405 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:52:30,406 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:52:30,441 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:52:30,442 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:52:46,842 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:52:46,843 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:53:30,413 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:53:30,413 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:53:30,443 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:53:30,444 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:53:46,831 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:53:46,831 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:54:30,413 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:54:30,414 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:54:30,445 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:54:30,446 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:54:46,832 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:54:46,833 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:55:30,407 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:55:30,408 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:55:30,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:55:30,454 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:55:46,841 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:55:46,842 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:56:30,407 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:56:30,407 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:56:30,454 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:56:30,455 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:56:46,844 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:56:46,845 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:57:24,097 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 04:57:24,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 04:57:24,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 04:57:24,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 04:57:24,167 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 04:57:24,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 04:57:24,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 04:57:24,218 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 04:57:24,229 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 04:57:24,238 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 04:57:24,246 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 04:57:24,256 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 04:57:24,266 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 04:57:24,277 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 04:57:24,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 04:57:24,297 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 04:57:24,306 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 04:57:24,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 04:57:24,322 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 04:57:24,331 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 04:57:24,344 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 04:57:24,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 04:57:24,364 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 04:57:24,373 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 04:57:24,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 04:57:24,393 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 04:57:24,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 04:57:24,414 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 04:57:24,425 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 04:57:24,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 04:57:24,445 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 04:57:24,455 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 04:57:24,462 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 04:57:24,471 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 04:57:24,484 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 04:57:24,492 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 04:57:24,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 04:57:24,510 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 04:57:24,523 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 04:57:24,533 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 04:57:24,542 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 04:57:24,550 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 04:57:24,558 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 04:57:24,566 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 04:57:24,587 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 04:57:24,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 04:57:24,604 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 04:57:24,613 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 04:57:24,620 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 04:57:24,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 04:57:30,406 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:57:30,406 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:57:46,833 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:57:46,834 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:58:30,400 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:58:30,401 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:58:46,841 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:58:46,841 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:59:01,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 04:59:02,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 04:59:04,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 04:59:06,490 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 04:59:06,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 04:59:06,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 04:59:06,831 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 04:59:06,844 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 04:59:06,857 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 04:59:06,869 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 04:59:06,880 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 04:59:06,894 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 04:59:06,907 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 04:59:06,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 04:59:06,935 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 04:59:06,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 04:59:06,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 04:59:06,969 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 04:59:06,983 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 04:59:06,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 04:59:07,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 04:59:07,017 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 04:59:07,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 04:59:07,037 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 04:59:07,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 04:59:07,058 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 04:59:07,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 04:59:07,080 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 04:59:07,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 04:59:17,006 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 04:59:17,024 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 04:59:17,045 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 04:59:17,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 04:59:17,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 04:59:17,140 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 04:59:17,160 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 04:59:17,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 04:59:17,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 04:59:17,244 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 04:59:17,270 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 04:59:17,289 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 04:59:17,309 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 04:59:17,327 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 04:59:17,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 04:59:17,367 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 04:59:17,381 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 04:59:17,398 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 04:59:17,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 04:59:17,430 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 04:59:17,450 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 04:59:17,472 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 04:59:17,498 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 04:59:17,515 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 04:59:17,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 04:59:17,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 04:59:17,569 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 04:59:17,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 04:59:17,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 04:59:17,630 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 04:59:17,649 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 04:59:17,668 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 04:59:17,686 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 04:59:17,705 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 04:59:17,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 04:59:17,738 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 04:59:17,754 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 04:59:17,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 04:59:17,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 04:59:17,808 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 04:59:17,823 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 04:59:17,847 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 04:59:17,865 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 04:59:17,889 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 04:59:17,919 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 04:59:17,943 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 04:59:17,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 04:59:18,011 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 04:59:18,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 04:59:18,069 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 04:59:18,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 04:59:18,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 04:59:18,130 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 04:59:18,152 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 04:59:18,175 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 04:59:18,201 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 04:59:18,222 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 04:59:18,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 04:59:18,261 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 04:59:18,281 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 04:59:18,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 04:59:18,321 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 04:59:18,347 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 04:59:18,379 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 04:59:18,417 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 04:59:18,461 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 04:59:18,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 04:59:18,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 04:59:18,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 04:59:18,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 04:59:18,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 04:59:18,636 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 04:59:18,656 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 04:59:18,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 04:59:18,698 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 04:59:18,723 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 04:59:18,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 04:59:18,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 04:59:18,804 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 04:59:21,190 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:21,985 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:23,533 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:24,499 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:25,881 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:26,623 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:28,193 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:29,237 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:30,314 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:30,407 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:59:30,408 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:59:30,443 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 04:59:30,444 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 04:59:31,197 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:31,488 - INFO - app.main - Application shutdown event triggered.
2025-06-12 04:59:31,488 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 04:59:31,488 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 04:59:31,490 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 04:59:31,842 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 04:59:31,843 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 04:59:31,843 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 04:59:31,846 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 04:59:31,851 - INFO - app.main - Redis client connection closed.
2025-06-12 04:59:31,851 - INFO - app.main - Application shutdown event finished.
2025-06-12 04:59:32,657 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:35,084 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:37,387 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:39,194 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 04:59:39,268 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 04:59:39,280 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 04:59:39,281 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 04:59:39,623 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:40,893 - INFO - app.main - Application startup event triggered.
2025-06-12 04:59:40,894 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 04:59:40,901 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 04:59:40,957 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 04:59:40,974 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 04:59:40,974 - INFO - app.main - Firebase events processor background task started
2025-06-12 04:59:40,975 - INFO - app.main - Redis publisher background task started
2025-06-12 04:59:40,975 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 04:59:40,977 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 04:59:40,978 - INFO - app.main - Application startup event finished.
2025-06-12 04:59:40,978 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:59:40,979 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 04:59:42,062 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 04:59:42,234 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:43,414 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:44,230 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:45,756 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:46,620 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:47,391 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:49,548 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:51,421 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:53,524 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:55,099 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:58,050 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 04:59:59,868 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:00,784 - ERROR - app.database.session - Database session error: 404: No wallet records found for this user.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\wallets.py", line 39, in get_my_wallets
    raise HTTPException(
    ...<2 lines>...
    )
fastapi.exceptions.HTTPException: 404: No wallet records found for this user.
2025-06-12 05:00:01,336 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:02,681 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:05,651 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:08,641 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:10,534 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:12,543 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:14,062 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:15,839 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:17,453 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:19,491 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:21,478 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:24,394 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:25,899 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:27,611 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:29,796 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:30,454 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:00:30,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:00:31,305 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:32,631 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:34,235 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:35,918 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:38,064 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:40,340 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:40,983 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:00:40,984 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:00:42,218 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:44,706 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:45,246 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:45,252 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '3955717258', 'order_user_id': '4', 'user_id': '4', 'order_company_name': 'AUDCAD', 'order_type': 'BUY', 'order_status': 'PROCESSING', 'order_price': '0.88835000', 'order_quantity': '0.01000000', 'contract_value': '888.35000000', 'margin': '8.88000000', 'stop_loss': '', 'take_profit': '', 'close_price': '', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_order_id': '', 'modify_id': '', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'OPEN', 'timestamp': '2025-06-12T12:00:45.252148', 'account_type': 'live', 'action': ''}
2025-06-12 05:00:45,623 - INFO - app.core.firebase - Order data (ID: 3955717258) sent to Firebase successfully.
2025-06-12 05:00:45,901 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:47,321 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:48,896 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:51,912 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:53,470 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:55,323 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:56,895 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:00:58,549 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:00,452 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:01,652 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:02,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:05,110 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:07,011 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:09,565 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:10,562 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:11,577 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:12,894 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:14,412 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:15,892 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:17,178 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:18,670 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:19,949 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:20,113 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:21,477 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:23,566 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:25,403 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:26,873 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:28,129 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:29,543 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:30,439 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:01:30,440 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:01:30,750 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:32,106 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:33,516 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:35,878 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:37,219 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:38,649 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:39,962 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:40,976 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:01:40,976 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:01:41,189 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:42,833 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:44,057 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:45,076 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:45,950 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:47,571 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:48,744 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:49,825 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:51,015 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:52,106 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:53,106 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:54,205 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:55,181 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:56,250 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:01:59,741 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:03,744 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:09,693 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:13,797 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:17,583 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:20,799 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:24,640 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:28,670 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:30,452 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:02:30,490 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:02:33,016 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:35,078 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:36,986 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:38,849 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:39,609 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:40,973 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:02:40,974 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:02:43,758 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:49,417 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:02:55,340 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:02,172 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:11,334 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:16,330 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:20,602 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:24,690 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:26,798 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:28,902 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:30,456 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:03:30,479 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:03:31,728 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:35,296 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:37,799 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:40,409 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:40,985 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:03:40,986 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:03:44,033 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:46,812 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:51,288 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:56,181 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:03:59,678 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:03,985 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:08,244 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:13,708 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:16,601 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:18,804 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:22,307 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:26,355 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:27,566 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:28,989 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:30,472 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:04:31,012 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:04:33,962 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:39,130 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:40,975 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:04:40,976 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:04:44,308 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:51,136 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:04:56,496 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:03,898 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:17,889 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:30,476 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:05:30,480 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:05:30,587 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:36,441 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:40,982 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:05:40,982 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:05:41,163 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:46,079 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:50,987 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:05:56,597 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:02,234 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:07,381 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:16,412 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:21,823 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:28,205 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:30,756 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:06:30,814 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:06:34,773 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:40,994 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:06:40,996 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:06:42,853 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:49,096 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:06:55,693 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:01,088 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:06,040 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:13,951 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:21,112 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:27,819 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:30,529 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:07:30,573 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:07:33,124 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:37,579 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:40,983 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:07:40,984 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:07:42,005 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:46,876 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:52,370 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:07:58,491 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:08:05,904 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:08:19,068 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:08:26,948 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:08:30,453 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:08:30,454 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:08:40,986 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:08:40,988 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:09:30,441 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:09:30,442 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:09:40,978 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:09:40,979 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:10:30,449 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:10:30,449 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:10:40,979 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:10:40,980 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:11:30,440 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:11:30,441 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:11:40,977 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:11:40,978 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:11:45,124 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 05:11:45,138 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 05:11:45,153 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 05:11:45,166 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 05:11:45,180 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 05:11:45,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 05:11:45,208 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 05:11:45,221 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 05:11:45,235 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 05:11:45,251 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 05:11:45,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 05:11:45,280 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 05:11:45,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 05:11:45,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 05:11:45,326 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 05:11:45,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 05:11:45,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 05:11:45,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 05:11:45,383 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 05:11:45,444 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 05:11:45,461 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 05:11:45,475 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 05:11:45,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 05:11:45,503 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 05:11:45,519 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 05:11:45,532 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 05:11:45,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 05:11:45,564 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 05:11:45,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 05:11:45,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 05:11:45,621 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 05:11:45,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 05:11:45,653 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 05:11:45,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 05:11:45,683 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 05:11:45,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 05:11:45,715 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 05:11:45,732 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 05:11:45,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 05:11:45,760 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 05:11:45,774 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 05:11:45,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 05:11:45,802 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 05:11:45,817 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 05:11:45,830 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 05:11:45,843 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 05:11:45,855 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 05:11:45,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 05:11:45,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 05:11:45,900 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 05:11:45,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 05:11:45,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 05:11:45,945 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 05:11:45,960 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 05:11:45,982 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 05:11:45,999 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 05:11:46,013 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 05:11:46,030 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 05:11:46,045 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 05:11:46,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 05:11:46,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 05:11:46,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 05:11:46,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 05:11:46,121 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 05:11:46,137 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 05:11:46,151 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 05:11:46,167 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 05:11:46,183 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 05:11:46,200 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 05:11:46,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 05:11:46,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 05:11:46,247 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 05:11:46,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 05:11:46,282 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 05:11:46,296 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 05:11:46,310 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 05:11:46,324 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 05:11:46,340 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 05:11:46,357 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 05:11:50,577 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:11:53,716 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:11:56,166 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:11:58,787 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:00,068 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:02,052 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:05,428 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:10,231 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:19,880 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:27,434 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:12:30,455 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:12:30,456 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:12:40,997 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:12:40,999 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:13:30,451 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:13:30,453 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:13:40,984 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:13:40,985 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:14:30,442 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:14:30,444 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:14:40,979 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:14:40,980 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:15:30,450 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:15:30,452 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:15:36,107 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '7422527889', 'order_user_id': '4', 'user_id': '4', 'order_company_name': 'AUDCAD', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING_PROCESSING', 'order_price': '0.88000000', 'order_quantity': '0.01000000', 'contract_value': '1000.00000000', 'margin': '', 'stop_loss': '', 'take_profit': '', 'close_price': '', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_order_id': '', 'modify_id': '', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'PENDING', 'timestamp': '2025-06-12T12:15:36.107749', 'account_type': 'live', 'action': 'pending_order'}
2025-06-12 05:15:36,916 - INFO - app.core.firebase - Order data (ID: 7422527889) sent to Firebase successfully.
2025-06-12 05:15:40,988 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:15:40,989 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:16:30,440 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:16:30,442 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:16:31,938 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:16:31,940 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:16:31,940 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:16:31,945 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:16:31,946 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:16:32,066 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:16:32,069 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:16:32,069 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:16:32,082 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:16:32,323 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:16:32,323 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:16:32,323 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:16:32,330 - INFO - app.main - Redis client connection closed.
2025-06-12 05:16:32,330 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:16:32,335 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:16:32,336 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:16:32,337 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:16:32,341 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:16:32,350 - INFO - app.main - Redis client connection closed.
2025-06-12 05:16:32,351 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:16:36,437 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:16:36,464 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:16:36,470 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:16:36,470 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:16:37,339 - INFO - app.main - Application startup event triggered.
2025-06-12 05:16:37,339 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:16:37,346 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:16:37,395 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:16:37,407 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:16:37,407 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:16:37,407 - INFO - app.main - Redis publisher background task started
2025-06-12 05:16:37,407 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:16:37,410 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:16:37,411 - INFO - app.main - Application startup event finished.
2025-06-12 05:16:37,411 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:16:37,412 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:16:38,238 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:16:44,986 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:16:44,986 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:16:44,986 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:16:44,986 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:16:46,230 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:16:46,230 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:16:46,230 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:16:46,231 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:16:46,232 - INFO - app.main - Redis client connection closed.
2025-06-12 05:16:46,232 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:16:50,080 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:16:50,103 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:16:50,110 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:16:50,110 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:16:50,696 - INFO - app.main - Application startup event triggered.
2025-06-12 05:16:50,696 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:16:50,701 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:16:50,726 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:16:50,734 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:16:50,735 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:16:50,735 - INFO - app.main - Redis publisher background task started
2025-06-12 05:16:50,735 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:16:50,736 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:16:50,736 - INFO - app.main - Application startup event finished.
2025-06-12 05:16:50,737 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:16:50,737 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:16:51,655 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:17:50,735 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:17:50,736 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:17:56,471 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:17:56,472 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:17:56,472 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:17:56,472 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:17:57,791 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:17:57,791 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:17:57,792 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:17:57,798 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:17:57,799 - INFO - app.main - Redis client connection closed.
2025-06-12 05:17:57,799 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:18:00,031 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:18:00,055 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:18:00,061 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:18:00,061 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:18:00,725 - INFO - app.main - Application startup event triggered.
2025-06-12 05:18:00,725 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:18:00,729 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:00,731 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:18:00,736 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:18:00,736 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:18:00,736 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:18:00,737 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:18:00,738 - INFO - app.main - Application startup event finished.
2025-06-12 05:18:00,738 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:18:00,738 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:18:01,813 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:18:16,414 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:16,415 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:18:25,431 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:25,433 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:18:30,448 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:30,450 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:18:35,469 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:35,472 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:18:40,796 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:40,840 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:18:49,017 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:18:49,017 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:18:49,017 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:18:49,018 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:18:50,843 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:18:50,843 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:18:50,843 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:18:50,843 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:18:50,843 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:18:52,622 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:18:52,642 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:18:52,647 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:18:52,647 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:18:53,280 - INFO - app.main - Application startup event triggered.
2025-06-12 05:18:53,281 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:18:53,286 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:18:53,287 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:18:53,295 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:18:53,295 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:18:53,295 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:18:53,296 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:18:53,296 - INFO - app.main - Application startup event finished.
2025-06-12 05:18:53,296 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:18:53,297 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:18:54,266 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:19:32,647 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:19:32,648 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:19:32,648 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:19:32,648 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:19:34,667 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:19:34,667 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:19:34,667 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:19:34,667 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:19:34,667 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:19:36,194 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:19:36,211 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:19:36,217 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:19:36,217 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:19:36,748 - INFO - app.main - Application startup event triggered.
2025-06-12 05:19:36,748 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:19:36,754 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:19:36,756 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:19:36,762 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:19:36,762 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:19:36,762 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:19:36,763 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:19:36,763 - INFO - app.main - Application startup event finished.
2025-06-12 05:19:36,764 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:19:36,764 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:19:37,748 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:20:01,895 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:20:01,896 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:20:01,896 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:20:01,896 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:20:02,426 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:20:02,426 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:20:02,426 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:20:02,426 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:20:02,426 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:20:03,778 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:20:03,795 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:20:03,800 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:20:03,800 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:20:04,454 - INFO - app.main - Application startup event triggered.
2025-06-12 05:20:04,455 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:20:04,459 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:20:04,461 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:20:04,466 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:20:04,467 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:20:04,467 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:20:04,467 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:20:04,468 - INFO - app.main - Application startup event finished.
2025-06-12 05:20:04,469 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:20:04,470 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:20:05,399 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:20:24,041 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:20:24,084 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:20:24,090 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:20:24,090 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:20:24,918 - INFO - app.main - Application startup event triggered.
2025-06-12 05:20:24,918 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:20:24,924 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:20:24,925 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:20:24,936 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:20:24,937 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:20:24,937 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:20:24,939 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:20:24,940 - INFO - app.main - Application startup event finished.
2025-06-12 05:20:24,941 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:20:24,941 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:20:28,168 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:21:01,427 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:01,431 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:21:04,467 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:21:04,468 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 05:21:06,478 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:06,480 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:21:11,502 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:11,505 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 383, in app
    await dependant.call(**solved_result.values)
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\market_data_ws.py", line 752, in websocket_endpoint
    redis_client = await get_redis_client()
                   ^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:21:11,768 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:11,774 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:21:24,952 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:21:24,952 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 05:21:26,832 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:26,841 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:21:55,270 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:21:55,272 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:22:00,799 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:00,799 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:00,799 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:22:00,800 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:03,054 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:03,054 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:03,054 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:22:03,055 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:22:03,055 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:06,658 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:06,676 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:06,681 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:06,681 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:07,247 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:07,247 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:07,253 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:07,254 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 05:22:07,260 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:07,260 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:07,260 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 05:22:07,260 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:07,261 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:07,261 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:07,261 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:08,373 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:18,661 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:18,664 - ERROR - app.database.session - Database session error: 503: Redis unavailable
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\dependencies\redis_client.py", line 18, in get_redis_client
    raise HTTPException(status_code=status.HTTP_503_SERVICE_UNAVAILABLE, detail="Redis unavailable")
fastapi.exceptions.HTTPException: 503: Redis unavailable
2025-06-12 05:22:24,945 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:22:24,945 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 05:22:34,802 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:34,803 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:34,803 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:22:34,804 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:34,857 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:34,857 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:34,857 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 05:22:34,858 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:35,306 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:35,306 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:35,306 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:22:35,306 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:35,306 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:22:35,306 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:35,306 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:35,307 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:22:35,307 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 05:22:35,307 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:36,884 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:36,904 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:36,909 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:36,909 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:36,918 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:36,955 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:36,965 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:36,965 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:37,557 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:37,557 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:37,563 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:37,596 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:22:37,603 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:37,603 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:37,603 - INFO - app.main - Redis publisher background task started
2025-06-12 05:22:37,603 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:22:37,604 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:37,604 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:37,604 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:37,605 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:37,605 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:37,605 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:37,609 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:37,646 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:22:37,653 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:37,653 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:37,653 - INFO - app.main - Redis publisher background task started
2025-06-12 05:22:37,653 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:22:37,654 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:37,655 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:37,655 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:37,656 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:38,410 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:38,412 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:38,418 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:38,443 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:39,905 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:39,906 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:39,906 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:39,906 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:39,906 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:39,906 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:39,906 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:22:39,907 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:39,907 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:39,907 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:22:39,908 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:22:39,908 - INFO - app.main - Redis client connection closed.
2025-06-12 05:22:39,908 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:39,909 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:22:39,909 - INFO - app.main - Redis client connection closed.
2025-06-12 05:22:39,909 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:41,498 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:41,515 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:41,518 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:41,521 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:41,521 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:41,535 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:41,542 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:41,542 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:42,145 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:42,145 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:42,151 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:42,177 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:42,178 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:42,182 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:42,193 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:22:42,202 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:42,202 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:42,202 - INFO - app.main - Redis publisher background task started
2025-06-12 05:22:42,202 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:22:42,203 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:42,204 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:42,204 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:42,204 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:42,211 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:22:42,218 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:42,218 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:42,219 - INFO - app.main - Redis publisher background task started
2025-06-12 05:22:42,219 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:22:42,219 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:42,220 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:42,220 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:42,221 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:43,294 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:43,300 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:50,571 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:22:50,572 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:22:50,572 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:22:50,573 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:22:51,484 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:22:51,484 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:22:51,484 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:22:51,485 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:22:51,486 - INFO - app.main - Redis client connection closed.
2025-06-12 05:22:51,486 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:22:55,771 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:22:55,789 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:22:55,796 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:22:55,796 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:22:56,298 - INFO - app.main - Application startup event triggered.
2025-06-12 05:22:56,298 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:22:56,304 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:22:56,345 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:22:56,357 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:22:56,357 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:22:56,357 - INFO - app.main - Redis publisher background task started
2025-06-12 05:22:56,357 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:22:56,357 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:22:56,358 - INFO - app.main - Application startup event finished.
2025-06-12 05:22:56,358 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:22:56,358 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:22:57,532 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:23:42,218 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:23:42,219 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:23:56,359 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:23:56,360 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:24:41,737 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 05:24:41,756 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 05:24:41,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 05:24:41,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 05:24:41,806 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 05:24:41,823 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 05:24:41,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 05:24:41,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 05:24:41,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 05:24:41,892 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 05:24:41,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 05:24:41,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 05:24:41,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 05:24:41,954 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 05:24:41,965 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 05:24:41,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 05:24:41,993 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 05:24:42,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 05:24:42,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 05:24:42,034 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 05:24:42,047 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 05:24:42,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 05:24:42,082 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 05:24:42,096 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 05:24:42,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 05:24:42,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 05:24:42,139 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 05:24:42,150 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 05:24:42,158 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 05:24:42,165 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 05:24:42,173 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 05:24:42,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 05:24:42,196 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 05:24:42,205 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 05:24:42,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 05:24:42,217 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:24:42,221 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:24:42,225 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 05:24:42,232 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 05:24:42,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 05:24:42,245 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 05:24:42,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 05:24:42,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 05:24:42,267 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 05:24:42,275 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 05:24:42,283 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 05:24:42,290 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 05:24:42,295 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 05:24:42,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 05:24:42,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 05:24:42,319 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 05:24:42,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 05:24:42,349 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 05:24:42,356 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 05:24:42,363 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 05:24:42,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 05:24:42,381 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 05:24:42,386 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 05:24:42,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 05:24:42,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 05:24:42,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 05:24:42,428 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 05:24:42,452 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 05:24:42,473 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 05:24:42,486 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 05:24:42,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 05:24:42,520 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 05:24:42,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 05:24:42,549 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 05:24:42,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 05:24:42,581 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 05:24:42,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 05:24:42,603 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 05:24:42,618 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 05:24:42,632 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 05:24:42,647 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 05:24:42,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 05:24:42,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 05:24:42,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 05:24:42,702 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 05:24:42,717 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 05:24:48,194 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:24:51,269 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:24:54,358 - ERROR - app.database.session - Database session error: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 896, in close_order
    is_barclays_live_user = (user_type == 'live' and sending_orders_normalized == 'barclays')
                             ^^^^^^^^^
NameError: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1237, in close_order
    raise HTTPException(status_code=500, detail=f"Error processing close order: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing close order: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1240, in close_order
    raise HTTPException(status_code=500, detail=f"Error in close_order endpoint: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
2025-06-12 05:24:55,458 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:24:56,367 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:24:56,368 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:24:59,170 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:02,382 - ERROR - app.database.session - Database session error: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 896, in close_order
    is_barclays_live_user = (user_type == 'live' and sending_orders_normalized == 'barclays')
                             ^^^^^^^^^
NameError: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1237, in close_order
    raise HTTPException(status_code=500, detail=f"Error processing close order: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing close order: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1240, in close_order
    raise HTTPException(status_code=500, detail=f"Error in close_order endpoint: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
2025-06-12 05:25:02,729 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:06,428 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:11,788 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:15,253 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:22,568 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 05:25:22,576 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 05:25:22,585 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 05:25:22,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 05:25:22,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 05:25:22,611 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 05:25:22,621 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 05:25:22,629 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 05:25:22,641 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 05:25:22,651 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 05:25:22,658 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 05:25:22,667 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 05:25:22,676 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 05:25:22,684 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 05:25:22,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 05:25:22,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 05:25:22,710 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 05:25:22,721 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 05:25:22,730 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 05:25:22,741 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 05:25:22,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 05:25:22,759 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 05:25:22,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 05:25:22,773 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 05:25:22,781 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 05:25:22,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 05:25:22,797 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 05:25:22,806 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 05:25:22,816 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 05:25:22,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 05:25:22,833 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 05:25:22,841 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 05:25:22,850 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 05:25:22,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 05:25:22,876 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 05:25:22,887 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 05:25:22,898 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 05:25:22,908 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 05:25:22,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 05:25:22,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 05:25:22,940 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 05:25:22,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 05:25:22,962 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 05:25:22,972 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 05:25:22,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 05:25:22,992 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 05:25:23,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 05:25:23,017 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 05:25:23,028 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 05:25:23,041 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 05:25:23,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 05:25:23,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 05:25:23,071 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 05:25:23,081 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 05:25:23,090 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 05:25:23,100 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 05:25:23,108 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 05:25:23,116 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 05:25:23,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 05:25:23,134 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 05:25:23,144 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 05:25:23,152 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 05:25:23,162 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 05:25:23,171 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 05:25:23,181 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 05:25:23,189 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 05:25:23,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 05:25:23,202 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 05:25:23,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 05:25:23,233 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 05:25:23,260 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 05:25:23,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 05:25:23,292 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 05:25:23,308 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 05:25:23,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 05:25:23,335 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 05:25:23,348 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 05:25:23,358 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 05:25:23,368 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 05:25:24,442 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:26,843 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:29,429 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:31,713 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:33,742 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:34,017 - ERROR - app.database.session - Database session error: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 896, in close_order
    is_barclays_live_user = (user_type == 'live' and sending_orders_normalized == 'barclays')
                             ^^^^^^^^^
NameError: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1237, in close_order
    raise HTTPException(status_code=500, detail=f"Error processing close order: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing close order: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1240, in close_order
    raise HTTPException(status_code=500, detail=f"Error in close_order endpoint: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
2025-06-12 05:25:36,361 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:38,638 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:40,981 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:42,917 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:45,229 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:47,565 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:50,152 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:52,340 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:54,614 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:56,355 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:25:56,355 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:25:56,944 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:25:59,111 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:01,351 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:03,637 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:06,131 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:08,441 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:10,818 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:12,985 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:15,609 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:15,966 - ERROR - app.database.session - Database session error: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 896, in close_order
    is_barclays_live_user = (user_type == 'live' and sending_orders_normalized == 'barclays')
                             ^^^^^^^^^
NameError: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1237, in close_order
    raise HTTPException(status_code=500, detail=f"Error processing close order: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing close order: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1240, in close_order
    raise HTTPException(status_code=500, detail=f"Error in close_order endpoint: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
2025-06-12 05:26:18,584 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:20,531 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:21,878 - ERROR - app.database.session - Database session error: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 896, in close_order
    is_barclays_live_user = (user_type == 'live' and sending_orders_normalized == 'barclays')
                             ^^^^^^^^^
NameError: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1237, in close_order
    raise HTTPException(status_code=500, detail=f"Error processing close order: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error processing close order: name 'user_type' is not defined

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 1240, in close_order
    raise HTTPException(status_code=500, detail=f"Error in close_order endpoint: {str(e)}")
fastapi.exceptions.HTTPException: 500: Error in close_order endpoint: 500: Error processing close order: name 'user_type' is not defined
2025-06-12 05:26:22,616 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:25,106 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:27,082 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:29,299 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:31,831 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:34,056 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:36,531 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:38,689 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:41,129 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:43,349 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:45,669 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:47,782 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:50,276 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:52,482 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:54,808 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:56,370 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:26:56,371 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:26:57,188 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:26:59,503 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:01,697 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:03,813 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:06,280 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:08,736 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:11,042 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:13,342 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:15,660 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:18,366 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:21,288 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:22,725 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:25,047 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:27,205 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:29,740 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:32,146 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:34,502 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:36,547 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:38,793 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:41,024 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:43,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:46,115 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:47,881 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:50,473 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:52,660 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:55,054 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:56,355 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:27:56,356 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:27:57,221 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:27:59,606 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:01,868 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:04,031 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:06,341 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:08,833 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:08,956 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '4573979015', 'order_user_id': '4', 'user_id': '4', 'order_company_name': 'AUDCAD', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING', 'order_price': '0.1', 'order_quantity': '1', 'contract_value': '', 'margin': '', 'stop_loss': '', 'take_profit': '', 'close_price': '', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_order_id': '', 'modify_id': '9597874149', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'PENDING', 'timestamp': '2025-06-12T12:28:08.956878', 'account_type': 'live', 'action': 'modify_order'}
2025-06-12 05:28:09,566 - INFO - app.core.firebase - Order data (ID: 4573979015) sent to Firebase successfully.
2025-06-12 05:28:11,423 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:13,750 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:15,853 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:19,102 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:21,467 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:23,048 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:25,261 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:27,469 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:29,902 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:33,018 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:34,880 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:37,266 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:39,406 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:41,376 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:44,318 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:45,924 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:48,221 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:50,798 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:52,875 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:55,299 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:28:56,358 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:28:56,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:28:57,521 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:00,164 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:02,271 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:04,090 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:06,597 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:09,287 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:11,368 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:14,015 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:15,915 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:18,221 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:21,627 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:23,171 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:25,568 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:27,694 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:30,030 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:31,896 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:34,596 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:36,796 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:39,255 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:41,891 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:44,502 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:46,199 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:48,323 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:50,716 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:53,349 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:55,719 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:29:56,368 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:29:56,368 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:29:57,969 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:00,254 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:02,425 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:04,588 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:06,816 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:09,201 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:11,204 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:13,461 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:15,537 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:18,157 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:20,595 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:22,551 - INFO - app.core.firebase - [FIREBASE] Payload being pushed to Firebase (all stringified): {'order_id': '4573979015', 'order_user_id': '4', 'user_id': '4', 'order_company_name': 'AUDCAD', 'order_type': 'BUY_LIMIT', 'order_status': 'PENDING', 'order_price': '0.8', 'order_quantity': '2', 'contract_value': '', 'margin': '', 'stop_loss': '', 'take_profit': '', 'close_price': '', 'net_profit': '', 'swap': '', 'commission': '', 'cancel_message': '', 'close_message': '', 'takeprofit_id': '', 'stoploss_id': '', 'cancel_id': '', 'close_order_id': '', 'modify_id': '3368787729', 'stoploss_cancel_id': '', 'takeprofit_cancel_id': '', 'status': 'PENDING', 'timestamp': '2025-06-12T12:30:22.551475', 'account_type': 'live', 'action': 'modify_order'}
2025-06-12 05:30:23,161 - INFO - app.core.firebase - Order data (ID: 4573979015) sent to Firebase successfully.
2025-06-12 05:30:23,470 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:25,204 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:27,597 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:29,710 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:31,901 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:34,332 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:36,528 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:39,186 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:41,318 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:43,763 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:46,126 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:48,783 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:51,295 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:53,338 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:56,370 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:30:56,371 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:30:56,427 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:30:57,829 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:00,286 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:02,537 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:04,757 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:06,747 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:09,362 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:11,655 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:13,612 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:16,572 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:18,295 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:21,670 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:23,522 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:25,472 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:27,686 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:30,094 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:32,400 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:34,537 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:36,900 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:39,177 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:31:40,652 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:31:40,652 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:31:40,652 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:31:40,653 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:31:40,904 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:31:40,904 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:31:40,905 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:31:40,905 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:31:40,906 - INFO - app.main - Redis client connection closed.
2025-06-12 05:31:40,906 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:49:20,047 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:49:20,079 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:49:20,084 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:49:20,084 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:49:20,787 - INFO - app.main - Application startup event triggered.
2025-06-12 05:49:20,787 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:49:20,791 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:49:20,835 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:49:20,848 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:49:20,849 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:49:20,849 - INFO - app.main - Redis publisher background task started
2025-06-12 05:49:20,849 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:49:20,850 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:49:20,851 - INFO - app.main - Application startup event finished.
2025-06-12 05:49:20,851 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:49:20,852 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:49:22,047 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:50:20,856 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:50:20,857 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:51:20,849 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:51:20,850 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:52:20,849 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:52:20,850 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:53:20,855 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:53:20,856 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:54:20,847 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:54:20,848 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:54:45,494 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 05:54:45,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 05:54:45,534 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 05:54:45,550 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 05:54:45,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 05:54:45,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 05:54:45,606 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 05:54:45,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 05:54:45,637 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 05:54:45,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 05:54:45,669 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 05:54:45,685 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 05:54:45,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 05:54:45,714 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 05:54:45,734 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 05:54:45,749 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 05:54:45,763 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 05:54:45,775 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 05:54:45,787 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 05:54:45,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 05:54:45,821 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 05:54:45,834 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 05:54:45,845 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 05:54:45,861 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 05:54:45,874 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 05:54:45,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 05:54:45,904 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 05:54:45,916 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 05:54:45,933 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 05:54:45,946 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 05:54:45,967 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 05:54:45,980 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 05:54:45,995 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 05:54:46,010 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 05:54:46,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 05:54:46,035 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 05:54:46,048 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 05:54:46,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 05:54:46,077 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 05:54:46,091 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 05:54:46,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 05:54:46,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 05:54:46,135 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 05:54:46,148 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 05:54:46,163 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 05:54:46,182 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 05:54:46,193 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 05:54:46,207 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 05:54:46,226 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 05:54:46,241 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 05:54:46,259 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 05:54:46,273 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 05:54:46,287 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 05:54:46,300 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 05:54:46,317 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 05:54:46,334 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 05:54:46,346 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 05:54:46,360 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 05:54:46,375 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 05:54:46,391 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 05:54:46,402 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 05:54:46,422 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 05:54:46,434 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 05:54:46,446 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 05:54:46,461 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 05:54:46,477 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 05:54:46,490 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 05:54:46,501 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 05:54:46,514 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 05:54:46,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 05:54:46,544 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 05:54:46,555 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 05:54:46,575 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 05:54:46,591 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 05:54:46,602 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 05:54:46,616 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 05:54:46,633 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 05:54:46,646 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 05:54:46,658 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 05:54:48,165 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:54:50,781 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:54:52,610 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:54:55,142 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:54:57,364 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:54:59,765 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:01,931 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:04,315 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:06,504 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:08,924 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:11,141 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:13,527 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:15,817 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:18,069 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:20,846 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:55:20,847 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:55:22,201 - ERROR - app.database.session - Database session error: 400: Failed to process order: Not enough wallet balance to cover additional margin.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\order_processing.py", line 321, in process_new_order
    raise InsufficientFundsError("Not enough wallet balance to cover additional margin.")
app.services.order_processing.InsufficientFundsError: Not enough wallet balance to cover additional margin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 370, in place_order
    order_create_internal = await process_new_order(
                            ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\app\services\order_processing.py", line 362, in process_new_order
    raise OrderProcessingError(f"Failed to process order: {str(e)}")
app.services.order_processing.OrderProcessingError: Failed to process order: Not enough wallet balance to cover additional margin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 544, in place_order
    raise HTTPException(status_code=400, detail=str(e))
fastapi.exceptions.HTTPException: 400: Failed to process order: Not enough wallet balance to cover additional margin.
2025-06-12 05:55:22,396 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:24,316 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:25,711 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:28,346 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:30,125 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:30,921 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:31,017 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:31,913 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:34,296 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:36,330 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:38,755 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:40,875 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:43,501 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:45,619 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:46,572 - ERROR - app.database.session - Database session error: 400: Failed to process order: Not enough wallet balance to cover additional margin.
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\order_processing.py", line 321, in process_new_order
    raise InsufficientFundsError("Not enough wallet balance to cover additional margin.")
app.services.order_processing.InsufficientFundsError: Not enough wallet balance to cover additional margin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 370, in place_order
    order_create_internal = await process_new_order(
                            ^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\app\services\order_processing.py", line 362, in process_new_order
    raise OrderProcessingError(f"Failed to process order: {str(e)}")
app.services.order_processing.OrderProcessingError: Failed to process order: Not enough wallet balance to cover additional margin.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                   ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<3 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\api\v1\endpoints\orders.py", line 544, in place_order
    raise HTTPException(status_code=400, detail=str(e))
fastapi.exceptions.HTTPException: 400: Failed to process order: Not enough wallet balance to cover additional margin.
2025-06-12 05:55:48,091 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:50,336 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:52,681 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:54,281 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:54,832 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:55,568 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:57,229 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:55:59,555 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:56:02,026 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:56:04,041 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:56:04,429 - INFO - app.main - Application shutdown event triggered.
2025-06-12 05:56:04,429 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 05:56:04,429 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 05:56:04,432 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 05:56:04,432 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 05:56:05,858 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 05:56:05,858 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 05:56:05,858 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 05:56:05,860 - INFO - app.main - Redis client connection closed.
2025-06-12 05:56:05,860 - INFO - app.main - Application shutdown event finished.
2025-06-12 05:56:45,707 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 05:56:45,742 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 05:56:45,749 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 05:56:45,749 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 05:56:46,236 - INFO - app.main - Application startup event triggered.
2025-06-12 05:56:46,237 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 05:56:46,241 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 05:56:46,274 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 05:56:46,281 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 05:56:46,282 - INFO - app.main - Firebase events processor background task started
2025-06-12 05:56:46,282 - INFO - app.main - Redis publisher background task started
2025-06-12 05:56:46,282 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 05:56:46,283 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 05:56:46,284 - INFO - app.main - Application startup event finished.
2025-06-12 05:56:46,284 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:56:46,285 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 05:56:47,264 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 05:57:19,713 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 05:57:19,732 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 05:57:19,745 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 05:57:19,764 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 05:57:19,791 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 05:57:19,815 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 05:57:19,835 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 05:57:19,853 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 05:57:19,871 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 05:57:19,884 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 05:57:19,899 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 05:57:19,914 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 05:57:19,929 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 05:57:19,944 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 05:57:19,960 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 05:57:19,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 05:57:19,993 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 05:57:20,007 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 05:57:20,018 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 05:57:20,055 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 05:57:20,094 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 05:57:20,122 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 05:57:20,145 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 05:57:20,161 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 05:57:20,176 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 05:57:20,198 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 05:57:20,237 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 05:57:20,253 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 05:57:20,271 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 05:57:20,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 05:57:20,305 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 05:57:20,318 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 05:57:20,341 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 05:57:20,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 05:57:20,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 05:57:20,384 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 05:57:20,404 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 05:57:20,421 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 05:57:20,435 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 05:57:20,448 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 05:57:20,475 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 05:57:20,491 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 05:57:20,508 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 05:57:20,525 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 05:57:20,537 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 05:57:20,556 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 05:57:20,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 05:57:20,592 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 05:57:20,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 05:57:20,625 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 05:57:20,643 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 05:57:20,663 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 05:57:20,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 05:57:20,700 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 05:57:20,715 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 05:57:20,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 05:57:20,743 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 05:57:20,757 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 05:57:20,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 05:57:20,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 05:57:20,800 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 05:57:20,820 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 05:57:20,835 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 05:57:20,849 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 05:57:20,859 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 05:57:20,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 05:57:20,896 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 05:57:20,912 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 05:57:20,925 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 05:57:20,937 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 05:57:20,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 05:57:20,961 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 05:57:20,979 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 05:57:20,994 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 05:57:21,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 05:57:21,020 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 05:57:21,042 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 05:57:21,064 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 05:57:21,112 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 05:57:23,203 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:25,420 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:28,570 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:29,915 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:32,170 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:34,492 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:37,458 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:39,483 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:41,756 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:43,880 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:46,279 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:57:46,280 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:57:46,560 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:46,762 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:48,479 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:50,892 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:52,940 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:55,407 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:57:57,566 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:00,156 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:02,148 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:04,284 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:06,905 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:09,601 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:10,712 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:11,573 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:13,403 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:16,113 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:18,246 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:21,132 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:21,641 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:23,068 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:25,327 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:28,223 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:29,985 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:32,080 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:34,313 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:36,575 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:38,999 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:41,197 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:43,918 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:46,144 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:46,289 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:58:46,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:58:48,463 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:50,569 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:53,075 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:55,510 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:57,623 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:58:59,816 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:02,203 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:04,404 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:06,720 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:08,996 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:11,297 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:13,833 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:16,042 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:18,269 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:20,701 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:22,900 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:25,182 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:27,812 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:30,409 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:32,139 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:34,472 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:36,617 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:38,996 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:41,259 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:43,393 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:46,265 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:46,279 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 05:59:46,280 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 05:59:48,706 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:51,262 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:53,625 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:55,638 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 05:59:57,933 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:00,301 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:02,430 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:04,460 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:06,897 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:09,132 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:11,755 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:14,267 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:16,455 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:18,727 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:21,060 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:23,296 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:25,974 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:28,979 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:31,121 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:33,042 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:35,247 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:37,734 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:40,264 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:42,358 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:44,623 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:46,280 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 06:00:46,281 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 06:00:46,787 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:49,294 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:51,902 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:53,956 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:56,301 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:00:58,865 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:01,220 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:03,144 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:05,778 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:07,539 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:10,303 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:12,538 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:14,908 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:17,047 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:19,416 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:22,086 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:24,166 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:26,145 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:28,837 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:31,688 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:33,307 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:35,586 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:38,270 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:40,217 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:42,306 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:44,650 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:46,288 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 06:01:46,290 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 06:01:47,008 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:49,111 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:51,638 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:53,811 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:56,610 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:01:58,695 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:00,869 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:03,460 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:06,116 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:08,872 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:10,587 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:12,973 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:14,660 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:17,325 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:20,035 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:22,161 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:24,068 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:26,976 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:29,666 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:34,399 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:37,118 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:40,220 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:41,912 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:44,915 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:46,278 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 06:02:46,279 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 06:02:46,855 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:48,849 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:51,892 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:53,383 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:56,050 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:02:57,895 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:00,465 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:02,728 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:05,522 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:07,760 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:09,455 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:12,188 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:14,242 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:17,119 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:19,219 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:21,295 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:23,559 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:26,046 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:27,943 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:31,222 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:33,344 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:35,052 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:37,488 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:39,461 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:42,074 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:44,077 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:46,281 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 06:03:46,283 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 06:03:46,289 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:48,911 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:51,326 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:53,415 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:55,711 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:03:57,993 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:00,331 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:02,552 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:04,938 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:07,185 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:09,422 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:12,152 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:14,437 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:16,539 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:18,730 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:21,519 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:23,739 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:26,058 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:28,347 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:31,223 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:32,965 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:34,803 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:37,175 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:39,421 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:42,056 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:44,117 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:46,280 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 06:04:46,285 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 06:04:46,342 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:48,847 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:51,158 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:53,404 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:55,755 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:04:58,129 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:00,406 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:02,773 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:04,704 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:07,177 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:09,587 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:11,907 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:13,942 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 06:05:16,521 - INFO - app.main - Application shutdown event triggered.
2025-06-12 06:05:16,522 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 06:05:16,522 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 06:05:16,523 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 06:05:17,845 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 06:05:17,845 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 06:05:17,845 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 06:05:17,848 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 06:05:17,849 - INFO - app.main - Redis client connection closed.
2025-06-12 06:05:17,849 - INFO - app.main - Application shutdown event finished.
2025-06-12 09:45:14,948 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 09:45:14,976 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 09:45:14,984 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 09:45:14,984 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 09:45:15,738 - INFO - app.main - Application startup event triggered.
2025-06-12 09:45:15,739 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 09:45:15,746 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 09:45:17,835 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 09:45:17,850 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 09:45:17,851 - INFO - app.main - Firebase events processor background task started
2025-06-12 09:45:17,851 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 09:45:17,853 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 09:45:17,854 - INFO - app.main - Application startup event finished.
2025-06-12 09:45:17,855 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:45:17,855 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 09:45:19,149 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:46:01,579 - INFO - app.main - Application shutdown event triggered.
2025-06-12 09:46:01,579 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 09:46:01,579 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 09:46:01,580 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 09:46:03,916 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 09:46:03,916 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 09:46:03,917 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 09:46:03,917 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 09:46:03,917 - INFO - app.main - Application shutdown event finished.
2025-06-12 09:46:07,922 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 09:46:07,960 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 09:46:07,966 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 09:46:07,966 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 09:46:08,833 - INFO - app.main - Application startup event triggered.
2025-06-12 09:46:08,833 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 09:46:08,838 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 09:46:08,882 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 09:46:08,893 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 09:46:08,893 - INFO - app.main - Firebase events processor background task started
2025-06-12 09:46:08,893 - INFO - app.main - Redis publisher background task started
2025-06-12 09:46:08,893 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 09:46:08,894 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 09:46:08,895 - INFO - app.main - Application startup event finished.
2025-06-12 09:46:08,895 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:46:08,897 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 09:46:09,783 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:47:08,896 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:47:08,897 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:48:08,894 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:48:08,895 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:48:47,106 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-12 09:48:47,136 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-12 09:48:47,170 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-12 09:48:47,197 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-12 09:48:47,220 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-12 09:48:47,245 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-12 09:48:47,293 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-12 09:48:47,314 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-12 09:48:47,339 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-12 09:48:47,370 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-12 09:48:47,388 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-12 09:48:47,410 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-12 09:48:47,436 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-12 09:48:47,468 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-12 09:48:47,508 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-12 09:48:47,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-12 09:48:47,554 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-12 09:48:47,578 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-12 09:48:47,605 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-12 09:48:47,640 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-12 09:48:47,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-12 09:48:47,782 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-12 09:48:47,822 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-12 09:48:47,866 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-12 09:48:47,921 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-12 09:48:47,952 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-12 09:48:47,984 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-12 09:48:48,021 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-12 09:48:48,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-12 09:48:48,088 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-12 09:48:48,119 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-12 09:48:48,184 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-12 09:48:48,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-12 09:48:48,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-12 09:48:48,257 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-12 09:48:48,286 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-12 09:48:48,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-12 09:48:48,343 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-12 09:48:48,372 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-12 09:48:48,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-12 09:48:48,429 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-12 09:48:48,447 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-12 09:48:48,516 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-12 09:48:48,531 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-12 09:48:48,550 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-12 09:48:48,571 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-12 09:48:48,595 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-12 09:48:48,628 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-12 09:48:48,655 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-12 09:48:48,674 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-12 09:48:48,692 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-12 09:48:48,704 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-12 09:48:48,722 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-12 09:48:48,746 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-12 09:48:48,767 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-12 09:48:48,789 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-12 09:48:48,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-12 09:48:48,818 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-12 09:48:48,834 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-12 09:48:48,852 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-12 09:48:48,872 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-12 09:48:48,890 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-12 09:48:48,918 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-12 09:48:48,936 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-12 09:48:48,956 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-12 09:48:48,975 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-12 09:48:49,004 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-12 09:48:49,028 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-12 09:48:49,049 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-12 09:48:49,068 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-12 09:48:49,090 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-12 09:48:49,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-12 09:48:49,154 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-12 09:48:49,192 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-12 09:48:49,216 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-12 09:48:49,265 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-12 09:48:49,299 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-12 09:48:49,330 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-12 09:48:49,355 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-12 09:48:50,544 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:48:52,712 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:48:55,170 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:48:57,979 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:48:59,999 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:02,155 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:04,155 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:06,424 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:08,854 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:08,896 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:49:08,897 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:49:11,146 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:13,369 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:15,804 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:18,151 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:20,686 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:22,799 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:24,882 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:27,223 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:29,792 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:31,923 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:34,412 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:36,619 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:38,863 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:40,996 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:43,397 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:45,760 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:47,881 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:50,346 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:52,523 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:54,906 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:57,001 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:49:59,514 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:01,918 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:04,077 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:06,579 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:08,823 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:08,894 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:50:08,894 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:50:11,291 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:13,412 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:15,869 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:17,981 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:20,283 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:23,151 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:23,305 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:23,375 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:24,864 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:27,203 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:29,424 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:31,891 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:34,208 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:36,398 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:38,882 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:41,061 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:43,579 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:45,665 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:47,868 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:50,195 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:52,457 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:54,780 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:57,891 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:50:59,991 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:02,213 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:04,802 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:07,101 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:08,896 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:51:08,897 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:51:09,304 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:11,864 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:13,959 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:16,171 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:18,464 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:20,894 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:22,924 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:25,274 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:27,624 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:30,129 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:32,235 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:34,655 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:36,923 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:39,151 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:41,824 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:43,793 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:46,170 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:48,382 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:50,641 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:51:51,567 - INFO - app.main - Application shutdown event triggered.
2025-06-12 09:51:51,567 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 09:51:51,567 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 09:51:51,568 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 09:51:52,610 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 09:51:52,610 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 09:51:52,610 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 09:51:52,611 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 09:51:52,612 - INFO - app.main - Redis client connection closed.
2025-06-12 09:51:52,612 - INFO - app.main - Application shutdown event finished.
2025-06-12 09:51:54,766 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 09:51:54,796 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 09:51:54,801 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 09:51:54,801 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 09:51:55,620 - INFO - app.main - Application startup event triggered.
2025-06-12 09:51:55,620 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 09:51:55,637 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 09:51:55,685 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 09:51:55,703 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 09:51:55,703 - INFO - app.main - Firebase events processor background task started
2025-06-12 09:51:55,704 - INFO - app.main - Redis publisher background task started
2025-06-12 09:51:55,704 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 09:51:55,705 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 09:51:55,706 - INFO - app.main - Application startup event finished.
2025-06-12 09:51:55,706 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:51:55,707 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 09:51:56,800 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:52:55,708 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:52:55,709 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:53:55,704 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:53:55,706 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:54:30,332 - INFO - app.main - Application shutdown event triggered.
2025-06-12 09:54:30,333 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 09:54:30,333 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 09:54:30,333 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 09:54:31,846 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 09:54:31,846 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 09:54:31,846 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 09:54:31,848 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 09:54:31,849 - INFO - app.main - Redis client connection closed.
2025-06-12 09:54:31,850 - INFO - app.main - Application shutdown event finished.
2025-06-12 09:54:33,956 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 09:54:33,978 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 09:54:33,985 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 09:54:33,985 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 09:54:34,651 - INFO - app.main - Application startup event triggered.
2025-06-12 09:54:34,651 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 09:54:34,656 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 09:54:34,685 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 09:54:34,691 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 09:54:34,691 - INFO - app.main - Firebase events processor background task started
2025-06-12 09:54:34,691 - INFO - app.main - Redis publisher background task started
2025-06-12 09:54:34,691 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 09:54:34,692 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 09:54:34,692 - INFO - app.main - Application startup event finished.
2025-06-12 09:54:34,693 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:54:34,693 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 09:54:35,542 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:55:34,694 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:55:34,695 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:56:34,691 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:56:34,691 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:57:34,701 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:57:34,702 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:58:34,692 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:58:34,693 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 09:58:37,729 - INFO - app.main - Application shutdown event triggered.
2025-06-12 09:58:37,730 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 09:58:37,730 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 09:58:37,731 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 09:58:39,451 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 09:58:39,452 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 09:58:39,452 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 09:58:39,454 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 09:58:39,456 - INFO - app.main - Redis client connection closed.
2025-06-12 09:58:39,457 - INFO - app.main - Application shutdown event finished.
2025-06-12 09:58:41,330 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 09:58:41,363 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 09:58:41,368 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 09:58:41,368 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 09:58:42,163 - INFO - app.main - Application startup event triggered.
2025-06-12 09:58:42,163 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 09:58:42,203 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 09:58:42,248 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 09:58:42,262 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 09:58:42,262 - INFO - app.main - Firebase events processor background task started
2025-06-12 09:58:42,262 - INFO - app.main - Redis publisher background task started
2025-06-12 09:58:42,263 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 09:58:42,264 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 09:58:42,265 - INFO - app.main - Application startup event finished.
2025-06-12 09:58:42,266 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:58:42,266 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 09:58:43,544 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 09:58:53,174 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 09:58:53,203 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 09:58:53,637 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 09:59:42,270 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 09:59:42,271 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:00:02,764 - INFO - app.main - Application shutdown event triggered.
2025-06-12 10:00:02,764 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 10:00:02,764 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 10:00:02,765 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 10:00:04,856 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 10:00:04,857 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 10:00:04,858 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 10:00:04,878 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 10:00:04,880 - INFO - app.main - Redis client connection closed.
2025-06-12 10:00:04,881 - INFO - app.main - Application shutdown event finished.
2025-06-12 10:00:06,630 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 10:00:06,649 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 10:00:06,656 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 10:00:06,657 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 10:00:07,271 - INFO - app.main - Application startup event triggered.
2025-06-12 10:00:07,281 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 10:00:07,286 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 10:00:07,340 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 10:00:07,352 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 10:00:07,352 - INFO - app.main - Firebase events processor background task started
2025-06-12 10:00:07,352 - INFO - app.main - Redis publisher background task started
2025-06-12 10:00:07,352 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 10:00:07,353 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 10:00:07,354 - INFO - app.main - Application startup event finished.
2025-06-12 10:00:07,354 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 10:00:07,354 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 10:00:08,349 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 10:01:07,360 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:01:07,360 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:02:07,349 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:02:07,350 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:03:07,354 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:03:07,354 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:04:07,353 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:04:07,354 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:05:07,357 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:05:07,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:06:07,357 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:06:07,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:07:07,357 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:07:07,358 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:08:07,353 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:08:07,353 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:09:07,348 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:09:07,349 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:10:07,362 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:10:07,362 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:10:10,797 - INFO - app.main - Application shutdown event triggered.
2025-06-12 10:10:10,799 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 10:10:10,799 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 10:10:10,815 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 10:10:11,464 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 10:10:11,464 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 10:10:11,465 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 10:10:11,471 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 10:10:11,499 - INFO - app.main - Redis client connection closed.
2025-06-12 10:10:11,500 - INFO - app.main - Application shutdown event finished.
2025-06-12 10:10:14,891 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 10:10:14,947 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 10:10:14,959 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 10:10:14,959 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 10:10:16,009 - INFO - app.main - Application startup event triggered.
2025-06-12 10:10:16,009 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 10:10:16,015 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 10:10:16,102 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 10:10:16,113 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 10:10:16,113 - INFO - app.main - Firebase events processor background task started
2025-06-12 10:10:16,114 - INFO - app.main - Redis publisher background task started
2025-06-12 10:10:16,114 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 10:10:16,115 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 10:10:16,116 - INFO - app.main - Application startup event finished.
2025-06-12 10:10:16,116 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 10:10:16,116 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 10:10:17,842 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 10:11:16,115 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:11:16,115 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:12:16,115 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 10:12:16,116 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 10:12:39,970 - INFO - app.main - Application shutdown event triggered.
2025-06-12 10:12:39,970 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 10:12:39,970 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 10:12:39,971 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 10:12:41,617 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 10:12:41,618 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 10:12:41,618 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 10:12:41,619 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 10:12:41,620 - INFO - app.main - Redis client connection closed.
2025-06-12 10:12:41,620 - INFO - app.main - Application shutdown event finished.
2025-06-12 21:21:50,079 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 21:21:50,108 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 21:21:50,116 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 21:21:50,116 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 21:21:50,928 - INFO - app.main - Application startup event triggered.
2025-06-12 21:21:50,928 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 21:21:50,934 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 21:21:53,022 - WARNING - app.main - Redis connection failed - continuing without Redis: 503: Redis unavailable
2025-06-12 21:21:53,039 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 21:21:53,039 - INFO - app.main - Firebase events processor background task started
2025-06-12 21:21:53,039 - WARNING - app.main - Redis is not available - skipping Redis-dependent tasks
2025-06-12 21:21:53,041 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 21:21:53,042 - INFO - app.main - Application startup event finished.
2025-06-12 21:21:53,042 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:21:53,043 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 21:21:54,202 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:22:53,049 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:22:53,050 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 21:23:53,046 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:23:53,046 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 21:24:53,049 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:24:53,049 - ERROR - app.main - Cannot update dynamic portfolios - Redis client not available
2025-06-12 21:25:34,172 - INFO - app.main - Application shutdown event triggered.
2025-06-12 21:25:34,173 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 21:25:34,173 - INFO - app.main - Cancelling 1 other background tasks...
2025-06-12 21:25:34,174 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 21:25:35,192 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 21:25:35,192 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 21:25:35,193 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 21:25:35,193 - WARNING - app.main - Redis client was not initialized or already closed.
2025-06-12 21:25:35,194 - INFO - app.main - Application shutdown event finished.
2025-06-12 21:25:47,091 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 21:25:47,124 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 21:25:47,130 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 21:25:47,130 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 21:25:48,000 - INFO - app.main - Application startup event triggered.
2025-06-12 21:25:48,000 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 21:25:48,011 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 21:25:48,074 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 21:25:48,088 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 21:25:48,088 - INFO - app.main - Firebase events processor background task started
2025-06-12 21:25:48,088 - INFO - app.main - Redis publisher background task started
2025-06-12 21:25:48,088 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 21:25:48,089 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 21:25:48,089 - INFO - app.main - Application startup event finished.
2025-06-12 21:25:48,089 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:25:48,090 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 21:25:49,027 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:26:26,598 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 21:26:26,599 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 21:26:27,213 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 21:26:48,096 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:26:48,097 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 21:26:57,565 - INFO - app.main - Application shutdown event triggered.
2025-06-12 21:26:57,566 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 21:26:57,566 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 21:26:57,567 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 21:26:58,236 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 21:26:58,236 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 21:26:58,236 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 21:26:58,237 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 21:26:58,237 - INFO - app.main - Redis client connection closed.
2025-06-12 21:26:58,237 - INFO - app.main - Application shutdown event finished.
2025-06-12 21:31:12,005 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 21:31:12,058 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 21:31:12,067 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 21:31:12,067 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 21:31:12,966 - INFO - app.main - Application startup event triggered.
2025-06-12 21:31:12,966 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 21:31:12,973 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 21:31:13,011 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 21:31:13,022 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 21:31:13,022 - INFO - app.main - Firebase events processor background task started
2025-06-12 21:31:13,022 - INFO - app.main - Redis publisher background task started
2025-06-12 21:31:13,022 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 21:31:13,023 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 21:31:13,024 - INFO - app.main - Application startup event finished.
2025-06-12 21:31:13,024 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:31:13,024 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 21:31:14,139 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:31:18,335 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 21:31:18,336 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 21:31:18,767 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 21:32:13,029 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:32:13,030 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 21:33:13,025 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:33:13,025 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 21:33:17,031 - INFO - app.main - Application shutdown event triggered.
2025-06-12 21:33:17,031 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 21:33:17,031 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 21:33:17,032 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 21:33:17,315 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 21:33:17,315 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 21:33:17,315 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 21:33:17,316 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 21:33:17,317 - INFO - app.main - Redis client connection closed.
2025-06-12 21:33:17,317 - INFO - app.main - Application shutdown event finished.
2025-06-12 21:37:05,628 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 21:37:05,646 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 21:37:05,652 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 21:37:05,652 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 21:37:06,201 - INFO - app.main - Application startup event triggered.
2025-06-12 21:37:06,202 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 21:37:06,205 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 21:37:06,269 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 21:37:06,276 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 21:37:06,276 - INFO - app.main - Firebase events processor background task started
2025-06-12 21:37:06,276 - INFO - app.main - Redis publisher background task started
2025-06-12 21:37:06,277 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 21:37:06,278 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 21:37:06,279 - INFO - app.main - Application startup event finished.
2025-06-12 21:37:06,279 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:37:06,280 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 21:37:07,614 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:37:12,650 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 21:37:12,651 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 21:37:13,071 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 153, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 21:37:27,702 - INFO - app.main - Application shutdown event triggered.
2025-06-12 21:37:27,703 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 21:37:27,703 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 21:37:27,704 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 21:37:28,906 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 21:37:28,906 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 21:37:28,907 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 21:37:28,950 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 21:37:28,951 - INFO - app.main - Redis client connection closed.
2025-06-12 21:37:28,951 - INFO - app.main - Application shutdown event finished.
2025-06-12 21:55:27,237 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 21:55:27,292 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 21:55:27,302 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 21:55:27,302 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 21:55:28,798 - INFO - app.main - Application startup event triggered.
2025-06-12 21:55:28,798 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 21:55:28,807 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 21:55:28,900 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 21:55:28,939 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 21:55:28,939 - INFO - app.main - Firebase events processor background task started
2025-06-12 21:55:28,939 - INFO - app.main - Redis publisher background task started
2025-06-12 21:55:28,939 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 21:55:28,948 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 21:55:28,951 - INFO - app.main - Application startup event finished.
2025-06-12 21:55:28,952 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:55:28,954 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 21:55:30,931 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 21:56:11,985 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 21:56:11,999 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 21:56:13,252 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 168, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 21:56:28,942 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-12 21:56:28,942 - ERROR - app.main - Error in update_all_users_dynamic_portfolio job: module 'app.crud.user' has no attribute 'get_all_active_users'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 163, in update_all_users_dynamic_portfolio
    live_users = await crud_user.get_all_active_users(db)
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: module 'app.crud.user' has no attribute 'get_all_active_users'. Did you mean: 'get_all_demo_users'?
2025-06-12 21:57:06,716 - INFO - app.main - Application shutdown event triggered.
2025-06-12 21:57:06,717 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 21:57:06,717 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 21:57:06,717 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 21:57:07,208 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 21:57:07,208 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 21:57:07,209 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 21:57:07,211 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 21:57:07,212 - INFO - app.main - Redis client connection closed.
2025-06-12 21:57:07,212 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:03:16,439 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:03:16,502 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:03:16,516 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:03:16,517 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:04:46,112 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:04:46,160 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:04:46,176 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:04:46,176 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:05:32,292 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:05:32,351 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:05:32,365 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:05:32,366 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:05:34,008 - INFO - app.main - Application startup event triggered.
2025-06-12 22:05:34,008 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:05:34,019 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:05:34,085 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:05:34,104 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:05:34,104 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:05:34,104 - INFO - app.main - Redis publisher background task started
2025-06-12 22:05:34,104 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:05:34,107 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:05:34,108 - INFO - app.main - Application startup event finished.
2025-06-12 22:05:34,109 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:05:34,110 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:05:35,365 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:06:16,831 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:06:16,831 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:06:16,831 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:06:16,833 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:06:16,834 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:06:18,477 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:06:18,478 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:06:18,478 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:06:18,480 - INFO - app.main - Redis client connection closed.
2025-06-12 22:06:18,481 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:06:21,925 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:06:21,972 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:06:21,983 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:06:21,984 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:06:23,214 - INFO - app.main - Application startup event triggered.
2025-06-12 22:06:23,214 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 380, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:06:23,222 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:06:23,266 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:06:23,278 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:06:23,279 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:06:23,279 - INFO - app.main - Redis publisher background task started
2025-06-12 22:06:23,279 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:06:23,282 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 475, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:06:23,282 - INFO - app.main - Application startup event finished.
2025-06-12 22:06:23,283 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:06:23,284 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:06:24,226 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:07:15,833 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:07:15,834 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:07:15,834 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:07:15,835 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:07:16,315 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:07:16,315 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:07:16,315 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:07:16,317 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:07:16,318 - INFO - app.main - Redis client connection closed.
2025-06-12 22:07:16,318 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:07:19,151 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:07:19,189 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:07:19,203 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:07:19,204 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:07:20,221 - INFO - app.main - Application startup event triggered.
2025-06-12 22:07:20,222 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 381, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:07:20,227 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:07:20,272 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:07:20,297 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:07:20,298 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:07:20,298 - INFO - app.main - Redis publisher background task started
2025-06-12 22:07:20,298 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:07:20,301 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 476, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:07:20,302 - INFO - app.main - Application startup event finished.
2025-06-12 22:07:20,303 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:07:20,304 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:07:21,356 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:07:39,389 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:07:39,390 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:07:39,390 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:07:39,391 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:07:41,683 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:07:41,683 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:07:41,683 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:07:41,685 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:07:41,686 - INFO - app.main - Redis client connection closed.
2025-06-12 22:07:41,686 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:07:45,122 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:07:45,172 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:07:45,183 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:07:45,183 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:07:46,417 - INFO - app.main - Application startup event triggered.
2025-06-12 22:07:46,417 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 395, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:07:46,424 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:07:46,459 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:07:46,470 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:07:46,470 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:07:46,471 - INFO - app.main - Redis publisher background task started
2025-06-12 22:07:46,471 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:07:46,471 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 490, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:07:46,472 - INFO - app.main - Application startup event finished.
2025-06-12 22:07:46,472 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:07:46,473 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:07:47,473 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:07:59,454 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:07:59,455 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:07:59,455 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:07:59,456 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:08:00,259 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:08:00,260 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:08:00,260 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:08:00,262 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:08:00,262 - INFO - app.main - Redis client connection closed.
2025-06-12 22:08:00,262 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:08:03,159 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:08:03,186 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:08:03,197 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:08:03,197 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:08:04,286 - INFO - app.main - Application startup event triggered.
2025-06-12 22:08:04,286 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 394, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:08:04,295 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:08:04,338 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:08:04,346 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:08:04,346 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:08:04,346 - INFO - app.main - Redis publisher background task started
2025-06-12 22:08:04,346 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:08:04,347 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 489, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:08:04,348 - INFO - app.main - Application startup event finished.
2025-06-12 22:08:04,348 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:08:04,349 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:08:05,383 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:08:14,794 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:08:14,794 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:08:14,794 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:08:14,795 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:08:16,455 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:08:16,456 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:08:16,457 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:08:16,468 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:08:16,469 - INFO - app.main - Redis client connection closed.
2025-06-12 22:08:16,469 - INFO - app.main - Application shutdown event finished.
2025-06-12 22:08:23,259 - INFO - app.shared_state - Initialized redis_publish_queue in shared_state with maxsize=500.
2025-06-12 22:08:23,313 - INFO - app.core.config - .env file loaded successfully.
2025-06-12 22:08:23,327 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-12 22:08:23,327 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-12 22:08:24,545 - INFO - app.main - Application startup event triggered.
2025-06-12 22:08:24,545 - ERROR - app.main - Error initializing Firebase Admin SDK: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 394, in startup_event
    cred_path = os.path.join(os.path.dirname(__file__), '..', settings.FIREBASE_CREDENTIALS_FILE)
                                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\pydantic\main.py", line 991, in __getattr__
    raise AttributeError(f'{type(self).__name__!r} object has no attribute {item!r}')
AttributeError: 'Settings' object has no attribute 'FIREBASE_CREDENTIALS_FILE'
2025-06-12 22:08:24,555 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-12 22:08:24,626 - INFO - app.main - Redis connection pool initialized successfully
2025-06-12 22:08:24,643 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-12 22:08:24,644 - INFO - app.main - Firebase events processor background task started
2025-06-12 22:08:24,644 - INFO - app.main - Redis publisher background task started
2025-06-12 22:08:24,644 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-12 22:08:24,646 - ERROR - app.main - Error creating service account token: object str can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 489, in startup_event
    await create_service_account_token(service_name="python_bridge")
TypeError: object str can't be used in 'await' expression
2025-06-12 22:08:24,647 - INFO - app.main - Application startup event finished.
2025-06-12 22:08:24,648 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:08:24,649 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-12 22:08:25,782 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-12 22:08:39,556 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 97, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 273, in get_current_user
    payload = decode_token(token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 102, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\AppData\Local\Programs\Python\Python313\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 318, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-12 22:09:00,166 - WARNING - app.core.cache - No cached adjusted buy price found for key: adjusted_market_price:Group B:AUDCAD
2025-06-12 22:09:00,167 - ERROR - app.core.cache - Fallback error fetching from Firebase for AUDCAD: name 'get_latest_market_data' is not defined
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\cache.py", line 478, in get_live_adjusted_buy_price_for_pair
    fallback_data = get_latest_market_data(symbol)
                    ^^^^^^^^^^^^^^^^^^^^^^
NameError: name 'get_latest_market_data' is not defined
2025-06-12 22:09:01,458 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: object dict can't be used in 'await' expression
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 168, in calculate_user_portfolio
    raw_market_data = await get_latest_market_data()
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
TypeError: object dict can't be used in 'await' expression
2025-06-12 22:09:17,961 - INFO - app.main - Application shutdown event triggered.
2025-06-12 22:09:17,962 - INFO - app.main - APScheduler shut down gracefully.
2025-06-12 22:09:17,963 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-12 22:09:17,965 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-12 22:09:18,877 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-12 22:09:18,877 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-12 22:09:18,877 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-12 22:09:18,878 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-12 22:09:18,879 - INFO - app.main - Redis client connection closed.
2025-06-12 22:09:18,879 - INFO - app.main - Application shutdown event finished.
