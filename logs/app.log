2025-06-20 04:00:28,233 - INFO - app.core.config - .env file loaded successfully.
2025-06-20 04:00:28,245 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-20 04:00:28,245 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-20 04:00:29,642 - INFO - app.main - Application startup event triggered.
2025-06-20 04:00:29,720 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-20 04:00:29,721 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-20 04:00:29,786 - INFO - app.main - Redis connection pool initialized successfully
2025-06-20 04:00:29,796 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-20 04:00:29,797 - INFO - app.main - Firebase events processor background task started
2025-06-20 04:00:29,797 - INFO - app.main - Redis publisher background task started
2025-06-20 04:00:29,797 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-20 04:00:29,797 - INFO - app.main - Generating initial service account token...
2025-06-20 04:00:29,797 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-20 04:00:30,624 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-20 04:00:30,626 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-20 04:00:30,626 - INFO - app.main - Application startup event finished.
2025-06-20 04:00:30,626 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-20 04:00:30,627 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-20 04:00:31,555 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-20 04:00:39,009 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 281, in get_current_user
    payload = decode_token(token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 326, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-20 04:00:48,427 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 281, in get_current_user
    payload = decode_token(token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 326, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-20 04:00:48,676 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 93, in decode_token
    payload = jwt.decode(token, settings.SECRET_KEY, algorithms=[settings.ALGORITHM])
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 174, in decode
    _validate_claims(
    ~~~~~~~~~~~~~~~~^
        claims,
        ^^^^^^^
    ...<5 lines>...
        options=defaults,
        ^^^^^^^^^^^^^^^^^
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 497, in _validate_claims
    _validate_exp(claims, leeway=leeway)
    ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\jose\jwt.py", line 331, in _validate_exp
    raise ExpiredSignatureError("Signature has expired.")
jose.exceptions.ExpiredSignatureError: Signature has expired.

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 281, in get_current_user
    payload = decode_token(token)
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 98, in decode_token
    raise JWTError("Could not validate credentials")
jose.exceptions.JWTError: Could not validate credentials

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 326, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-20 04:00:50,579 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 278, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-20 04:00:50,590 - ERROR - app.database.session - Database session error: 401: Could not validate credentials
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\database\session.py", line 55, in get_db
    yield session
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\routing.py", line 291, in app
    solved_result = await solve_dependencies(
                    ^^^^^^^^^^^^^^^^^^^^^^^^^
    ...<6 lines>...
    )
    ^
  File "C:\Users\Dhanush\FASTAPI\venv\Lib\site-packages\fastapi\dependencies\utils.py", line 638, in solve_dependencies
    solved = await call(**solved_result.values)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\Dhanush\FASTAPI\app\core\security.py", line 278, in get_current_user
    raise credentials_exception
fastapi.exceptions.HTTPException: 401: Could not validate credentials
2025-06-20 04:01:29,795 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:01:29,815 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:01:29,871 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:01:29,886 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:01:29,921 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:01:29,932 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:01:29,969 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:01:29,969 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:02:13,316 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-20 04:02:13,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-20 04:02:13,399 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-20 04:02:13,485 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-20 04:02:13,522 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-20 04:02:13,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-20 04:02:13,607 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-20 04:02:13,652 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-20 04:02:13,691 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-20 04:02:13,729 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-20 04:02:13,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-20 04:02:13,803 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-20 04:02:13,842 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-20 04:02:13,879 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-20 04:02:13,915 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-20 04:02:13,996 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-20 04:02:14,230 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-20 04:02:14,306 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-20 04:02:14,378 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-20 04:02:14,405 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-20 04:02:14,441 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-20 04:02:14,482 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-20 04:02:14,522 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-20 04:02:14,565 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-20 04:02:14,600 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-20 04:02:14,628 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-20 04:02:14,704 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-20 04:02:14,747 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-20 04:02:14,779 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-20 04:02:14,809 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-20 04:02:14,832 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-20 04:02:14,879 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-20 04:02:14,911 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-20 04:02:14,940 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-20 04:02:14,962 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-20 04:02:14,985 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-20 04:02:15,052 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-20 04:02:15,062 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-20 04:02:15,076 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-20 04:02:15,095 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-20 04:02:15,110 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-20 04:02:15,129 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-20 04:02:15,142 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-20 04:02:15,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-20 04:02:15,195 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-20 04:02:15,212 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-20 04:02:15,228 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-20 04:02:15,243 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-20 04:02:15,257 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-20 04:02:15,276 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-20 04:02:15,302 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-20 04:02:15,327 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-20 04:02:15,343 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-20 04:02:15,369 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-20 04:02:15,394 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-20 04:02:15,415 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-20 04:02:15,438 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-20 04:02:15,459 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-20 04:02:15,485 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-20 04:02:15,497 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-20 04:02:15,512 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-20 04:02:15,529 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-20 04:02:15,582 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-20 04:02:15,598 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-20 04:02:15,623 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-20 04:02:15,647 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-20 04:02:15,670 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-20 04:02:15,682 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-20 04:02:15,699 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-20 04:02:15,726 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-20 04:02:15,770 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-20 04:02:15,846 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-20 04:02:15,854 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-20 04:02:15,863 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-20 04:02:15,875 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-20 04:02:15,891 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-20 04:02:15,924 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-20 04:02:15,942 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-20 04:02:15,963 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-20 04:02:29,794 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:02:29,825 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:02:29,891 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:02:29,909 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:02:29,970 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:02:29,987 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:02:30,056 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:02:30,056 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:03:29,793 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:03:29,807 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:03:29,891 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:03:29,910 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:03:29,944 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:03:29,948 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:03:29,982 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:03:29,982 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:04:26,539 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:26,643 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCAD: buy=0, sell=0
2025-06-20 04:04:26,790 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCAD
2025-06-20 04:04:27,821 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:29,798 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:04:29,821 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:04:29,907 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:04:29,919 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:04:29,955 - ERROR - app.main - Error updating portfolio for user 1: 'DemoUserOrder' object has no attribute 'to_dict'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 218, in update_all_users_dynamic_portfolio
    open_positions = [o.to_dict() for o in open_orders_orm]
                      ^^^^^^^^^
AttributeError: 'DemoUserOrder' object has no attribute 'to_dict'
2025-06-20 04:04:29,961 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:04:29,976 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:04:30,013 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:04:30,013 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:04:30,211 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:32,538 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:34,932 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:37,066 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:39,935 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:04:41,795 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:05:29,794 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:05:29,802 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:05:29,866 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:05:29,886 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:05:29,960 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:05:29,971 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:05:30,008 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:05:30,008 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:05:57,943 - INFO - app.main - Application shutdown event triggered.
2025-06-20 04:05:57,943 - INFO - app.main - APScheduler shut down gracefully.
2025-06-20 04:05:57,943 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-20 04:05:57,944 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-20 04:05:57,946 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-20 04:05:59,837 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-20 04:05:59,837 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-20 04:05:59,837 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-20 04:05:59,837 - INFO - app.main - Redis client connection closed.
2025-06-20 04:05:59,837 - INFO - app.main - Application shutdown event finished.
2025-06-20 04:28:44,663 - INFO - app.core.config - .env file loaded successfully.
2025-06-20 04:28:44,672 - INFO - app.core.config - Settings instance loaded. Project: Trading App, API Prefix: /api/v1
2025-06-20 04:28:44,672 - INFO - app.database.session - Attempting to connect to database using URL: mysql+aiomysql://roo...
2025-06-20 04:28:45,712 - INFO - app.main - Application startup event triggered.
2025-06-20 04:28:45,764 - INFO - app.main - Firebase Admin SDK already initialized
2025-06-20 04:28:45,764 - WARNING - app.dependencies.redis_client - Redis client not initialized, attempting late connection.
2025-06-20 04:28:45,791 - INFO - app.main - Redis connection pool initialized successfully
2025-06-20 04:28:45,800 - INFO - app.main - APScheduler started successfully with jobs configured
2025-06-20 04:28:45,800 - INFO - app.main - Firebase events processor background task started
2025-06-20 04:28:45,800 - INFO - app.main - Redis publisher background task started
2025-06-20 04:28:45,800 - INFO - app.main - Stop loss/take profit checker background task started
2025-06-20 04:28:45,801 - INFO - app.main - Generating initial service account token...
2025-06-20 04:28:45,801 - INFO - app.main - APScheduler: Starting rotate_service_account_jwt job...
2025-06-20 04:28:47,475 - INFO - app.main - SUCCESS: Service account JWT for 'barclays_service_provider' was generated and pushed to Firebase.
2025-06-20 04:28:47,478 - INFO - app.main - APScheduler: Finished rotate_service_account_jwt job successfully.
2025-06-20 04:28:47,478 - INFO - app.main - Application startup event finished.
2025-06-20 04:28:47,478 - INFO - app.firebase_stream - Starting Firebase Admin event processing task for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-20 04:28:47,478 - INFO - app.firebase_stream - Attempting to start Firebase Admin listener for path: 'datafeeds'.
2025-06-20 04:28:48,201 - INFO - app.firebase_stream - Firebase Admin listener started successfully for path: 'datafeeds'. Queuing data for Redis publishing.
2025-06-20 04:29:14,273 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCAD'.
2025-06-20 04:29:14,395 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDCHF'.
2025-06-20 04:29:14,659 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDJPY'.
2025-06-20 04:29:14,840 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDNZD'.
2025-06-20 04:29:14,949 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDSGD'.
2025-06-20 04:29:15,033 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUDUSD'.
2025-06-20 04:29:15,111 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADCHF'.
2025-06-20 04:29:15,157 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CADJPY'.
2025-06-20 04:29:15,214 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFJPY'.
2025-06-20 04:29:15,264 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CHFSGD'.
2025-06-20 04:29:15,320 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURAUD'.
2025-06-20 04:29:15,359 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCAD'.
2025-06-20 04:29:15,416 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCHF'.
2025-06-20 04:29:15,479 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURCZK'.
2025-06-20 04:29:15,547 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURGBP'.
2025-06-20 04:29:15,639 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURJPY'.
2025-06-20 04:29:15,695 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNOK'.
2025-06-20 04:29:15,766 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURNZD'.
2025-06-20 04:29:15,795 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURPLN'.
2025-06-20 04:29:15,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSEK'.
2025-06-20 04:29:15,870 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURSGD'.
2025-06-20 04:29:15,922 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURTRY'.
2025-06-20 04:29:15,951 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURUSD'.
2025-06-20 04:29:15,999 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'EURZAR'.
2025-06-20 04:29:16,027 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPAUD'.
2025-06-20 04:29:16,054 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCAD'.
2025-06-20 04:29:16,093 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPCHF'.
2025-06-20 04:29:16,127 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPJPY'.
2025-06-20 04:29:16,159 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNOK'.
2025-06-20 04:29:16,188 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPNZD'.
2025-06-20 04:29:16,224 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSEK'.
2025-06-20 04:29:16,262 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPSGD'.
2025-06-20 04:29:16,284 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPTRY'.
2025-06-20 04:29:16,329 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GBPUSD'.
2025-06-20 04:29:16,352 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKJPY'.
2025-06-20 04:29:16,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NOKSEK'.
2025-06-20 04:29:16,413 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCAD'.
2025-06-20 04:29:16,437 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDCHF'.
2025-06-20 04:29:16,465 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDJPY'.
2025-06-20 04:29:16,497 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NZDUSD'.
2025-06-20 04:29:16,540 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SEKJPY'.
2025-06-20 04:29:16,579 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'SGDJPY'.
2025-06-20 04:29:16,612 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCAD'.
2025-06-20 04:29:16,642 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCHF'.
2025-06-20 04:29:16,664 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCNH'.
2025-06-20 04:29:16,701 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDCZK'.
2025-06-20 04:29:16,725 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDJPY'.
2025-06-20 04:29:16,762 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDMXN'.
2025-06-20 04:29:16,788 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDNOK'.
2025-06-20 04:29:16,805 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDPLN'.
2025-06-20 04:29:16,824 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSEK'.
2025-06-20 04:29:16,844 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDSGD'.
2025-06-20 04:29:16,867 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTHB'.
2025-06-20 04:29:16,885 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTRY'.
2025-06-20 04:29:16,910 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDZAR'.
2025-06-20 04:29:16,930 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'ZARJPY'.
2025-06-20 04:29:16,952 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAUUSD'.
2025-06-20 04:29:16,981 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'XAGUSD'.
2025-06-20 04:29:17,003 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'BTCUSD'.
2025-06-20 04:29:17,023 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UK100'.
2025-06-20 04:29:17,044 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'DE30'.
2025-06-20 04:29:17,063 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'AUS200'.
2025-06-20 04:29:17,092 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'FR40'.
2025-06-20 04:29:17,120 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US100'.
2025-06-20 04:29:17,147 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US500'.
2025-06-20 04:29:17,168 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000'.
2025-06-20 04:29:17,191 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US30'.
2025-06-20 04:29:17,215 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'JP225'.
2025-06-20 04:29:17,240 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'IND50'.
2025-06-20 04:29:17,263 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'CN50U'.
2025-06-20 04:29:17,288 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'HKG50'.
2025-06-20 04:29:17,311 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USOIL'.
2025-06-20 04:29:17,336 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'UKOIL'.
2025-06-20 04:29:17,356 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'NGAS'.
2025-06-20 04:29:17,380 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'USDTUSD'.
2025-06-20 04:29:17,433 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'US2000-1'.
2025-06-20 04:29:17,460 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'GER30-1'.
2025-06-20 04:29:17,488 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'W20'.
2025-06-20 04:29:17,589 - DEBUG - app.core.cache - Group-symbol settings cached for group 'Group B', symbol 'D30'.
2025-06-20 04:29:31,520 - WARNING - app.services.portfolio_calculator - Invalid current prices for AUDCHF: buy=0, sell=0
2025-06-20 04:29:31,915 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:32,047 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:34,259 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:29:36,164 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:38,756 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:29:41,163 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:43,298 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:29:45,505 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:29:45,803 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:29:45,862 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:29:45,938 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:29:45,955 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:29:45,987 - ERROR - app.main - Error updating portfolio for user 1: 'DemoUserOrder' object has no attribute 'to_dict'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 218, in update_all_users_dynamic_portfolio
    open_positions = [o.to_dict() for o in open_orders_orm]
                      ^^^^^^^^^
AttributeError: 'DemoUserOrder' object has no attribute 'to_dict'
2025-06-20 04:29:45,997 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:29:46,015 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:29:46,058 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:29:46,059 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:29:47,822 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:50,281 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:52,467 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:54,805 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:29:57,290 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:29:59,145 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:01,657 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:03,829 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:06,133 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:08,869 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:10,977 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:13,522 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:15,770 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:17,896 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:20,321 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:22,383 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:24,789 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:27,203 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:29,332 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:31,555 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:33,669 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:35,865 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:38,316 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:41,297 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:43,295 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:45,801 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:30:45,831 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:30:45,854 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:45,901 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:30:45,918 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:30:45,946 - ERROR - app.main - Error updating portfolio for user 1: 'DemoUserOrder' object has no attribute 'to_dict'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 218, in update_all_users_dynamic_portfolio
    open_positions = [o.to_dict() for o in open_orders_orm]
                      ^^^^^^^^^
AttributeError: 'DemoUserOrder' object has no attribute 'to_dict'
2025-06-20 04:30:45,952 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:30:45,967 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:30:46,007 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:30:46,007 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:30:47,924 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:49,958 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:52,648 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:54,723 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:30:57,689 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:30:59,558 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:01,689 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:03,955 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:06,495 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:08,753 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:11,027 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:13,708 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:15,556 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:17,806 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:20,084 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:22,452 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:24,957 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:27,072 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:29,322 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:32,163 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:34,224 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:36,615 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:38,835 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:41,054 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:43,257 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:45,787 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:45,800 - DEBUG - app.main - Starting update_all_users_dynamic_portfolio job
2025-06-20 04:31:45,814 - DEBUG - app.main - Found 8 active users to update portfolios
2025-06-20 04:31:45,871 - WARNING - app.main - No group settings found for group Admin. Skipping portfolio update for user 5.
2025-06-20 04:31:45,881 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 8.
2025-06-20 04:31:45,917 - ERROR - app.main - Error updating portfolio for user 1: 'DemoUserOrder' object has no attribute 'to_dict'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 218, in update_all_users_dynamic_portfolio
    open_positions = [o.to_dict() for o in open_orders_orm]
                      ^^^^^^^^^
AttributeError: 'DemoUserOrder' object has no attribute 'to_dict'
2025-06-20 04:31:45,922 - WARNING - app.main - User 2 has no group_name set. Skipping portfolio update.
2025-06-20 04:31:45,936 - WARNING - app.main - No group settings found for group string. Skipping portfolio update for user 3.
2025-06-20 04:31:45,979 - WARNING - app.main - User 5 has no group_name set. Skipping portfolio update.
2025-06-20 04:31:45,979 - DEBUG - app.main - Finished update_all_users_dynamic_portfolio job
2025-06-20 04:31:47,775 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:50,094 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:52,478 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:54,734 - WARNING - app.services.portfolio_calculator - No adjusted prices found for symbol AUDCHF
2025-06-20 04:31:57,327 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:31:59,340 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:32:01,426 - ERROR - app.services.portfolio_calculator - Error calculating portfolio: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\services\portfolio_calculator.py", line 228, in calculate_user_portfolio
    price_diff = current_sell - entry_price
                 ~~~~~~~~~~~~~^~~~~~~~~~~~~
TypeError: unsupported operand type(s) for -: 'float' and 'decimal.Decimal'
2025-06-20 04:32:01,743 - INFO - app.main - Application shutdown event triggered.
2025-06-20 04:32:01,743 - INFO - app.main - APScheduler shut down gracefully.
2025-06-20 04:32:01,743 - INFO - app.main - Cancelling 3 other background tasks...
2025-06-20 04:32:01,745 - INFO - app.firebase_stream - Firebase event processing task cancelled.
2025-06-20 04:32:03,268 - INFO - app.firebase_stream - Firebase listener closed.
2025-06-20 04:32:03,268 - INFO - app.firebase_stream - Firebase Admin event processing task finished.
2025-06-20 04:32:03,268 - INFO - app.main - Background task 'Task-3' cancelled successfully.
2025-06-20 04:32:03,269 - INFO - app.main - Background task 'Task-5' cancelled successfully.
2025-06-20 04:32:03,270 - INFO - app.main - Redis client connection closed.
2025-06-20 04:32:03,270 - INFO - app.main - Application shutdown event finished.
