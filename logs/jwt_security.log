2025-06-17 02:39:13,718 - jwt_security - INFO - security.connect_to_redis:108 - Attempting to connect to Redis...
2025-06-17 02:39:13,718 - jwt_security - INFO - security.connect_to_redis:117 - Redis connection details:
  Host: 127.0.0.1
  Resolved IP: 127.0.0.1
  Port: 6379
  DB: 0
  Password: <not set>
2025-06-17 02:39:29,853 - jwt_security - INFO - security.close_redis_connection:147 - Closing Redis connection...
2025-06-17 02:39:29,854 - jwt_security - INFO - security.close_redis_connection:150 - Redis connection closed.
2025-06-17 02:42:38,898 - jwt_security - INFO - security.connect_to_redis:108 - Attempting to connect to Redis...
2025-06-17 02:42:38,902 - jwt_security - INFO - security.connect_to_redis:117 - Redis connection details:
  Host: 127.0.0.1
  Resolved IP: 127.0.0.1
  Port: 6379
  DB: 0
  Password: <not set>
2025-06-17 02:42:38,942 - jwt_security - INFO - main.rotate_service_account_jwt:437 - APScheduler: Starting rotate_service_account_jwt job...
2025-06-17 02:42:38,943 - jwt_security - ERROR - main.rotate_service_account_jwt:463 - ERROR in rotate_service_account_jwt job: cannot import name 'get_firebase_db' from 'app.core.firebase' (C:\Users\Dhanush\FASTAPI\app\core\firebase.py)
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 444, in rotate_service_account_jwt
    from app.core.firebase import get_firebase_db
ImportError: cannot import name 'get_firebase_db' from 'app.core.firebase' (C:\Users\Dhanush\FASTAPI\app\core\firebase.py)
2025-06-17 02:42:39,951 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:39,951 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,090 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,090 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,139 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,139 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,150 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,150 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,170 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,170 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,177 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,177 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,200 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,200 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,212 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,212 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,232 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,232 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,238 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,239 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,254 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,254 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,261 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,261 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:42:40,277 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:42:40,277 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:42:40,284 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:42:40,284 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:20,356 - jwt_security - INFO - security.close_redis_connection:147 - Closing Redis connection...
2025-06-17 02:43:20,357 - jwt_security - INFO - security.close_redis_connection:150 - Redis connection closed.
2025-06-17 02:43:23,806 - jwt_security - INFO - security.connect_to_redis:108 - Attempting to connect to Redis...
2025-06-17 02:43:23,806 - jwt_security - INFO - security.connect_to_redis:117 - Redis connection details:
  Host: 127.0.0.1
  Resolved IP: 127.0.0.1
  Port: 6379
  DB: 0
  Password: <not set>
2025-06-17 02:43:23,860 - jwt_security - INFO - main.rotate_service_account_jwt:437 - APScheduler: Starting rotate_service_account_jwt job...
2025-06-17 02:43:23,861 - jwt_security - ERROR - main.rotate_service_account_jwt:463 - ERROR in rotate_service_account_jwt job: cannot import name 'get_firebase_db' from 'app.core.firebase' (C:\Users\Dhanush\FASTAPI\app\core\firebase.py)
Traceback (most recent call last):
  File "C:\Users\Dhanush\FASTAPI\app\main.py", line 444, in rotate_service_account_jwt
    from app.core.firebase import get_firebase_db
ImportError: cannot import name 'get_firebase_db' from 'app.core.firebase' (C:\Users\Dhanush\FASTAPI\app\core\firebase.py)
2025-06-17 02:43:25,055 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:25,055 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:25,302 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:25,303 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:26,554 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:26,554 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:26,559 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:26,559 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:27,080 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:27,081 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:27,088 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:27,089 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:34,912 - jwt_security - INFO - security.get_user_from_service_or_user_token:360 - Token payload: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:34,912 - jwt_security - INFO - security.get_user_from_service_or_user_token:402 - Regular user token detected. Deferring to get_current_user.
2025-06-17 02:43:34,912 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:34,912 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:34,919 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:34,919 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:34,919 - jwt_security - INFO - security.get_user_from_service_or_user_token:406 - Authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:35,616 - jwt_security - INFO - security.get_user_from_service_or_user_token:360 - Token payload: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:35,616 - jwt_security - INFO - security.get_user_from_service_or_user_token:402 - Regular user token detected. Deferring to get_current_user.
2025-06-17 02:43:35,617 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:35,617 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:35,643 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:35,643 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:35,643 - jwt_security - INFO - security.get_user_from_service_or_user_token:406 - Authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:47,246 - jwt_security - INFO - security.get_user_from_service_or_user_token:360 - Token payload: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:47,246 - jwt_security - INFO - security.get_user_from_service_or_user_token:402 - Regular user token detected. Deferring to get_current_user.
2025-06-17 02:43:47,247 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:43:47,247 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:43:47,258 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:43:47,259 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:43:47,260 - jwt_security - INFO - security.get_user_from_service_or_user_token:406 - Authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:00,461 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:00,461 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:44:00,466 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:44:00,466 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:20,069 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:20,069 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:44:20,075 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:44:20,075 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:26,038 - jwt_security - INFO - security.get_user_from_service_or_user_token:360 - Token payload: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:26,039 - jwt_security - INFO - security.get_user_from_service_or_user_token:402 - Regular user token detected. Deferring to get_current_user.
2025-06-17 02:44:26,040 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:26,040 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:44:26,049 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:44:26,050 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:26,050 - jwt_security - INFO - security.get_user_from_service_or_user_token:406 - Authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:29,502 - jwt_security - INFO - security.get_user_from_service_or_user_token:360 - Token payload: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:29,502 - jwt_security - INFO - security.get_user_from_service_or_user_token:402 - Regular user token detected. Deferring to get_current_user.
2025-06-17 02:44:29,502 - jwt_security - INFO - security.get_current_user:270 - Token payload in get_current_user: {'sub': '4', 'user_type': 'live', 'account_number': 'DYY5A', 'exp': 1750154477, 'iat': 1750152677}
2025-06-17 02:44:29,502 - jwt_security - INFO - security.get_current_user:288 - Looking up live user with ID: 4, Type: live
2025-06-17 02:44:29,509 - jwt_security - INFO - security.get_current_user:294 - Found live user - ID: 4, Type: live
2025-06-17 02:44:29,510 - jwt_security - INFO - security.get_current_user:309 - Successfully authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:44:29,510 - jwt_security - INFO - security.get_user_from_service_or_user_token:406 - Authenticated user - ID: 4, Type: live, Class: User
2025-06-17 02:45:24,792 - jwt_security - INFO - security.close_redis_connection:147 - Closing Redis connection...
2025-06-17 02:45:24,793 - jwt_security - INFO - security.close_redis_connection:150 - Redis connection closed.
